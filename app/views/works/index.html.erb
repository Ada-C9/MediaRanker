<main>
  <h3>List of works</h3>
  <section class="media-table">
    <h4>Albums</h4>
    <table>
      <thead>
        <tr>
          <th class="first">Votes</th>
          <th>Title</th>
          <th>Created by</th>
          <th class="last">Published</th>
          <th class="last">Upvote</th>
        </tr>
      </thead>
      <tbody>
        <% @works.where(category: :album).each do |work| %>
        <tr>
          <td><%= work.votes.count %></td>
          <td><%= link_to "#{work.title}", work_path(work) %></td>
          <td><%= work.creator %></td>
          <td><%= work.publication_year %></td>
          <td><%= link_to "Upvote", work_upvote_path(work), method: :post, class: "button upvote" %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </section>

  <section class="media-table">
    <h4>Books</h4>
    <table>
      <thead>
        <tr>
          <th class="first">Votes</th>
          <th>Title</th>
          <th>Created by</th>
          <th class="last">Published</th>
          <th class="last">Upvote</th>
        </tr>
      </thead>
      <tbody>
        <% @works.where(category: :book).each do |work| %>
        <tr>
          <td><%= work.votes.count %></td>
          <td><%= link_to "#{work.title}", work_path(work) %></td>
          <td><%= work.creator %></td>
          <td><%= work.publication_year %></td>
          <td><%= link_to "Upvote", work_upvote_path(work), method: :post, class: "button upvote" %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </section>

  <section class="media-table">
    <h4>Movies</h4>
    <table>
      <thead>
        <tr>
          <th class="first">Votes</th>
          <th>Title</th>
          <th>Created by</th>
          <th class="last">Published</th>
          <th class="last">Upvote</th>
        </tr>
      </thead>
      <tbody>
        <% @works.where(category: :movie).each do |work| %>
        <tr>
          <td><%= work.votes.count %></td>
          <td><%= link_to "#{work.title}", work_path(work) %></td>
          <td><%= work.creator %></td>
          <td><%= work.publication_year %></td>
          <td><%= link_to "Upvote", work_upvote_path(work), method: :post, class: "button upvote" %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </section>

  <%= link_to "View top media", root_path, class: "button" %>
  <%= link_to "Add a new work", new_work_path, class: "button" %>
</main>
