  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (1.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 04:47:53.510735', '2018-04-13 04:47:53.510735', 206669143)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 04:47:53.510735', '2018-04-13 04:47:53.510735', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 04:47:53.510735', '2018-04-13 04:47:53.510735', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 04:47:53.510735', '2018-04-13 04:47:53.510735', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 04:47:53.510735', '2018-04-13 04:47:53.510735', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 04:47:53.510735', '2018-04-13 04:47:53.510735', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 04:47:53.510735', '2018-04-13 04:47:53.510735', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 04:47:53.510735', '2018-04-13 04:47:53.510735', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 04:47:53.510735', '2018-04-13 04:47:53.510735', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (1.0ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 04:47:53.537615', '2018-04-13 04:47:53.537615', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 04:47:53.537615', '2018-04-13 04:47:53.537615', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:47:53.537615', '2018-04-13 04:47:53.537615', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:47:53.537615', '2018-04-13 04:47:53.537615', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:47:53.537615', '2018-04-13 04:47:53.537615', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 04:47:53.548041', '2018-04-13 04:47:53.548041', 373891647)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 04:47:53.548041', '2018-04-13 04:47:53.548041', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 04:47:53.548041', '2018-04-13 04:47:53.548041', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 04:47:53.548041', '2018-04-13 04:47:53.548041', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 04:47:53.548041', '2018-04-13 04:47:53.548041', 1019702018)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_requires a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Vote: test_0001_must be valid
-----------------------------
  [1m[36mVote Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."work_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 04:50:23.894781', '2018-04-13 04:50:23.894781', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 04:50:23.894781', '2018-04-13 04:50:23.894781', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 04:50:23.894781', '2018-04-13 04:50:23.894781', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 04:50:23.894781', '2018-04-13 04:50:23.894781', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 04:50:23.894781', '2018-04-13 04:50:23.894781', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 04:50:23.894781', '2018-04-13 04:50:23.894781', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 04:50:23.894781', '2018-04-13 04:50:23.894781', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 04:50:23.894781', '2018-04-13 04:50:23.894781', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 04:50:23.894781', '2018-04-13 04:50:23.894781', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 04:50:23.907888', '2018-04-13 04:50:23.907888', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 04:50:23.907888', '2018-04-13 04:50:23.907888', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:50:23.907888', '2018-04-13 04:50:23.907888', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:50:23.907888', '2018-04-13 04:50:23.907888', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:50:23.907888', '2018-04-13 04:50:23.907888', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 04:50:23.920429', '2018-04-13 04:50:23.920429', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 04:50:23.920429', '2018-04-13 04:50:23.920429', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 04:50:23.920429', '2018-04-13 04:50:23.920429', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 04:50:23.920429', '2018-04-13 04:50:23.920429', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 04:50:23.920429', '2018-04-13 04:50:23.920429', 1019702018)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_requires a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Vote: test_0001_must be valid
-----------------------------
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."work_id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
User: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 04:51:32.416358', '2018-04-13 04:51:32.416358', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 04:51:32.416358', '2018-04-13 04:51:32.416358', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 04:51:32.416358', '2018-04-13 04:51:32.416358', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 04:51:32.416358', '2018-04-13 04:51:32.416358', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 04:51:32.416358', '2018-04-13 04:51:32.416358', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 04:51:32.416358', '2018-04-13 04:51:32.416358', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 04:51:32.416358', '2018-04-13 04:51:32.416358', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 04:51:32.416358', '2018-04-13 04:51:32.416358', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 04:51:32.416358', '2018-04-13 04:51:32.416358', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 04:51:32.427420', '2018-04-13 04:51:32.427420', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 04:51:32.427420', '2018-04-13 04:51:32.427420', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:51:32.427420', '2018-04-13 04:51:32.427420', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:51:32.427420', '2018-04-13 04:51:32.427420', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:51:32.427420', '2018-04-13 04:51:32.427420', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 04:51:32.433895', '2018-04-13 04:51:32.433895', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 04:51:32.433895', '2018-04-13 04:51:32.433895', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 04:51:32.433895', '2018-04-13 04:51:32.433895', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 04:51:32.433895', '2018-04-13 04:51:32.433895', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 04:51:32.433895', '2018-04-13 04:51:32.433895', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_requires a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 04:52:07.652967', '2018-04-13 04:52:07.652967', 206669143)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 04:52:07.652967', '2018-04-13 04:52:07.652967', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 04:52:07.652967', '2018-04-13 04:52:07.652967', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 04:52:07.652967', '2018-04-13 04:52:07.652967', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 04:52:07.652967', '2018-04-13 04:52:07.652967', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 04:52:07.652967', '2018-04-13 04:52:07.652967', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 04:52:07.652967', '2018-04-13 04:52:07.652967', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 04:52:07.652967', '2018-04-13 04:52:07.652967', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 04:52:07.652967', '2018-04-13 04:52:07.652967', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 04:52:07.663608', '2018-04-13 04:52:07.663608', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 04:52:07.663608', '2018-04-13 04:52:07.663608', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:52:07.663608', '2018-04-13 04:52:07.663608', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:52:07.663608', '2018-04-13 04:52:07.663608', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:52:07.663608', '2018-04-13 04:52:07.663608', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 04:52:07.669672', '2018-04-13 04:52:07.669672', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 04:52:07.669672', '2018-04-13 04:52:07.669672', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 04:52:07.669672', '2018-04-13 04:52:07.669672', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 04:52:07.669672', '2018-04-13 04:52:07.669672', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 04:52:07.669672', '2018-04-13 04:52:07.669672', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_requires a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 04:53:11.754407', '2018-04-13 04:53:11.754407', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 04:53:11.754407', '2018-04-13 04:53:11.754407', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 04:53:11.754407', '2018-04-13 04:53:11.754407', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 04:53:11.754407', '2018-04-13 04:53:11.754407', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 04:53:11.754407', '2018-04-13 04:53:11.754407', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 04:53:11.754407', '2018-04-13 04:53:11.754407', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 04:53:11.754407', '2018-04-13 04:53:11.754407', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 04:53:11.754407', '2018-04-13 04:53:11.754407', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 04:53:11.754407', '2018-04-13 04:53:11.754407', 42601833)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 04:53:11.766007', '2018-04-13 04:53:11.766007', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 04:53:11.766007', '2018-04-13 04:53:11.766007', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:53:11.766007', '2018-04-13 04:53:11.766007', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:53:11.766007', '2018-04-13 04:53:11.766007', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:53:11.766007', '2018-04-13 04:53:11.766007', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 04:53:11.773770', '2018-04-13 04:53:11.773770', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 04:53:11.773770', '2018-04-13 04:53:11.773770', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 04:53:11.773770', '2018-04-13 04:53:11.773770', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 04:53:11.773770', '2018-04-13 04:53:11.773770', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 04:53:11.773770', '2018-04-13 04:53:11.773770', 1019702018)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_requires a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 04:57:33.573305', '2018-04-13 04:57:33.573305', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 04:57:33.573305', '2018-04-13 04:57:33.573305', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 04:57:33.573305', '2018-04-13 04:57:33.573305', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 04:57:33.573305', '2018-04-13 04:57:33.573305', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 04:57:33.573305', '2018-04-13 04:57:33.573305', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 04:57:33.573305', '2018-04-13 04:57:33.573305', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 04:57:33.573305', '2018-04-13 04:57:33.573305', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 04:57:33.573305', '2018-04-13 04:57:33.573305', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 04:57:33.573305', '2018-04-13 04:57:33.573305', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 04:57:33.583774', '2018-04-13 04:57:33.583774', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 04:57:33.583774', '2018-04-13 04:57:33.583774', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:57:33.583774', '2018-04-13 04:57:33.583774', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:57:33.583774', '2018-04-13 04:57:33.583774', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:57:33.583774', '2018-04-13 04:57:33.583774', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 04:57:33.592377', '2018-04-13 04:57:33.592377', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 04:57:33.592377', '2018-04-13 04:57:33.592377', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 04:57:33.592377', '2018-04-13 04:57:33.592377', 315165233)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 04:57:33.592377', '2018-04-13 04:57:33.592377', 197155733)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 04:57:33.592377', '2018-04-13 04:57:33.592377', 1019702018)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_requires a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 04:58:23.544904', '2018-04-13 04:58:23.544904', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 04:58:23.544904', '2018-04-13 04:58:23.544904', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 04:58:23.544904', '2018-04-13 04:58:23.544904', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 04:58:23.544904', '2018-04-13 04:58:23.544904', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 04:58:23.544904', '2018-04-13 04:58:23.544904', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 04:58:23.544904', '2018-04-13 04:58:23.544904', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 04:58:23.544904', '2018-04-13 04:58:23.544904', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 04:58:23.544904', '2018-04-13 04:58:23.544904', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 04:58:23.544904', '2018-04-13 04:58:23.544904', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 04:58:23.554543', '2018-04-13 04:58:23.554543', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 04:58:23.554543', '2018-04-13 04:58:23.554543', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:58:23.554543', '2018-04-13 04:58:23.554543', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:58:23.554543', '2018-04-13 04:58:23.554543', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:58:23.554543', '2018-04-13 04:58:23.554543', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 04:58:23.562211', '2018-04-13 04:58:23.562211', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 04:58:23.562211', '2018-04-13 04:58:23.562211', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 04:58:23.562211', '2018-04-13 04:58:23.562211', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 04:58:23.562211', '2018-04-13 04:58:23.562211', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 04:58:23.562211', '2018-04-13 04:58:23.562211', 1019702018)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_requires a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 04:59:25.570302', '2018-04-13 04:59:25.570302', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 04:59:25.570302', '2018-04-13 04:59:25.570302', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 04:59:25.570302', '2018-04-13 04:59:25.570302', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 04:59:25.570302', '2018-04-13 04:59:25.570302', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 04:59:25.570302', '2018-04-13 04:59:25.570302', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 04:59:25.570302', '2018-04-13 04:59:25.570302', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 04:59:25.570302', '2018-04-13 04:59:25.570302', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 04:59:25.570302', '2018-04-13 04:59:25.570302', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 04:59:25.570302', '2018-04-13 04:59:25.570302', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 04:59:25.580021', '2018-04-13 04:59:25.580021', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 04:59:25.580021', '2018-04-13 04:59:25.580021', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:59:25.580021', '2018-04-13 04:59:25.580021', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:59:25.580021', '2018-04-13 04:59:25.580021', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 04:59:25.580021', '2018-04-13 04:59:25.580021', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 04:59:25.588171', '2018-04-13 04:59:25.588171', 373891647)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 04:59:25.588171', '2018-04-13 04:59:25.588171', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 04:59:25.588171', '2018-04-13 04:59:25.588171', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 04:59:25.588171', '2018-04-13 04:59:25.588171', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 04:59:25.588171', '2018-04-13 04:59:25.588171', 1019702018)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_requires a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:02:34.994951', '2018-04-13 05:02:34.994951', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:02:34.994951', '2018-04-13 05:02:34.994951', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:02:34.994951', '2018-04-13 05:02:34.994951', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:02:34.994951', '2018-04-13 05:02:34.994951', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:02:34.994951', '2018-04-13 05:02:34.994951', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:02:34.994951', '2018-04-13 05:02:34.994951', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:02:34.994951', '2018-04-13 05:02:34.994951', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:02:34.994951', '2018-04-13 05:02:34.994951', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:02:34.994951', '2018-04-13 05:02:34.994951', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:02:35.006009', '2018-04-13 05:02:35.006009', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:02:35.006009', '2018-04-13 05:02:35.006009', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:02:35.006009', '2018-04-13 05:02:35.006009', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:02:35.006009', '2018-04-13 05:02:35.006009', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:02:35.006009', '2018-04-13 05:02:35.006009', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:02:35.012949', '2018-04-13 05:02:35.012949', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:02:35.012949', '2018-04-13 05:02:35.012949', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:02:35.012949', '2018-04-13 05:02:35.012949', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:02:35.012949', '2018-04-13 05:02:35.012949', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:02:35.012949', '2018-04-13 05:02:35.012949', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_requires a title
--------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:03:20.773322', '2018-04-13 05:03:20.773322', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:03:20.773322', '2018-04-13 05:03:20.773322', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:03:20.773322', '2018-04-13 05:03:20.773322', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:03:20.773322', '2018-04-13 05:03:20.773322', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:03:20.773322', '2018-04-13 05:03:20.773322', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:03:20.773322', '2018-04-13 05:03:20.773322', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:03:20.773322', '2018-04-13 05:03:20.773322', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:03:20.773322', '2018-04-13 05:03:20.773322', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:03:20.773322', '2018-04-13 05:03:20.773322', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:03:20.783820', '2018-04-13 05:03:20.783820', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:03:20.783820', '2018-04-13 05:03:20.783820', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:03:20.783820', '2018-04-13 05:03:20.783820', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:03:20.783820', '2018-04-13 05:03:20.783820', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:03:20.783820', '2018-04-13 05:03:20.783820', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:03:20.797565', '2018-04-13 05:03:20.797565', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:03:20.797565', '2018-04-13 05:03:20.797565', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:03:20.797565', '2018-04-13 05:03:20.797565', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:03:20.797565', '2018-04-13 05:03:20.797565', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:03:20.797565', '2018-04-13 05:03:20.797565', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_requires a title
--------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:03:44.597133', '2018-04-13 05:03:44.597133', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:03:44.597133', '2018-04-13 05:03:44.597133', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:03:44.597133', '2018-04-13 05:03:44.597133', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:03:44.597133', '2018-04-13 05:03:44.597133', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:03:44.597133', '2018-04-13 05:03:44.597133', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:03:44.597133', '2018-04-13 05:03:44.597133', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:03:44.597133', '2018-04-13 05:03:44.597133', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:03:44.597133', '2018-04-13 05:03:44.597133', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:03:44.597133', '2018-04-13 05:03:44.597133', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:03:44.605920', '2018-04-13 05:03:44.605920', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:03:44.605920', '2018-04-13 05:03:44.605920', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:03:44.605920', '2018-04-13 05:03:44.605920', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:03:44.605920', '2018-04-13 05:03:44.605920', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:03:44.605920', '2018-04-13 05:03:44.605920', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:03:44.613941', '2018-04-13 05:03:44.613941', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:03:44.613941', '2018-04-13 05:03:44.613941', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:03:44.613941', '2018-04-13 05:03:44.613941', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:03:44.613941', '2018-04-13 05:03:44.613941', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:03:44.613941', '2018-04-13 05:03:44.613941', 1019702018)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_requires a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:05:13.774943', '2018-04-13 05:05:13.774943', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:05:13.774943', '2018-04-13 05:05:13.774943', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:05:13.774943', '2018-04-13 05:05:13.774943', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:05:13.774943', '2018-04-13 05:05:13.774943', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:05:13.774943', '2018-04-13 05:05:13.774943', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:05:13.774943', '2018-04-13 05:05:13.774943', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:05:13.774943', '2018-04-13 05:05:13.774943', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:05:13.774943', '2018-04-13 05:05:13.774943', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:05:13.774943', '2018-04-13 05:05:13.774943', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:05:13.784443', '2018-04-13 05:05:13.784443', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:05:13.784443', '2018-04-13 05:05:13.784443', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:05:13.784443', '2018-04-13 05:05:13.784443', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:05:13.784443', '2018-04-13 05:05:13.784443', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:05:13.784443', '2018-04-13 05:05:13.784443', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:05:13.792070', '2018-04-13 05:05:13.792070', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:05:13.792070', '2018-04-13 05:05:13.792070', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:05:13.792070', '2018-04-13 05:05:13.792070', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:05:13.792070', '2018-04-13 05:05:13.792070', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:05:13.792070', '2018-04-13 05:05:13.792070', 1019702018)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_requires a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:06:46.816182', '2018-04-13 05:06:46.816182', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:06:46.816182', '2018-04-13 05:06:46.816182', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:06:46.816182', '2018-04-13 05:06:46.816182', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:06:46.816182', '2018-04-13 05:06:46.816182', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:06:46.816182', '2018-04-13 05:06:46.816182', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:06:46.816182', '2018-04-13 05:06:46.816182', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:06:46.816182', '2018-04-13 05:06:46.816182', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:06:46.816182', '2018-04-13 05:06:46.816182', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:06:46.816182', '2018-04-13 05:06:46.816182', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:06:46.825979', '2018-04-13 05:06:46.825979', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:06:46.825979', '2018-04-13 05:06:46.825979', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:06:46.825979', '2018-04-13 05:06:46.825979', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:06:46.825979', '2018-04-13 05:06:46.825979', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:06:46.825979', '2018-04-13 05:06:46.825979', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:06:46.833229', '2018-04-13 05:06:46.833229', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:06:46.833229', '2018-04-13 05:06:46.833229', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:06:46.833229', '2018-04-13 05:06:46.833229', 315165233)[0m
  [1m[36mFixture Insert (1.5ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:06:46.833229', '2018-04-13 05:06:46.833229', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:06:46.833229', '2018-04-13 05:06:46.833229', 1019702018)[0m
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_requires a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:07:09.871696', '2018-04-13 05:07:09.871696', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:07:09.871696', '2018-04-13 05:07:09.871696', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:07:09.871696', '2018-04-13 05:07:09.871696', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:07:09.871696', '2018-04-13 05:07:09.871696', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:07:09.871696', '2018-04-13 05:07:09.871696', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:07:09.871696', '2018-04-13 05:07:09.871696', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:07:09.871696', '2018-04-13 05:07:09.871696', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:07:09.871696', '2018-04-13 05:07:09.871696', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:07:09.871696', '2018-04-13 05:07:09.871696', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:07:09.881217', '2018-04-13 05:07:09.881217', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:07:09.881217', '2018-04-13 05:07:09.881217', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:07:09.881217', '2018-04-13 05:07:09.881217', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:07:09.881217', '2018-04-13 05:07:09.881217', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:07:09.881217', '2018-04-13 05:07:09.881217', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:07:09.890330', '2018-04-13 05:07:09.890330', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:07:09.890330', '2018-04-13 05:07:09.890330', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:07:09.890330', '2018-04-13 05:07:09.890330', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:07:09.890330', '2018-04-13 05:07:09.890330', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:07:09.890330', '2018-04-13 05:07:09.890330', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0002_requires a category
-----------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:08:05.973391', '2018-04-13 05:08:05.973391', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:08:05.973391', '2018-04-13 05:08:05.973391', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:08:05.973391', '2018-04-13 05:08:05.973391', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:08:05.973391', '2018-04-13 05:08:05.973391', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:08:05.973391', '2018-04-13 05:08:05.973391', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:08:05.973391', '2018-04-13 05:08:05.973391', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:08:05.973391', '2018-04-13 05:08:05.973391', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:08:05.973391', '2018-04-13 05:08:05.973391', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:08:05.973391', '2018-04-13 05:08:05.973391', 42601833)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:08:05.982003', '2018-04-13 05:08:05.982003', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:08:05.982003', '2018-04-13 05:08:05.982003', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:08:05.982003', '2018-04-13 05:08:05.982003', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:08:05.982003', '2018-04-13 05:08:05.982003', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:08:05.982003', '2018-04-13 05:08:05.982003', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:08:05.989943', '2018-04-13 05:08:05.989943', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:08:05.989943', '2018-04-13 05:08:05.989943', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:08:05.989943', '2018-04-13 05:08:05.989943', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:08:05.989943', '2018-04-13 05:08:05.989943', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:08:05.989943', '2018-04-13 05:08:05.989943', 1019702018)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0002_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:08:28.483898', '2018-04-13 05:08:28.483898', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:08:28.483898', '2018-04-13 05:08:28.483898', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:08:28.483898', '2018-04-13 05:08:28.483898', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:08:28.483898', '2018-04-13 05:08:28.483898', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:08:28.483898', '2018-04-13 05:08:28.483898', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:08:28.483898', '2018-04-13 05:08:28.483898', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:08:28.483898', '2018-04-13 05:08:28.483898', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:08:28.483898', '2018-04-13 05:08:28.483898', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:08:28.483898', '2018-04-13 05:08:28.483898', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:08:28.494650', '2018-04-13 05:08:28.494650', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:08:28.494650', '2018-04-13 05:08:28.494650', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:08:28.494650', '2018-04-13 05:08:28.494650', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:08:28.494650', '2018-04-13 05:08:28.494650', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:08:28.494650', '2018-04-13 05:08:28.494650', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:08:28.501756', '2018-04-13 05:08:28.501756', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:08:28.501756', '2018-04-13 05:08:28.501756', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:08:28.501756', '2018-04-13 05:08:28.501756', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:08:28.501756', '2018-04-13 05:08:28.501756', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:08:28.501756', '2018-04-13 05:08:28.501756', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0002_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:11:16.087675', '2018-04-13 05:11:16.087675', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:11:16.087675', '2018-04-13 05:11:16.087675', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:11:16.087675', '2018-04-13 05:11:16.087675', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:11:16.087675', '2018-04-13 05:11:16.087675', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:11:16.087675', '2018-04-13 05:11:16.087675', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:11:16.087675', '2018-04-13 05:11:16.087675', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:11:16.087675', '2018-04-13 05:11:16.087675', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:11:16.087675', '2018-04-13 05:11:16.087675', 898448884)[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:11:16.087675', '2018-04-13 05:11:16.087675', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:11:16.099453', '2018-04-13 05:11:16.099453', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:11:16.099453', '2018-04-13 05:11:16.099453', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:11:16.099453', '2018-04-13 05:11:16.099453', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:11:16.099453', '2018-04-13 05:11:16.099453', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:11:16.099453', '2018-04-13 05:11:16.099453', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:11:16.110875', '2018-04-13 05:11:16.110875', 373891647)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:11:16.110875', '2018-04-13 05:11:16.110875', 681446112)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:11:16.110875', '2018-04-13 05:11:16.110875', 315165233)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:11:16.110875', '2018-04-13 05:11:16.110875', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:11:16.110875', '2018-04-13 05:11:16.110875', 1019702018)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:31:57.859562', '2018-04-13 05:31:57.859562', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:31:57.859562', '2018-04-13 05:31:57.859562', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:31:57.859562', '2018-04-13 05:31:57.859562', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:31:57.859562', '2018-04-13 05:31:57.859562', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:31:57.859562', '2018-04-13 05:31:57.859562', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:31:57.859562', '2018-04-13 05:31:57.859562', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:31:57.859562', '2018-04-13 05:31:57.859562', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:31:57.859562', '2018-04-13 05:31:57.859562', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:31:57.859562', '2018-04-13 05:31:57.859562', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:31:57.873901', '2018-04-13 05:31:57.873901', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:31:57.873901', '2018-04-13 05:31:57.873901', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:31:57.873901', '2018-04-13 05:31:57.873901', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:31:57.873901', '2018-04-13 05:31:57.873901', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:31:57.873901', '2018-04-13 05:31:57.873901', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:31:57.882239', '2018-04-13 05:31:57.882239', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:31:57.882239', '2018-04-13 05:31:57.882239', 681446112)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:31:57.882239', '2018-04-13 05:31:57.882239', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:31:57.882239', '2018-04-13 05:31:57.882239', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:31:57.882239', '2018-04-13 05:31:57.882239', 1019702018)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:37:37.408526', '2018-04-13 05:37:37.408526', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:37:37.408526', '2018-04-13 05:37:37.408526', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:37:37.408526', '2018-04-13 05:37:37.408526', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:37:37.408526', '2018-04-13 05:37:37.408526', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:37:37.408526', '2018-04-13 05:37:37.408526', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:37:37.408526', '2018-04-13 05:37:37.408526', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:37:37.408526', '2018-04-13 05:37:37.408526', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:37:37.408526', '2018-04-13 05:37:37.408526', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:37:37.408526', '2018-04-13 05:37:37.408526', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:37:37.418701', '2018-04-13 05:37:37.418701', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:37:37.418701', '2018-04-13 05:37:37.418701', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:37:37.418701', '2018-04-13 05:37:37.418701', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:37:37.418701', '2018-04-13 05:37:37.418701', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:37:37.418701', '2018-04-13 05:37:37.418701', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:37:37.427596', '2018-04-13 05:37:37.427596', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:37:37.427596', '2018-04-13 05:37:37.427596', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:37:37.427596', '2018-04-13 05:37:37.427596', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:37:37.427596', '2018-04-13 05:37:37.427596', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:37:37.427596', '2018-04-13 05:37:37.427596', 1019702018)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:38:35.060190', '2018-04-13 05:38:35.060190', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:38:35.060190', '2018-04-13 05:38:35.060190', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:38:35.060190', '2018-04-13 05:38:35.060190', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:38:35.060190', '2018-04-13 05:38:35.060190', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:38:35.060190', '2018-04-13 05:38:35.060190', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:38:35.060190', '2018-04-13 05:38:35.060190', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:38:35.060190', '2018-04-13 05:38:35.060190', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:38:35.060190', '2018-04-13 05:38:35.060190', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:38:35.060190', '2018-04-13 05:38:35.060190', 42601833)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:38:35.069441', '2018-04-13 05:38:35.069441', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:38:35.069441', '2018-04-13 05:38:35.069441', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:38:35.069441', '2018-04-13 05:38:35.069441', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:38:35.069441', '2018-04-13 05:38:35.069441', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:38:35.069441', '2018-04-13 05:38:35.069441', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:38:35.077591', '2018-04-13 05:38:35.077591', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:38:35.077591', '2018-04-13 05:38:35.077591', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:38:35.077591', '2018-04-13 05:38:35.077591', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:38:35.077591', '2018-04-13 05:38:35.077591', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:38:35.077591', '2018-04-13 05:38:35.077591', 1019702018)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:39:24.594024', '2018-04-13 05:39:24.594024', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:39:24.594024', '2018-04-13 05:39:24.594024', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:39:24.594024', '2018-04-13 05:39:24.594024', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:39:24.594024', '2018-04-13 05:39:24.594024', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:39:24.594024', '2018-04-13 05:39:24.594024', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:39:24.594024', '2018-04-13 05:39:24.594024', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:39:24.594024', '2018-04-13 05:39:24.594024', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:39:24.594024', '2018-04-13 05:39:24.594024', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:39:24.594024', '2018-04-13 05:39:24.594024', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:39:24.604986', '2018-04-13 05:39:24.604986', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:39:24.604986', '2018-04-13 05:39:24.604986', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:39:24.604986', '2018-04-13 05:39:24.604986', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:39:24.604986', '2018-04-13 05:39:24.604986', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:39:24.604986', '2018-04-13 05:39:24.604986', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:39:24.612228', '2018-04-13 05:39:24.612228', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:39:24.612228', '2018-04-13 05:39:24.612228', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:39:24.612228', '2018-04-13 05:39:24.612228', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:39:24.612228', '2018-04-13 05:39:24.612228', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:39:24.612228', '2018-04-13 05:39:24.612228', 1019702018)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:39:57.517586', '2018-04-13 05:39:57.517586', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:39:57.517586', '2018-04-13 05:39:57.517586', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:39:57.517586', '2018-04-13 05:39:57.517586', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:39:57.517586', '2018-04-13 05:39:57.517586', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:39:57.517586', '2018-04-13 05:39:57.517586', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:39:57.517586', '2018-04-13 05:39:57.517586', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:39:57.517586', '2018-04-13 05:39:57.517586', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:39:57.517586', '2018-04-13 05:39:57.517586', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:39:57.517586', '2018-04-13 05:39:57.517586', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:39:57.528875', '2018-04-13 05:39:57.528875', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:39:57.528875', '2018-04-13 05:39:57.528875', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:39:57.528875', '2018-04-13 05:39:57.528875', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:39:57.528875', '2018-04-13 05:39:57.528875', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:39:57.528875', '2018-04-13 05:39:57.528875', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:39:57.536161', '2018-04-13 05:39:57.536161', 373891647)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:39:57.536161', '2018-04-13 05:39:57.536161', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:39:57.536161', '2018-04-13 05:39:57.536161', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:39:57.536161', '2018-04-13 05:39:57.536161', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:39:57.536161', '2018-04-13 05:39:57.536161', 1019702018)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:40:57.317605', '2018-04-13 05:40:57.317605', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:40:57.317605', '2018-04-13 05:40:57.317605', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:40:57.317605', '2018-04-13 05:40:57.317605', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:40:57.317605', '2018-04-13 05:40:57.317605', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:40:57.317605', '2018-04-13 05:40:57.317605', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:40:57.317605', '2018-04-13 05:40:57.317605', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:40:57.317605', '2018-04-13 05:40:57.317605', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:40:57.317605', '2018-04-13 05:40:57.317605', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:40:57.317605', '2018-04-13 05:40:57.317605', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:40:57.327426', '2018-04-13 05:40:57.327426', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:40:57.327426', '2018-04-13 05:40:57.327426', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:40:57.327426', '2018-04-13 05:40:57.327426', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:40:57.327426', '2018-04-13 05:40:57.327426', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:40:57.327426', '2018-04-13 05:40:57.327426', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:40:57.334719', '2018-04-13 05:40:57.334719', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:40:57.334719', '2018-04-13 05:40:57.334719', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:40:57.334719', '2018-04-13 05:40:57.334719', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:40:57.334719', '2018-04-13 05:40:57.334719', 197155733)[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:40:57.334719', '2018-04-13 05:40:57.334719', 1019702018)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:42:50.337074', '2018-04-13 05:42:50.337074', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:42:50.337074', '2018-04-13 05:42:50.337074', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:42:50.337074', '2018-04-13 05:42:50.337074', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:42:50.337074', '2018-04-13 05:42:50.337074', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:42:50.337074', '2018-04-13 05:42:50.337074', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:42:50.337074', '2018-04-13 05:42:50.337074', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:42:50.337074', '2018-04-13 05:42:50.337074', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:42:50.337074', '2018-04-13 05:42:50.337074', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:42:50.337074', '2018-04-13 05:42:50.337074', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:42:50.347241', '2018-04-13 05:42:50.347241', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:42:50.347241', '2018-04-13 05:42:50.347241', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:42:50.347241', '2018-04-13 05:42:50.347241', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:42:50.347241', '2018-04-13 05:42:50.347241', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:42:50.347241', '2018-04-13 05:42:50.347241', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:42:50.354504', '2018-04-13 05:42:50.354504', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:42:50.354504', '2018-04-13 05:42:50.354504', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:42:50.354504', '2018-04-13 05:42:50.354504', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:42:50.354504', '2018-04-13 05:42:50.354504', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:42:50.354504', '2018-04-13 05:42:50.354504', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:43:12.791226', '2018-04-13 05:43:12.791226', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:43:12.791226', '2018-04-13 05:43:12.791226', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:43:12.791226', '2018-04-13 05:43:12.791226', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:43:12.791226', '2018-04-13 05:43:12.791226', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:43:12.791226', '2018-04-13 05:43:12.791226', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:43:12.791226', '2018-04-13 05:43:12.791226', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:43:12.791226', '2018-04-13 05:43:12.791226', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:43:12.791226', '2018-04-13 05:43:12.791226', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:43:12.791226', '2018-04-13 05:43:12.791226', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:43:12.801790', '2018-04-13 05:43:12.801790', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:43:12.801790', '2018-04-13 05:43:12.801790', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:43:12.801790', '2018-04-13 05:43:12.801790', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:43:12.801790', '2018-04-13 05:43:12.801790', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:43:12.801790', '2018-04-13 05:43:12.801790', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:43:12.807433', '2018-04-13 05:43:12.807433', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:43:12.807433', '2018-04-13 05:43:12.807433', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:43:12.807433', '2018-04-13 05:43:12.807433', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:43:12.807433', '2018-04-13 05:43:12.807433', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:43:12.807433', '2018-04-13 05:43:12.807433', 1019702018)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:43:38.830732', '2018-04-13 05:43:38.830732', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:43:38.830732', '2018-04-13 05:43:38.830732', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:43:38.830732', '2018-04-13 05:43:38.830732', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:43:38.830732', '2018-04-13 05:43:38.830732', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:43:38.830732', '2018-04-13 05:43:38.830732', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:43:38.830732', '2018-04-13 05:43:38.830732', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:43:38.830732', '2018-04-13 05:43:38.830732', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:43:38.830732', '2018-04-13 05:43:38.830732', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:43:38.830732', '2018-04-13 05:43:38.830732', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:43:38.841417', '2018-04-13 05:43:38.841417', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:43:38.841417', '2018-04-13 05:43:38.841417', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:43:38.841417', '2018-04-13 05:43:38.841417', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:43:38.841417', '2018-04-13 05:43:38.841417', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:43:38.841417', '2018-04-13 05:43:38.841417', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (1.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (1.9ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:43:38.847917', '2018-04-13 05:43:38.847917', 373891647)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:43:38.847917', '2018-04-13 05:43:38.847917', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:43:38.847917', '2018-04-13 05:43:38.847917', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:43:38.847917', '2018-04-13 05:43:38.847917', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:43:38.847917', '2018-04-13 05:43:38.847917', 1019702018)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:44:39.582875', '2018-04-13 05:44:39.582875', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:44:39.582875', '2018-04-13 05:44:39.582875', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:44:39.582875', '2018-04-13 05:44:39.582875', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:44:39.582875', '2018-04-13 05:44:39.582875', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:44:39.582875', '2018-04-13 05:44:39.582875', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:44:39.582875', '2018-04-13 05:44:39.582875', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:44:39.582875', '2018-04-13 05:44:39.582875', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:44:39.582875', '2018-04-13 05:44:39.582875', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:44:39.582875', '2018-04-13 05:44:39.582875', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:44:39.593998', '2018-04-13 05:44:39.593998', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:44:39.593998', '2018-04-13 05:44:39.593998', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:44:39.593998', '2018-04-13 05:44:39.593998', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:44:39.593998', '2018-04-13 05:44:39.593998', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:44:39.593998', '2018-04-13 05:44:39.593998', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:44:39.600334', '2018-04-13 05:44:39.600334', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:44:39.600334', '2018-04-13 05:44:39.600334', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:44:39.600334', '2018-04-13 05:44:39.600334', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:44:39.600334', '2018-04-13 05:44:39.600334', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:44:39.600334', '2018-04-13 05:44:39.600334', 1019702018)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:45:18.381172', '2018-04-13 05:45:18.381172', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:45:18.381172', '2018-04-13 05:45:18.381172', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:45:18.381172', '2018-04-13 05:45:18.381172', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:45:18.381172', '2018-04-13 05:45:18.381172', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:45:18.381172', '2018-04-13 05:45:18.381172', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:45:18.381172', '2018-04-13 05:45:18.381172', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:45:18.381172', '2018-04-13 05:45:18.381172', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:45:18.381172', '2018-04-13 05:45:18.381172', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:45:18.381172', '2018-04-13 05:45:18.381172', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:45:18.391244', '2018-04-13 05:45:18.391244', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:45:18.391244', '2018-04-13 05:45:18.391244', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:45:18.391244', '2018-04-13 05:45:18.391244', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:45:18.391244', '2018-04-13 05:45:18.391244', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:45:18.391244', '2018-04-13 05:45:18.391244', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:45:18.398469', '2018-04-13 05:45:18.398469', 373891647)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:45:18.398469', '2018-04-13 05:45:18.398469', 681446112)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:45:18.398469', '2018-04-13 05:45:18.398469', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:45:18.398469', '2018-04-13 05:45:18.398469', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:45:18.398469', '2018-04-13 05:45:18.398469', 1019702018)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:45:52.750125', '2018-04-13 05:45:52.750125', 206669143)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:45:52.750125', '2018-04-13 05:45:52.750125', 358143215)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:45:52.750125', '2018-04-13 05:45:52.750125', 576709754)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:45:52.750125', '2018-04-13 05:45:52.750125', 1010528733)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:45:52.750125', '2018-04-13 05:45:52.750125', 188498254)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:45:52.750125', '2018-04-13 05:45:52.750125', 305467638)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:45:52.750125', '2018-04-13 05:45:52.750125', 624042081)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:45:52.750125', '2018-04-13 05:45:52.750125', 898448884)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:45:52.750125', '2018-04-13 05:45:52.750125', 42601833)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:45:52.776080', '2018-04-13 05:45:52.776080', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:45:52.776080', '2018-04-13 05:45:52.776080', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:45:52.776080', '2018-04-13 05:45:52.776080', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:45:52.776080', '2018-04-13 05:45:52.776080', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:45:52.776080', '2018-04-13 05:45:52.776080', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:45:52.792126', '2018-04-13 05:45:52.792126', 373891647)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:45:52.792126', '2018-04-13 05:45:52.792126', 681446112)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:45:52.792126', '2018-04-13 05:45:52.792126', 315165233)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:45:52.792126', '2018-04-13 05:45:52.792126', 197155733)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:45:52.792126', '2018-04-13 05:45:52.792126', 1019702018)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 05:46:18.968840', '2018-04-13 05:46:18.968840', 206669143)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 05:46:18.968840', '2018-04-13 05:46:18.968840', 358143215)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 05:46:18.968840', '2018-04-13 05:46:18.968840', 576709754)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 05:46:18.968840', '2018-04-13 05:46:18.968840', 1010528733)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 05:46:18.968840', '2018-04-13 05:46:18.968840', 188498254)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 05:46:18.968840', '2018-04-13 05:46:18.968840', 305467638)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 05:46:18.968840', '2018-04-13 05:46:18.968840', 624042081)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 05:46:18.968840', '2018-04-13 05:46:18.968840', 898448884)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 05:46:18.968840', '2018-04-13 05:46:18.968840', 42601833)[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 05:46:18.998184', '2018-04-13 05:46:18.998184', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 05:46:18.998184', '2018-04-13 05:46:18.998184', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:46:18.998184', '2018-04-13 05:46:18.998184', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.7ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:46:18.998184', '2018-04-13 05:46:18.998184', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 05:46:18.998184', '2018-04-13 05:46:18.998184', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 05:46:19.014703', '2018-04-13 05:46:19.014703', 373891647)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 05:46:19.014703', '2018-04-13 05:46:19.014703', 681446112)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 05:46:19.014703', '2018-04-13 05:46:19.014703', 315165233)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 05:46:19.014703', '2018-04-13 05:46:19.014703', 197155733)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 05:46:19.014703', '2018-04-13 05:46:19.014703', 1019702018)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.9ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 21:33:44.860576', '2018-04-13 21:33:44.860576', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 21:33:44.860576', '2018-04-13 21:33:44.860576', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 21:33:44.860576', '2018-04-13 21:33:44.860576', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 21:33:44.860576', '2018-04-13 21:33:44.860576', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 21:33:44.860576', '2018-04-13 21:33:44.860576', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 21:33:44.860576', '2018-04-13 21:33:44.860576', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 21:33:44.860576', '2018-04-13 21:33:44.860576', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 21:33:44.860576', '2018-04-13 21:33:44.860576', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 21:33:44.860576', '2018-04-13 21:33:44.860576', 42601833)[0m
  [1m[36mFixture Delete (3.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 21:33:44.880254', '2018-04-13 21:33:44.880254', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 21:33:44.880254', '2018-04-13 21:33:44.880254', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 21:33:44.880254', '2018-04-13 21:33:44.880254', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 21:33:44.880254', '2018-04-13 21:33:44.880254', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 21:33:44.880254', '2018-04-13 21:33:44.880254', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 21:33:44.896641', '2018-04-13 21:33:44.896641', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 21:33:44.896641', '2018-04-13 21:33:44.896641', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 21:33:44.896641', '2018-04-13 21:33:44.896641', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 21:33:44.896641', '2018-04-13 21:33:44.896641', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 21:33:44.896641', '2018-04-13 21:33:44.896641', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------
UsersController: test_0001_should get index
-------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
UsersController: test_0002_should get show
------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
WorksController: test_0003_should get create
--------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
WorksController: test_0005_should get edit
------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
WorksController: test_0006_should get update
--------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------
WorksController: test_0001_should get index and return a success status for all works
-------------------------------------------------------------------------------------
Started GET "/works" for 127.0.0.1 at 2018-04-13 14:33:45 -0700
Processing by WorksController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  Rendering works/index.html.erb within layouts/application
  [1m[36mWork Load (0.5ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  Rendered works/index.html.erb within layouts/application (26.7ms)
Completed 200 OK in 7437ms (Views: 7426.2ms | ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
WorksController: test_0007_should get destroy
---------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------
WorksController: test_0002_should get new
-----------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
WorksController: test_0004_should get show
------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
SessionsController: test_0002_should get new
--------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------
SessionsController: test_0001_should get create
-----------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
SessionsController: test_0003_should get destroy
------------------------------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------
MainController: test_0001_should get index
------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
VotesController: test_0001_should get create
--------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 21:34:08.185140', '2018-04-13 21:34:08.185140', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 21:34:08.185140', '2018-04-13 21:34:08.185140', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 21:34:08.185140', '2018-04-13 21:34:08.185140', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 21:34:08.185140', '2018-04-13 21:34:08.185140', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 21:34:08.185140', '2018-04-13 21:34:08.185140', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 21:34:08.185140', '2018-04-13 21:34:08.185140', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 21:34:08.185140', '2018-04-13 21:34:08.185140', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 21:34:08.185140', '2018-04-13 21:34:08.185140', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-11', '2018-04-13 21:34:08.185140', '2018-04-13 21:34:08.185140', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 21:34:08.194804', '2018-04-13 21:34:08.194804', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 21:34:08.194804', '2018-04-13 21:34:08.194804', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 21:34:08.194804', '2018-04-13 21:34:08.194804', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 21:34:08.194804', '2018-04-13 21:34:08.194804', 959688446, 1010528733, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 21:34:08.194804', '2018-04-13 21:34:08.194804', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 21:34:08.203491', '2018-04-13 21:34:08.203491', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 21:34:08.203491', '2018-04-13 21:34:08.203491', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 21:34:08.203491', '2018-04-13 21:34:08.203491', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 21:34:08.203491', '2018-04-13 21:34:08.203491', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 21:34:08.203491', '2018-04-13 21:34:08.203491', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (1.6ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username1', '2018-03-11', '2018-04-13 22:53:15.689100', '2018-04-13 22:53:15.689100', 206669143)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username2', '2018-01-14', '2018-04-13 22:53:15.689100', '2018-04-13 22:53:15.689100', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username3', '2018-01-14', '2018-04-13 22:53:15.689100', '2018-04-13 22:53:15.689100', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username4', '2018-02-14', '2018-04-13 22:53:15.689100', '2018-04-13 22:53:15.689100', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username5', '2018-02-08', '2018-04-13 22:53:15.689100', '2018-04-13 22:53:15.689100', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username6', '2018-04-08', '2018-04-13 22:53:15.689100', '2018-04-13 22:53:15.689100', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username7', '2018-01-08', '2018-04-13 22:53:15.689100', '2018-04-13 22:53:15.689100', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 22:53:15.689100', '2018-04-13 22:53:15.689100', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', NULL, '2018-04-13 22:53:15.689100', '2018-04-13 22:53:15.689100', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 22:53:15.706875', '2018-04-13 22:53:15.706875', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 22:53:15.706875', '2018-04-13 22:53:15.706875', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 22:53:15.706875', '2018-04-13 22:53:15.706875', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 22:53:15.706875', '2018-04-13 22:53:15.706875', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 22:53:15.706875', '2018-04-13 22:53:15.706875', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (1.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 22:53:15.715702', '2018-04-13 22:53:15.715702', 373891647)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 22:53:15.715702', '2018-04-13 22:53:15.715702', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 22:53:15.715702', '2018-04-13 22:53:15.715702', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 22:53:15.715702', '2018-04-13 22:53:15.715702', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 22:53:15.715702', '2018-04-13 22:53:15.715702', 1019702018)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::total_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::total_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 22:56:38.830139', '2018-04-13 22:56:38.830139', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 22:56:38.830139', '2018-04-13 22:56:38.830139', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 22:56:38.830139', '2018-04-13 22:56:38.830139', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 22:56:38.830139', '2018-04-13 22:56:38.830139', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 22:56:38.830139', '2018-04-13 22:56:38.830139', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 22:56:38.830139', '2018-04-13 22:56:38.830139', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 22:56:38.830139', '2018-04-13 22:56:38.830139', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 22:56:38.830139', '2018-04-13 22:56:38.830139', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 22:56:38.830139', '2018-04-13 22:56:38.830139', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 22:56:38.841437', '2018-04-13 22:56:38.841437', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 22:56:38.841437', '2018-04-13 22:56:38.841437', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 22:56:38.841437', '2018-04-13 22:56:38.841437', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 22:56:38.841437', '2018-04-13 22:56:38.841437', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 22:56:38.841437', '2018-04-13 22:56:38.841437', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 22:56:38.848205', '2018-04-13 22:56:38.848205', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 22:56:38.848205', '2018-04-13 22:56:38.848205', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 22:56:38.848205', '2018-04-13 22:56:38.848205', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 22:56:38.848205', '2018-04-13 22:56:38.848205', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 22:56:38.848205', '2018-04-13 22:56:38.848205', 1019702018)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::total_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::total_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 22:59:25.643948', '2018-04-13 22:59:25.643948', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 22:59:25.643948', '2018-04-13 22:59:25.643948', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 22:59:25.643948', '2018-04-13 22:59:25.643948', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 22:59:25.643948', '2018-04-13 22:59:25.643948', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 22:59:25.643948', '2018-04-13 22:59:25.643948', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 22:59:25.643948', '2018-04-13 22:59:25.643948', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 22:59:25.643948', '2018-04-13 22:59:25.643948', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 22:59:25.643948', '2018-04-13 22:59:25.643948', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 22:59:25.643948', '2018-04-13 22:59:25.643948', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 22:59:25.654404', '2018-04-13 22:59:25.654404', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 22:59:25.654404', '2018-04-13 22:59:25.654404', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 22:59:25.654404', '2018-04-13 22:59:25.654404', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 22:59:25.654404', '2018-04-13 22:59:25.654404', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 22:59:25.654404', '2018-04-13 22:59:25.654404', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 22:59:25.660565', '2018-04-13 22:59:25.660565', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 22:59:25.660565', '2018-04-13 22:59:25.660565', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 22:59:25.660565', '2018-04-13 22:59:25.660565', 315165233)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 22:59:25.660565', '2018-04-13 22:59:25.660565', 197155733)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 22:59:25.660565', '2018-04-13 22:59:25.660565', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::total_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::total_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:01:06.405190', '2018-04-13 23:01:06.405190', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:01:06.405190', '2018-04-13 23:01:06.405190', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:01:06.405190', '2018-04-13 23:01:06.405190', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:01:06.405190', '2018-04-13 23:01:06.405190', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:01:06.405190', '2018-04-13 23:01:06.405190', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:01:06.405190', '2018-04-13 23:01:06.405190', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:01:06.405190', '2018-04-13 23:01:06.405190', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:01:06.405190', '2018-04-13 23:01:06.405190', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:01:06.405190', '2018-04-13 23:01:06.405190', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:01:06.416156', '2018-04-13 23:01:06.416156', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:01:06.416156', '2018-04-13 23:01:06.416156', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:01:06.416156', '2018-04-13 23:01:06.416156', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:01:06.416156', '2018-04-13 23:01:06.416156', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:01:06.416156', '2018-04-13 23:01:06.416156', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:01:06.423092', '2018-04-13 23:01:06.423092', 373891647)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:01:06.423092', '2018-04-13 23:01:06.423092', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:01:06.423092', '2018-04-13 23:01:06.423092', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:01:06.423092', '2018-04-13 23:01:06.423092', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:01:06.423092', '2018-04-13 23:01:06.423092', 1019702018)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:01:33.666089', '2018-04-13 23:01:33.666089', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:01:33.666089', '2018-04-13 23:01:33.666089', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:01:33.666089', '2018-04-13 23:01:33.666089', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:01:33.666089', '2018-04-13 23:01:33.666089', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:01:33.666089', '2018-04-13 23:01:33.666089', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:01:33.666089', '2018-04-13 23:01:33.666089', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:01:33.666089', '2018-04-13 23:01:33.666089', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:01:33.666089', '2018-04-13 23:01:33.666089', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:01:33.666089', '2018-04-13 23:01:33.666089', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:01:33.676700', '2018-04-13 23:01:33.676700', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:01:33.676700', '2018-04-13 23:01:33.676700', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:01:33.676700', '2018-04-13 23:01:33.676700', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:01:33.676700', '2018-04-13 23:01:33.676700', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:01:33.676700', '2018-04-13 23:01:33.676700', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:01:33.683267', '2018-04-13 23:01:33.683267', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:01:33.683267', '2018-04-13 23:01:33.683267', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:01:33.683267', '2018-04-13 23:01:33.683267', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:01:33.683267', '2018-04-13 23:01:33.683267', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:01:33.683267', '2018-04-13 23:01:33.683267', 1019702018)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:27:58.276710', '2018-04-13 23:27:58.276710', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:27:58.276710', '2018-04-13 23:27:58.276710', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:27:58.276710', '2018-04-13 23:27:58.276710', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:27:58.276710', '2018-04-13 23:27:58.276710', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:27:58.276710', '2018-04-13 23:27:58.276710', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:27:58.276710', '2018-04-13 23:27:58.276710', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:27:58.276710', '2018-04-13 23:27:58.276710', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:27:58.276710', '2018-04-13 23:27:58.276710', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:27:58.276710', '2018-04-13 23:27:58.276710', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:27:58.287945', '2018-04-13 23:27:58.287945', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:27:58.287945', '2018-04-13 23:27:58.287945', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:27:58.287945', '2018-04-13 23:27:58.287945', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:27:58.287945', '2018-04-13 23:27:58.287945', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:27:58.287945', '2018-04-13 23:27:58.287945', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:27:58.295427', '2018-04-13 23:27:58.295427', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:27:58.295427', '2018-04-13 23:27:58.295427', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:27:58.295427', '2018-04-13 23:27:58.295427', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:27:58.295427', '2018-04-13 23:27:58.295427', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:27:58.295427', '2018-04-13 23:27:58.295427', 1019702018)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:28:56.784770', '2018-04-13 23:28:56.784770', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:28:56.784770', '2018-04-13 23:28:56.784770', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:28:56.784770', '2018-04-13 23:28:56.784770', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:28:56.784770', '2018-04-13 23:28:56.784770', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:28:56.784770', '2018-04-13 23:28:56.784770', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:28:56.784770', '2018-04-13 23:28:56.784770', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:28:56.784770', '2018-04-13 23:28:56.784770', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:28:56.784770', '2018-04-13 23:28:56.784770', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:28:56.784770', '2018-04-13 23:28:56.784770', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:28:56.794724', '2018-04-13 23:28:56.794724', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:28:56.794724', '2018-04-13 23:28:56.794724', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:28:56.794724', '2018-04-13 23:28:56.794724', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:28:56.794724', '2018-04-13 23:28:56.794724', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:28:56.794724', '2018-04-13 23:28:56.794724', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:28:56.801117', '2018-04-13 23:28:56.801117', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:28:56.801117', '2018-04-13 23:28:56.801117', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:28:56.801117', '2018-04-13 23:28:56.801117', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:28:56.801117', '2018-04-13 23:28:56.801117', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:28:56.801117', '2018-04-13 23:28:56.801117', 1019702018)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:31:30.553147', '2018-04-13 23:31:30.553147', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:31:30.553147', '2018-04-13 23:31:30.553147', 358143215)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:31:30.553147', '2018-04-13 23:31:30.553147', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:31:30.553147', '2018-04-13 23:31:30.553147', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:31:30.553147', '2018-04-13 23:31:30.553147', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:31:30.553147', '2018-04-13 23:31:30.553147', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:31:30.553147', '2018-04-13 23:31:30.553147', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:31:30.553147', '2018-04-13 23:31:30.553147', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:31:30.553147', '2018-04-13 23:31:30.553147', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:31:30.564476', '2018-04-13 23:31:30.564476', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:31:30.564476', '2018-04-13 23:31:30.564476', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:31:30.564476', '2018-04-13 23:31:30.564476', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:31:30.564476', '2018-04-13 23:31:30.564476', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:31:30.564476', '2018-04-13 23:31:30.564476', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:31:30.571583', '2018-04-13 23:31:30.571583', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:31:30.571583', '2018-04-13 23:31:30.571583', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:31:30.571583', '2018-04-13 23:31:30.571583', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:31:30.571583', '2018-04-13 23:31:30.571583', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:31:30.571583', '2018-04-13 23:31:30.571583', 1019702018)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:38:03.700907', '2018-04-13 23:38:03.700907', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:38:03.700907', '2018-04-13 23:38:03.700907', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:38:03.700907', '2018-04-13 23:38:03.700907', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:38:03.700907', '2018-04-13 23:38:03.700907', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:38:03.700907', '2018-04-13 23:38:03.700907', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:38:03.700907', '2018-04-13 23:38:03.700907', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:38:03.700907', '2018-04-13 23:38:03.700907', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:38:03.700907', '2018-04-13 23:38:03.700907', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:38:03.700907', '2018-04-13 23:38:03.700907', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:38:03.710263', '2018-04-13 23:38:03.710263', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:38:03.710263', '2018-04-13 23:38:03.710263', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:38:03.710263', '2018-04-13 23:38:03.710263', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:38:03.710263', '2018-04-13 23:38:03.710263', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:38:03.710263', '2018-04-13 23:38:03.710263', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:38:03.717811', '2018-04-13 23:38:03.717811', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:38:03.717811', '2018-04-13 23:38:03.717811', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:38:03.717811', '2018-04-13 23:38:03.717811', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:38:03.717811', '2018-04-13 23:38:03.717811', 197155733)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:38:03.717811', '2018-04-13 23:38:03.717811', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:40:22.947539', '2018-04-13 23:40:22.947539', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:40:22.947539', '2018-04-13 23:40:22.947539', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:40:22.947539', '2018-04-13 23:40:22.947539', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:40:22.947539', '2018-04-13 23:40:22.947539', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:40:22.947539', '2018-04-13 23:40:22.947539', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:40:22.947539', '2018-04-13 23:40:22.947539', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:40:22.947539', '2018-04-13 23:40:22.947539', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:40:22.947539', '2018-04-13 23:40:22.947539', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:40:22.947539', '2018-04-13 23:40:22.947539', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:40:22.957375', '2018-04-13 23:40:22.957375', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:40:22.957375', '2018-04-13 23:40:22.957375', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:40:22.957375', '2018-04-13 23:40:22.957375', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:40:22.957375', '2018-04-13 23:40:22.957375', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:40:22.957375', '2018-04-13 23:40:22.957375', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:40:22.963951', '2018-04-13 23:40:22.963951', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:40:22.963951', '2018-04-13 23:40:22.963951', 681446112)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:40:22.963951', '2018-04-13 23:40:22.963951', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:40:22.963951', '2018-04-13 23:40:22.963951', 197155733)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:40:22.963951', '2018-04-13 23:40:22.963951', 1019702018)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:44:12.036229', '2018-04-13 23:44:12.036229', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:44:12.036229', '2018-04-13 23:44:12.036229', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:44:12.036229', '2018-04-13 23:44:12.036229', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:44:12.036229', '2018-04-13 23:44:12.036229', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:44:12.036229', '2018-04-13 23:44:12.036229', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:44:12.036229', '2018-04-13 23:44:12.036229', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:44:12.036229', '2018-04-13 23:44:12.036229', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:44:12.036229', '2018-04-13 23:44:12.036229', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:44:12.036229', '2018-04-13 23:44:12.036229', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:44:12.046238', '2018-04-13 23:44:12.046238', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:44:12.046238', '2018-04-13 23:44:12.046238', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:44:12.046238', '2018-04-13 23:44:12.046238', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:44:12.046238', '2018-04-13 23:44:12.046238', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:44:12.046238', '2018-04-13 23:44:12.046238', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:44:12.054879', '2018-04-13 23:44:12.054879', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:44:12.054879', '2018-04-13 23:44:12.054879', 681446112)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:44:12.054879', '2018-04-13 23:44:12.054879', 315165233)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:44:12.054879', '2018-04-13 23:44:12.054879', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:44:12.054879', '2018-04-13 23:44:12.054879', 1019702018)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:45:33.788703', '2018-04-13 23:45:33.788703', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:45:33.788703', '2018-04-13 23:45:33.788703', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:45:33.788703', '2018-04-13 23:45:33.788703', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:45:33.788703', '2018-04-13 23:45:33.788703', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:45:33.788703', '2018-04-13 23:45:33.788703', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:45:33.788703', '2018-04-13 23:45:33.788703', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:45:33.788703', '2018-04-13 23:45:33.788703', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:45:33.788703', '2018-04-13 23:45:33.788703', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:45:33.788703', '2018-04-13 23:45:33.788703', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:45:33.799244', '2018-04-13 23:45:33.799244', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:45:33.799244', '2018-04-13 23:45:33.799244', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:45:33.799244', '2018-04-13 23:45:33.799244', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:45:33.799244', '2018-04-13 23:45:33.799244', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:45:33.799244', '2018-04-13 23:45:33.799244', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:45:33.806462', '2018-04-13 23:45:33.806462', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:45:33.806462', '2018-04-13 23:45:33.806462', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:45:33.806462', '2018-04-13 23:45:33.806462', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:45:33.806462', '2018-04-13 23:45:33.806462', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:45:33.806462', '2018-04-13 23:45:33.806462', 1019702018)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (1.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:53:51.846444', '2018-04-13 23:53:51.846444', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:53:51.846444', '2018-04-13 23:53:51.846444', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:53:51.846444', '2018-04-13 23:53:51.846444', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:53:51.846444', '2018-04-13 23:53:51.846444', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:53:51.846444', '2018-04-13 23:53:51.846444', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:53:51.846444', '2018-04-13 23:53:51.846444', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:53:51.846444', '2018-04-13 23:53:51.846444', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:53:51.846444', '2018-04-13 23:53:51.846444', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:53:51.846444', '2018-04-13 23:53:51.846444', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:53:51.856699', '2018-04-13 23:53:51.856699', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:53:51.856699', '2018-04-13 23:53:51.856699', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:53:51.856699', '2018-04-13 23:53:51.856699', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:53:51.856699', '2018-04-13 23:53:51.856699', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (1.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:53:51.856699', '2018-04-13 23:53:51.856699', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:53:51.867172', '2018-04-13 23:53:51.867172', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:53:51.867172', '2018-04-13 23:53:51.867172', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:53:51.867172', '2018-04-13 23:53:51.867172', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:53:51.867172', '2018-04-13 23:53:51.867172', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:53:51.867172', '2018-04-13 23:53:51.867172', 1019702018)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 156850806]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:55:19.726506', '2018-04-13 23:55:19.726506', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:55:19.726506', '2018-04-13 23:55:19.726506', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:55:19.726506', '2018-04-13 23:55:19.726506', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:55:19.726506', '2018-04-13 23:55:19.726506', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:55:19.726506', '2018-04-13 23:55:19.726506', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:55:19.726506', '2018-04-13 23:55:19.726506', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:55:19.726506', '2018-04-13 23:55:19.726506', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:55:19.726506', '2018-04-13 23:55:19.726506', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:55:19.726506', '2018-04-13 23:55:19.726506', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:55:19.735433', '2018-04-13 23:55:19.735433', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:55:19.735433', '2018-04-13 23:55:19.735433', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:55:19.735433', '2018-04-13 23:55:19.735433', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:55:19.735433', '2018-04-13 23:55:19.735433', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:55:19.735433', '2018-04-13 23:55:19.735433', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:55:19.743089', '2018-04-13 23:55:19.743089', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:55:19.743089', '2018-04-13 23:55:19.743089', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:55:19.743089', '2018-04-13 23:55:19.743089', 315165233)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:55:19.743089', '2018-04-13 23:55:19.743089', 197155733)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:55:19.743089', '2018-04-13 23:55:19.743089', 1019702018)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 156850806]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:56:18.601337', '2018-04-13 23:56:18.601337', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:56:18.601337', '2018-04-13 23:56:18.601337', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:56:18.601337', '2018-04-13 23:56:18.601337', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:56:18.601337', '2018-04-13 23:56:18.601337', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:56:18.601337', '2018-04-13 23:56:18.601337', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:56:18.601337', '2018-04-13 23:56:18.601337', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:56:18.601337', '2018-04-13 23:56:18.601337', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:56:18.601337', '2018-04-13 23:56:18.601337', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:56:18.601337', '2018-04-13 23:56:18.601337', 42601833)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:56:18.609646', '2018-04-13 23:56:18.609646', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:56:18.609646', '2018-04-13 23:56:18.609646', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:56:18.609646', '2018-04-13 23:56:18.609646', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:56:18.609646', '2018-04-13 23:56:18.609646', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:56:18.609646', '2018-04-13 23:56:18.609646', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:56:18.618040', '2018-04-13 23:56:18.618040', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:56:18.618040', '2018-04-13 23:56:18.618040', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:56:18.618040', '2018-04-13 23:56:18.618040', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:56:18.618040', '2018-04-13 23:56:18.618040', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:56:18.618040', '2018-04-13 23:56:18.618040', 1019702018)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 156850806]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:58:23.018881', '2018-04-13 23:58:23.018881', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:58:23.018881', '2018-04-13 23:58:23.018881', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:58:23.018881', '2018-04-13 23:58:23.018881', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:58:23.018881', '2018-04-13 23:58:23.018881', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:58:23.018881', '2018-04-13 23:58:23.018881', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:58:23.018881', '2018-04-13 23:58:23.018881', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:58:23.018881', '2018-04-13 23:58:23.018881', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:58:23.018881', '2018-04-13 23:58:23.018881', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:58:23.018881', '2018-04-13 23:58:23.018881', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:58:23.028631', '2018-04-13 23:58:23.028631', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:58:23.028631', '2018-04-13 23:58:23.028631', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:58:23.028631', '2018-04-13 23:58:23.028631', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:58:23.028631', '2018-04-13 23:58:23.028631', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:58:23.028631', '2018-04-13 23:58:23.028631', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:58:23.035202', '2018-04-13 23:58:23.035202', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:58:23.035202', '2018-04-13 23:58:23.035202', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:58:23.035202', '2018-04-13 23:58:23.035202', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:58:23.035202', '2018-04-13 23:58:23.035202', 197155733)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:58:23.035202', '2018-04-13 23:58:23.035202', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 156850806]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-13 23:58:56.253012', '2018-04-13 23:58:56.253012', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-13 23:58:56.253012', '2018-04-13 23:58:56.253012', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-13 23:58:56.253012', '2018-04-13 23:58:56.253012', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-13 23:58:56.253012', '2018-04-13 23:58:56.253012', 1010528733)[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-13 23:58:56.253012', '2018-04-13 23:58:56.253012', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-13 23:58:56.253012', '2018-04-13 23:58:56.253012', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-13 23:58:56.253012', '2018-04-13 23:58:56.253012', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-13 23:58:56.253012', '2018-04-13 23:58:56.253012', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-13 23:58:56.253012', '2018-04-13 23:58:56.253012', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-13 23:58:56.271929', '2018-04-13 23:58:56.271929', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-13 23:58:56.271929', '2018-04-13 23:58:56.271929', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:58:56.271929', '2018-04-13 23:58:56.271929', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:58:56.271929', '2018-04-13 23:58:56.271929', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-13 23:58:56.271929', '2018-04-13 23:58:56.271929', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-13 23:58:56.280578', '2018-04-13 23:58:56.280578', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-13 23:58:56.280578', '2018-04-13 23:58:56.280578', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-13 23:58:56.280578', '2018-04-13 23:58:56.280578', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-13 23:58:56.280578', '2018-04-13 23:58:56.280578', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-13 23:58:56.280578', '2018-04-13 23:58:56.280578', 1019702018)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 156850806]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 00:02:14.916396', '2018-04-14 00:02:14.916396', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 00:02:14.916396', '2018-04-14 00:02:14.916396', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 00:02:14.916396', '2018-04-14 00:02:14.916396', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 00:02:14.916396', '2018-04-14 00:02:14.916396', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 00:02:14.916396', '2018-04-14 00:02:14.916396', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 00:02:14.916396', '2018-04-14 00:02:14.916396', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 00:02:14.916396', '2018-04-14 00:02:14.916396', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 00:02:14.916396', '2018-04-14 00:02:14.916396', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 00:02:14.916396', '2018-04-14 00:02:14.916396', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 00:02:14.926428', '2018-04-14 00:02:14.926428', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 00:02:14.926428', '2018-04-14 00:02:14.926428', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 00:02:14.926428', '2018-04-14 00:02:14.926428', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 00:02:14.926428', '2018-04-14 00:02:14.926428', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 00:02:14.926428', '2018-04-14 00:02:14.926428', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-14 00:02:14.934225', '2018-04-14 00:02:14.934225', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-14 00:02:14.934225', '2018-04-14 00:02:14.934225', 681446112)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-14 00:02:14.934225', '2018-04-14 00:02:14.934225', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-14 00:02:14.934225', '2018-04-14 00:02:14.934225', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-14 00:02:14.934225', '2018-04-14 00:02:14.934225', 1019702018)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 156850806]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 01:45:21.824748', '2018-04-14 01:45:21.824748', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 01:45:21.824748', '2018-04-14 01:45:21.824748', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 01:45:21.824748', '2018-04-14 01:45:21.824748', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 01:45:21.824748', '2018-04-14 01:45:21.824748', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 01:45:21.824748', '2018-04-14 01:45:21.824748', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 01:45:21.824748', '2018-04-14 01:45:21.824748', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 01:45:21.824748', '2018-04-14 01:45:21.824748', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 01:45:21.824748', '2018-04-14 01:45:21.824748', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 01:45:21.824748', '2018-04-14 01:45:21.824748', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 01:45:21.835440', '2018-04-14 01:45:21.835440', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 01:45:21.835440', '2018-04-14 01:45:21.835440', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 01:45:21.835440', '2018-04-14 01:45:21.835440', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 01:45:21.835440', '2018-04-14 01:45:21.835440', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 01:45:21.835440', '2018-04-14 01:45:21.835440', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-14 01:45:21.842694', '2018-04-14 01:45:21.842694', 373891647)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-14 01:45:21.842694', '2018-04-14 01:45:21.842694', 681446112)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-14 01:45:21.842694', '2018-04-14 01:45:21.842694', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-14 01:45:21.842694', '2018-04-14 01:45:21.842694', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-14 01:45:21.842694', '2018-04-14 01:45:21.842694', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 156850806]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 02:23:56.756462', '2018-04-14 02:23:56.756462', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 02:23:56.756462', '2018-04-14 02:23:56.756462', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 02:23:56.756462', '2018-04-14 02:23:56.756462', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 02:23:56.756462', '2018-04-14 02:23:56.756462', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 02:23:56.756462', '2018-04-14 02:23:56.756462', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 02:23:56.756462', '2018-04-14 02:23:56.756462', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 02:23:56.756462', '2018-04-14 02:23:56.756462', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 02:23:56.756462', '2018-04-14 02:23:56.756462', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 02:23:56.756462', '2018-04-14 02:23:56.756462', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 02:23:56.767333', '2018-04-14 02:23:56.767333', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 02:23:56.767333', '2018-04-14 02:23:56.767333', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:23:56.767333', '2018-04-14 02:23:56.767333', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:23:56.767333', '2018-04-14 02:23:56.767333', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:23:56.767333', '2018-04-14 02:23:56.767333', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-14 02:23:56.774304', '2018-04-14 02:23:56.774304', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-14 02:23:56.774304', '2018-04-14 02:23:56.774304', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-14 02:23:56.774304', '2018-04-14 02:23:56.774304', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-14 02:23:56.774304', '2018-04-14 02:23:56.774304', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-14 02:23:56.774304', '2018-04-14 02:23:56.774304', 1019702018)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 156850806]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "liquidspirit"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 02:25:18.663244', '2018-04-14 02:25:18.663244', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 02:25:18.663244', '2018-04-14 02:25:18.663244', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 02:25:18.663244', '2018-04-14 02:25:18.663244', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 02:25:18.663244', '2018-04-14 02:25:18.663244', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 02:25:18.663244', '2018-04-14 02:25:18.663244', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 02:25:18.663244', '2018-04-14 02:25:18.663244', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 02:25:18.663244', '2018-04-14 02:25:18.663244', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 02:25:18.663244', '2018-04-14 02:25:18.663244', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 02:25:18.663244', '2018-04-14 02:25:18.663244', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 02:25:18.673163', '2018-04-14 02:25:18.673163', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 02:25:18.673163', '2018-04-14 02:25:18.673163', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:25:18.673163', '2018-04-14 02:25:18.673163', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:25:18.673163', '2018-04-14 02:25:18.673163', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:25:18.673163', '2018-04-14 02:25:18.673163', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-14 02:25:18.679821', '2018-04-14 02:25:18.679821', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-14 02:25:18.679821', '2018-04-14 02:25:18.679821', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-14 02:25:18.679821', '2018-04-14 02:25:18.679821', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-14 02:25:18.679821', '2018-04-14 02:25:18.679821', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-14 02:25:18.679821', '2018-04-14 02:25:18.679821', 1019702018)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 156850806]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "liquidspirit"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 02:26:35.261458', '2018-04-14 02:26:35.261458', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 02:26:35.261458', '2018-04-14 02:26:35.261458', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 02:26:35.261458', '2018-04-14 02:26:35.261458', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 02:26:35.261458', '2018-04-14 02:26:35.261458', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 02:26:35.261458', '2018-04-14 02:26:35.261458', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 02:26:35.261458', '2018-04-14 02:26:35.261458', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 02:26:35.261458', '2018-04-14 02:26:35.261458', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 02:26:35.261458', '2018-04-14 02:26:35.261458', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 02:26:35.261458', '2018-04-14 02:26:35.261458', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 02:26:35.272399', '2018-04-14 02:26:35.272399', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 02:26:35.272399', '2018-04-14 02:26:35.272399', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:26:35.272399', '2018-04-14 02:26:35.272399', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:26:35.272399', '2018-04-14 02:26:35.272399', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:26:35.272399', '2018-04-14 02:26:35.272399', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-14 02:26:35.279659', '2018-04-14 02:26:35.279659', 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-14 02:26:35.279659', '2018-04-14 02:26:35.279659', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-14 02:26:35.279659', '2018-04-14 02:26:35.279659', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-14 02:26:35.279659', '2018-04-14 02:26:35.279659', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-14 02:26:35.279659', '2018-04-14 02:26:35.279659', 1019702018)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------
Work: test_0001_must be valid
-----------------------------
  [1m[36mWork Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "liquidspirit"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------
Work: test_0002_reqiures a title
--------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------
Work: test_0003_requires a category
-----------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 156850806]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 02:35:57.579167', '2018-04-14 02:35:57.579167', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 02:35:57.579167', '2018-04-14 02:35:57.579167', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 02:35:57.579167', '2018-04-14 02:35:57.579167', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 02:35:57.579167', '2018-04-14 02:35:57.579167', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 02:35:57.579167', '2018-04-14 02:35:57.579167', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 02:35:57.579167', '2018-04-14 02:35:57.579167', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 02:35:57.579167', '2018-04-14 02:35:57.579167', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 02:35:57.579167', '2018-04-14 02:35:57.579167', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 02:35:57.579167', '2018-04-14 02:35:57.579167', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 02:35:57.590612', '2018-04-14 02:35:57.590612', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 02:35:57.590612', '2018-04-14 02:35:57.590612', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:35:57.590612', '2018-04-14 02:35:57.590612', 660028255, 624042081, 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:35:57.590612', '2018-04-14 02:35:57.590612', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:35:57.590612', '2018-04-14 02:35:57.590612', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-14 02:35:57.597854', '2018-04-14 02:35:57.597854', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-14 02:35:57.597854', '2018-04-14 02:35:57.597854', 681446112)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-14 02:35:57.597854', '2018-04-14 02:35:57.597854', 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-14 02:35:57.597854', '2018-04-14 02:35:57.597854', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-14 02:35:57.597854', '2018-04-14 02:35:57.597854', 1019702018)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 156850806]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
Work::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
Work::Relations: test_0002_can destroy votes when destroy work
--------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------
Work::Validations: test_0004_is invalid if a work with same title and category already exists
---------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book1"], ["category", "book"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "book1"], ["id", 315165233], ["category", "book"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::Validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND ("works"."id" != $1) AND "works"."category" = $2 LIMIT $3[0m  [["id", 315165233], ["category", "book"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
Work::Validations: test_0003_is invalid if title is a string with only spaces
-----------------------------------------------------------------------------
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "     "], ["id", 315165233], ["category", "book"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
Work::Validations: test_0005_is invalid if title is a string with only spaces
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 02:37:51.995702', '2018-04-14 02:37:51.995702', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 02:37:51.995702', '2018-04-14 02:37:51.995702', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 02:37:51.995702', '2018-04-14 02:37:51.995702', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 02:37:51.995702', '2018-04-14 02:37:51.995702', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 02:37:51.995702', '2018-04-14 02:37:51.995702', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 02:37:51.995702', '2018-04-14 02:37:51.995702', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 02:37:51.995702', '2018-04-14 02:37:51.995702', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 02:37:51.995702', '2018-04-14 02:37:51.995702', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 02:37:51.995702', '2018-04-14 02:37:51.995702', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 02:37:52.006073', '2018-04-14 02:37:52.006073', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 02:37:52.006073', '2018-04-14 02:37:52.006073', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:37:52.006073', '2018-04-14 02:37:52.006073', 660028255, 624042081, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:37:52.006073', '2018-04-14 02:37:52.006073', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:37:52.006073', '2018-04-14 02:37:52.006073', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-14 02:37:52.012472', '2018-04-14 02:37:52.012472', 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-14 02:37:52.012472', '2018-04-14 02:37:52.012472', 681446112)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-14 02:37:52.012472', '2018-04-14 02:37:52.012472', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-14 02:37:52.012472', '2018-04-14 02:37:52.012472', 197155733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-14 02:37:52.012472', '2018-04-14 02:37:52.012472', 1019702018)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
Work::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
Work::Relations: test_0002_can destroy votes when destroy work
--------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 660028255]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 959688446]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 315165233]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 156850806]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "book1"], ["id", 315165233], ["category", "book"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
Work::Validations: test_0003_is invalid if title is a string with only spaces
-----------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "     "], ["id", 315165233], ["category", "book"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------
Work::Validations: test_0004_is invalid if a work with same title and category already exists
---------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book1"], ["category", "book"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::Validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND ("works"."id" != $1) AND "works"."category" = $2 LIMIT $3[0m  [["id", 315165233], ["category", "book"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
Work::Validations: test_0005_is invalid if title is a string with only spaces
-----------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 02:38:21.148631', '2018-04-14 02:38:21.148631', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 02:38:21.148631', '2018-04-14 02:38:21.148631', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 02:38:21.148631', '2018-04-14 02:38:21.148631', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 02:38:21.148631', '2018-04-14 02:38:21.148631', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 02:38:21.148631', '2018-04-14 02:38:21.148631', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 02:38:21.148631', '2018-04-14 02:38:21.148631', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 02:38:21.148631', '2018-04-14 02:38:21.148631', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 02:38:21.148631', '2018-04-14 02:38:21.148631', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 02:38:21.148631', '2018-04-14 02:38:21.148631', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 02:38:21.159251', '2018-04-14 02:38:21.159251', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 02:38:21.159251', '2018-04-14 02:38:21.159251', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:38:21.159251', '2018-04-14 02:38:21.159251', 660028255, 624042081, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:38:21.159251', '2018-04-14 02:38:21.159251', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 02:38:21.159251', '2018-04-14 02:38:21.159251', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'lifeisbeautiful', 'aruna', '2013', 'Great book', '2018-04-14 02:38:21.165818', '2018-04-14 02:38:21.165818', 373891647)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at", "id") VALUES ('album', 'liquidspirit', 'brenda', '2014', 'good book', '2018-04-14 02:38:21.165818', '2018-04-14 02:38:21.165818', 681446112)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book1', 'author', '1960', '2018-04-14 02:38:21.165818', '2018-04-14 02:38:21.165818', 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book2', 'author', '1960', '2018-04-14 02:38:21.165818', '2018-04-14 02:38:21.165818', 197155733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-14 02:38:21.165818', '2018-04-14 02:38:21.165818', 1019702018)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 156850806]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
Work::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
Work::Relations: test_0002_can destroy votes when destroy work
--------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 660028255]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 959688446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 315165233]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------
Work::Validations: test_0004_is invalid if a work with same title and category already exists
---------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book1"], ["category", "book"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
Work::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "book1"], ["id", 315165233], ["category", "book"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
Work::Validations: test_0005_is invalid if title is a string with only spaces
-----------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "     "], ["id", 315165233], ["category", "book"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------
Work::Validations: test_0002_is invalid without a title
-------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND ("works"."id" != $1) AND "works"."category" = $2 LIMIT $3[0m  [["id", 315165233], ["category", "book"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------
Work::Validations: test_0003_is invalid if title is a string with only spaces
-----------------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 315165233], ["LIMIT", 1]]
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "     "], ["id", 315165233], ["category", "book"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:03:52.044293', '2018-04-14 03:03:52.044293', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:03:52.044293', '2018-04-14 03:03:52.044293', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:03:52.044293', '2018-04-14 03:03:52.044293', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:03:52.044293', '2018-04-14 03:03:52.044293', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:03:52.044293', '2018-04-14 03:03:52.044293', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:03:52.044293', '2018-04-14 03:03:52.044293', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:03:52.044293', '2018-04-14 03:03:52.044293', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:03:52.044293', '2018-04-14 03:03:52.044293', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:03:52.044293', '2018-04-14 03:03:52.044293', 42601833)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:03:52.054993', '2018-04-14 03:03:52.054993', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:03:52.054993', '2018-04-14 03:03:52.054993', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:03:52.069095', '2018-04-14 03:03:52.069095', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:03:52.069095', '2018-04-14 03:03:52.069095', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:03:52.069095', '2018-04-14 03:03:52.069095', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:03:52.069095', '2018-04-14 03:03:52.069095', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:03:52.069095', '2018-04-14 03:03:52.069095', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:03:52.069095', '2018-04-14 03:03:52.069095', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:03:52.069095', '2018-04-14 03:03:52.069095', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:03:52.069095', '2018-04-14 03:03:52.069095', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:03:52.069095', '2018-04-14 03:03:52.069095', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:03:52.074198', '2018-04-14 03:03:52.074198', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:03:52.074198', '2018-04-14 03:03:52.074198', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:03:52.080306', '2018-04-14 03:03:52.080306', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:03:52.080306', '2018-04-14 03:03:52.080306', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:03:52.080306', '2018-04-14 03:03:52.080306', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:03:52.080306', '2018-04-14 03:03:52.080306', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:03:52.080306', '2018-04-14 03:03:52.080306', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:03:52.080306', '2018-04-14 03:03:52.080306', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:03:52.080306', '2018-04-14 03:03:52.080306', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:03:52.080306', '2018-04-14 03:03:52.080306', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:03:52.080306', '2018-04-14 03:03:52.080306', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:03:52.085814', '2018-04-14 03:03:52.085814', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:03:52.085814', '2018-04-14 03:03:52.085814', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:03:52.093581', '2018-04-14 03:03:52.093581', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:03:52.093581', '2018-04-14 03:03:52.093581', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:03:52.093581', '2018-04-14 03:03:52.093581', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:03:52.093581', '2018-04-14 03:03:52.093581', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:03:52.093581', '2018-04-14 03:03:52.093581', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:03:52.093581', '2018-04-14 03:03:52.093581', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:03:52.093581', '2018-04-14 03:03:52.093581', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:03:52.093581', '2018-04-14 03:03:52.093581', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:03:52.093581', '2018-04-14 03:03:52.093581', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:03:52.098439', '2018-04-14 03:03:52.098439', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:03:52.098439', '2018-04-14 03:03:52.098439', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:03:52.105136', '2018-04-14 03:03:52.105136', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:03:52.105136', '2018-04-14 03:03:52.105136', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:03:52.105136', '2018-04-14 03:03:52.105136', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:03:52.105136', '2018-04-14 03:03:52.105136', 1010528733)[0m
  [1m[36mFixture Insert (1.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:03:52.105136', '2018-04-14 03:03:52.105136', 188498254)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:03:52.105136', '2018-04-14 03:03:52.105136', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:03:52.105136', '2018-04-14 03:03:52.105136', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:03:52.105136', '2018-04-14 03:03:52.105136', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:03:52.105136', '2018-04-14 03:03:52.105136', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:03:52.112034', '2018-04-14 03:03:52.112034', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:03:52.112034', '2018-04-14 03:03:52.112034', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:03:52.184868', '2018-04-14 03:03:52.184868', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:03:52.184868', '2018-04-14 03:03:52.184868', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:03:52.184868', '2018-04-14 03:03:52.184868', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:03:52.184868', '2018-04-14 03:03:52.184868', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:03:52.184868', '2018-04-14 03:03:52.184868', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:03:52.184868', '2018-04-14 03:03:52.184868', 305467638)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:03:52.184868', '2018-04-14 03:03:52.184868', 624042081)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:03:52.184868', '2018-04-14 03:03:52.184868', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:03:52.184868', '2018-04-14 03:03:52.184868', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:03:52.200743', '2018-04-14 03:03:52.200743', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:03:52.200743', '2018-04-14 03:03:52.200743', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:03:52.209276', '2018-04-14 03:03:52.209276', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:03:52.209276', '2018-04-14 03:03:52.209276', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:03:52.209276', '2018-04-14 03:03:52.209276', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:03:52.209276', '2018-04-14 03:03:52.209276', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:03:52.209276', '2018-04-14 03:03:52.209276', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:03:52.209276', '2018-04-14 03:03:52.209276', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:03:52.209276', '2018-04-14 03:03:52.209276', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:03:52.209276', '2018-04-14 03:03:52.209276', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:03:52.209276', '2018-04-14 03:03:52.209276', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:03:52.214344', '2018-04-14 03:03:52.214344', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:03:52.214344', '2018-04-14 03:03:52.214344', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:03:52.260026', '2018-04-14 03:03:52.260026', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:03:52.260026', '2018-04-14 03:03:52.260026', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:03:52.260026', '2018-04-14 03:03:52.260026', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:03:52.260026', '2018-04-14 03:03:52.260026', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:03:52.260026', '2018-04-14 03:03:52.260026', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:03:52.260026', '2018-04-14 03:03:52.260026', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:03:52.260026', '2018-04-14 03:03:52.260026', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:03:52.260026', '2018-04-14 03:03:52.260026', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:03:52.260026', '2018-04-14 03:03:52.260026', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:03:52.265479', '2018-04-14 03:03:52.265479', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:03:52.265479', '2018-04-14 03:03:52.265479', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:03:52.272236', '2018-04-14 03:03:52.272236', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:03:52.272236', '2018-04-14 03:03:52.272236', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:03:52.272236', '2018-04-14 03:03:52.272236', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:03:52.272236', '2018-04-14 03:03:52.272236', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:03:52.272236', '2018-04-14 03:03:52.272236', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:03:52.272236', '2018-04-14 03:03:52.272236', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:03:52.272236', '2018-04-14 03:03:52.272236', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:03:52.272236', '2018-04-14 03:03:52.272236', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:03:52.272236', '2018-04-14 03:03:52.272236', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:03:52.276995', '2018-04-14 03:03:52.276995', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:03:52.276995', '2018-04-14 03:03:52.276995', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:07:46.909244', '2018-04-14 03:07:46.909244', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:07:46.909244', '2018-04-14 03:07:46.909244', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:07:46.909244', '2018-04-14 03:07:46.909244', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:07:46.909244', '2018-04-14 03:07:46.909244', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:07:46.909244', '2018-04-14 03:07:46.909244', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:07:46.909244', '2018-04-14 03:07:46.909244', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:07:46.909244', '2018-04-14 03:07:46.909244', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:07:46.909244', '2018-04-14 03:07:46.909244', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:07:46.909244', '2018-04-14 03:07:46.909244', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:07:46.923859', '2018-04-14 03:07:46.923859', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:07:46.923859', '2018-04-14 03:07:46.923859', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:07:46.933453', '2018-04-14 03:07:46.933453', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:07:46.933453', '2018-04-14 03:07:46.933453', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:07:46.933453', '2018-04-14 03:07:46.933453', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:07:46.933453', '2018-04-14 03:07:46.933453', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:07:46.933453', '2018-04-14 03:07:46.933453', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:07:46.933453', '2018-04-14 03:07:46.933453', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:07:46.933453', '2018-04-14 03:07:46.933453', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:07:46.933453', '2018-04-14 03:07:46.933453', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:07:46.933453', '2018-04-14 03:07:46.933453', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:07:46.939062', '2018-04-14 03:07:46.939062', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:07:46.939062', '2018-04-14 03:07:46.939062', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:07:46.946305', '2018-04-14 03:07:46.946305', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:07:46.946305', '2018-04-14 03:07:46.946305', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:07:46.946305', '2018-04-14 03:07:46.946305', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:07:46.946305', '2018-04-14 03:07:46.946305', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:07:46.946305', '2018-04-14 03:07:46.946305', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:07:46.946305', '2018-04-14 03:07:46.946305', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:07:46.946305', '2018-04-14 03:07:46.946305', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:07:46.946305', '2018-04-14 03:07:46.946305', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:07:46.946305', '2018-04-14 03:07:46.946305', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:07:46.952421', '2018-04-14 03:07:46.952421', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:07:46.952421', '2018-04-14 03:07:46.952421', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:07:46.959150', '2018-04-14 03:07:46.959150', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:07:46.959150', '2018-04-14 03:07:46.959150', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:07:46.959150', '2018-04-14 03:07:46.959150', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:07:46.959150', '2018-04-14 03:07:46.959150', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:07:46.959150', '2018-04-14 03:07:46.959150', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:07:46.959150', '2018-04-14 03:07:46.959150', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:07:46.959150', '2018-04-14 03:07:46.959150', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:07:46.959150', '2018-04-14 03:07:46.959150', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:07:46.959150', '2018-04-14 03:07:46.959150', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:07:46.965117', '2018-04-14 03:07:46.965117', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:07:46.965117', '2018-04-14 03:07:46.965117', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:07:46.977049', '2018-04-14 03:07:46.977049', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:07:46.977049', '2018-04-14 03:07:46.977049', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:07:46.977049', '2018-04-14 03:07:46.977049', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:07:46.977049', '2018-04-14 03:07:46.977049', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:07:46.977049', '2018-04-14 03:07:46.977049', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:07:46.977049', '2018-04-14 03:07:46.977049', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:07:46.977049', '2018-04-14 03:07:46.977049', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:07:46.977049', '2018-04-14 03:07:46.977049', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:07:46.977049', '2018-04-14 03:07:46.977049', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:07:46.982057', '2018-04-14 03:07:46.982057', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:07:46.982057', '2018-04-14 03:07:46.982057', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:07:46.990706', '2018-04-14 03:07:46.990706', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:07:46.990706', '2018-04-14 03:07:46.990706', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:07:46.990706', '2018-04-14 03:07:46.990706', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:07:46.990706', '2018-04-14 03:07:46.990706', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:07:46.990706', '2018-04-14 03:07:46.990706', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:07:46.990706', '2018-04-14 03:07:46.990706', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:07:46.990706', '2018-04-14 03:07:46.990706', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:07:46.990706', '2018-04-14 03:07:46.990706', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:07:46.990706', '2018-04-14 03:07:46.990706', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:07:46.995578', '2018-04-14 03:07:46.995578', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:07:46.995578', '2018-04-14 03:07:46.995578', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:07:47.045709', '2018-04-14 03:07:47.045709', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:07:47.045709', '2018-04-14 03:07:47.045709', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:07:47.045709', '2018-04-14 03:07:47.045709', 576709754)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:07:47.045709', '2018-04-14 03:07:47.045709', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:07:47.045709', '2018-04-14 03:07:47.045709', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:07:47.045709', '2018-04-14 03:07:47.045709', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:07:47.045709', '2018-04-14 03:07:47.045709', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:07:47.045709', '2018-04-14 03:07:47.045709', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:07:47.045709', '2018-04-14 03:07:47.045709', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:07:47.051851', '2018-04-14 03:07:47.051851', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:07:47.051851', '2018-04-14 03:07:47.051851', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:07:47.058946', '2018-04-14 03:07:47.058946', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:07:47.058946', '2018-04-14 03:07:47.058946', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:07:47.058946', '2018-04-14 03:07:47.058946', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:07:47.058946', '2018-04-14 03:07:47.058946', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:07:47.058946', '2018-04-14 03:07:47.058946', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:07:47.058946', '2018-04-14 03:07:47.058946', 305467638)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:07:47.058946', '2018-04-14 03:07:47.058946', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:07:47.058946', '2018-04-14 03:07:47.058946', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:07:47.058946', '2018-04-14 03:07:47.058946', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:07:47.066503', '2018-04-14 03:07:47.066503', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:07:47.066503', '2018-04-14 03:07:47.066503', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:02.578899', '2018-04-14 03:14:02.578899', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:02.578899', '2018-04-14 03:14:02.578899', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:02.578899', '2018-04-14 03:14:02.578899', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:02.578899', '2018-04-14 03:14:02.578899', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:02.578899', '2018-04-14 03:14:02.578899', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:02.578899', '2018-04-14 03:14:02.578899', 305467638)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:02.578899', '2018-04-14 03:14:02.578899', 624042081)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:02.578899', '2018-04-14 03:14:02.578899', 898448884)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:02.578899', '2018-04-14 03:14:02.578899', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:02.592957', '2018-04-14 03:14:02.592957', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:02.592957', '2018-04-14 03:14:02.592957', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:02.601909', '2018-04-14 03:14:02.601909', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:02.601909', '2018-04-14 03:14:02.601909', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:02.601909', '2018-04-14 03:14:02.601909', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:02.601909', '2018-04-14 03:14:02.601909', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:02.601909', '2018-04-14 03:14:02.601909', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:02.601909', '2018-04-14 03:14:02.601909', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:02.601909', '2018-04-14 03:14:02.601909', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:02.601909', '2018-04-14 03:14:02.601909', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:02.601909', '2018-04-14 03:14:02.601909', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:02.607662', '2018-04-14 03:14:02.607662', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:02.607662', '2018-04-14 03:14:02.607662', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:02.618062', '2018-04-14 03:14:02.618062', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:02.618062', '2018-04-14 03:14:02.618062', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:02.618062', '2018-04-14 03:14:02.618062', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:02.618062', '2018-04-14 03:14:02.618062', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:02.618062', '2018-04-14 03:14:02.618062', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:02.618062', '2018-04-14 03:14:02.618062', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:02.618062', '2018-04-14 03:14:02.618062', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:02.618062', '2018-04-14 03:14:02.618062', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:02.618062', '2018-04-14 03:14:02.618062', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:02.624069', '2018-04-14 03:14:02.624069', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:02.624069', '2018-04-14 03:14:02.624069', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:02.630615', '2018-04-14 03:14:02.630615', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:02.630615', '2018-04-14 03:14:02.630615', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:02.630615', '2018-04-14 03:14:02.630615', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:02.630615', '2018-04-14 03:14:02.630615', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:02.630615', '2018-04-14 03:14:02.630615', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:02.630615', '2018-04-14 03:14:02.630615', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:02.630615', '2018-04-14 03:14:02.630615', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:02.630615', '2018-04-14 03:14:02.630615', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:02.630615', '2018-04-14 03:14:02.630615', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:02.636459', '2018-04-14 03:14:02.636459', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:02.636459', '2018-04-14 03:14:02.636459', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:02.671917', '2018-04-14 03:14:02.671917', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:02.671917', '2018-04-14 03:14:02.671917', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:02.671917', '2018-04-14 03:14:02.671917', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:02.671917', '2018-04-14 03:14:02.671917', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:02.671917', '2018-04-14 03:14:02.671917', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:02.671917', '2018-04-14 03:14:02.671917', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:02.671917', '2018-04-14 03:14:02.671917', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:02.671917', '2018-04-14 03:14:02.671917', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:02.671917', '2018-04-14 03:14:02.671917', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:02.677744', '2018-04-14 03:14:02.677744', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:02.677744', '2018-04-14 03:14:02.677744', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:02.685612', '2018-04-14 03:14:02.685612', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:02.685612', '2018-04-14 03:14:02.685612', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:02.685612', '2018-04-14 03:14:02.685612', 576709754)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:02.685612', '2018-04-14 03:14:02.685612', 1010528733)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:02.685612', '2018-04-14 03:14:02.685612', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:02.685612', '2018-04-14 03:14:02.685612', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:02.685612', '2018-04-14 03:14:02.685612', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:02.685612', '2018-04-14 03:14:02.685612', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:02.685612', '2018-04-14 03:14:02.685612', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:02.693024', '2018-04-14 03:14:02.693024', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:02.693024', '2018-04-14 03:14:02.693024', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:02.738762', '2018-04-14 03:14:02.738762', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:02.738762', '2018-04-14 03:14:02.738762', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:02.738762', '2018-04-14 03:14:02.738762', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:02.738762', '2018-04-14 03:14:02.738762', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:02.738762', '2018-04-14 03:14:02.738762', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:02.738762', '2018-04-14 03:14:02.738762', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:02.738762', '2018-04-14 03:14:02.738762', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:02.738762', '2018-04-14 03:14:02.738762', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:02.738762', '2018-04-14 03:14:02.738762', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:02.744777', '2018-04-14 03:14:02.744777', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:02.744777', '2018-04-14 03:14:02.744777', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:02.750908', '2018-04-14 03:14:02.750908', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:02.750908', '2018-04-14 03:14:02.750908', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:02.750908', '2018-04-14 03:14:02.750908', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:02.750908', '2018-04-14 03:14:02.750908', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:02.750908', '2018-04-14 03:14:02.750908', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:02.750908', '2018-04-14 03:14:02.750908', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:02.750908', '2018-04-14 03:14:02.750908', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:02.750908', '2018-04-14 03:14:02.750908', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:02.750908', '2018-04-14 03:14:02.750908', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:02.755862', '2018-04-14 03:14:02.755862', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:02.755862', '2018-04-14 03:14:02.755862', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mWork Load (0.5ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:34.362543', '2018-04-14 03:14:34.362543', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:34.362543', '2018-04-14 03:14:34.362543', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:34.362543', '2018-04-14 03:14:34.362543', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:34.362543', '2018-04-14 03:14:34.362543', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:34.362543', '2018-04-14 03:14:34.362543', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:34.362543', '2018-04-14 03:14:34.362543', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:34.362543', '2018-04-14 03:14:34.362543', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:34.362543', '2018-04-14 03:14:34.362543', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:34.362543', '2018-04-14 03:14:34.362543', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:34.372789', '2018-04-14 03:14:34.372789', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:34.372789', '2018-04-14 03:14:34.372789', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:34.383800', '2018-04-14 03:14:34.383800', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:34.383800', '2018-04-14 03:14:34.383800', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:34.383800', '2018-04-14 03:14:34.383800', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:34.383800', '2018-04-14 03:14:34.383800', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:34.383800', '2018-04-14 03:14:34.383800', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:34.383800', '2018-04-14 03:14:34.383800', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:34.383800', '2018-04-14 03:14:34.383800', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:34.383800', '2018-04-14 03:14:34.383800', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:34.383800', '2018-04-14 03:14:34.383800', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:34.389171', '2018-04-14 03:14:34.389171', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:34.389171', '2018-04-14 03:14:34.389171', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:34.398392', '2018-04-14 03:14:34.398392', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:34.398392', '2018-04-14 03:14:34.398392', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:34.398392', '2018-04-14 03:14:34.398392', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:34.398392', '2018-04-14 03:14:34.398392', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:34.398392', '2018-04-14 03:14:34.398392', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:34.398392', '2018-04-14 03:14:34.398392', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:34.398392', '2018-04-14 03:14:34.398392', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:34.398392', '2018-04-14 03:14:34.398392', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:34.398392', '2018-04-14 03:14:34.398392', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:34.403338', '2018-04-14 03:14:34.403338', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:34.403338', '2018-04-14 03:14:34.403338', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:34.409747', '2018-04-14 03:14:34.409747', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:34.409747', '2018-04-14 03:14:34.409747', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:34.409747', '2018-04-14 03:14:34.409747', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:34.409747', '2018-04-14 03:14:34.409747', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:34.409747', '2018-04-14 03:14:34.409747', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:34.409747', '2018-04-14 03:14:34.409747', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:34.409747', '2018-04-14 03:14:34.409747', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:34.409747', '2018-04-14 03:14:34.409747', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:34.409747', '2018-04-14 03:14:34.409747', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:34.415686', '2018-04-14 03:14:34.415686', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:34.415686', '2018-04-14 03:14:34.415686', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:34.424481', '2018-04-14 03:14:34.424481', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:34.424481', '2018-04-14 03:14:34.424481', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:34.424481', '2018-04-14 03:14:34.424481', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:34.424481', '2018-04-14 03:14:34.424481', 1010528733)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:34.424481', '2018-04-14 03:14:34.424481', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:34.424481', '2018-04-14 03:14:34.424481', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:34.424481', '2018-04-14 03:14:34.424481', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:34.424481', '2018-04-14 03:14:34.424481', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:34.424481', '2018-04-14 03:14:34.424481', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:34.431881', '2018-04-14 03:14:34.431881', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:34.431881', '2018-04-14 03:14:34.431881', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:34.438359', '2018-04-14 03:14:34.438359', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:34.438359', '2018-04-14 03:14:34.438359', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:34.438359', '2018-04-14 03:14:34.438359', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:34.438359', '2018-04-14 03:14:34.438359', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:34.438359', '2018-04-14 03:14:34.438359', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:34.438359', '2018-04-14 03:14:34.438359', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:34.438359', '2018-04-14 03:14:34.438359', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:34.438359', '2018-04-14 03:14:34.438359', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:34.438359', '2018-04-14 03:14:34.438359', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:34.443916', '2018-04-14 03:14:34.443916', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:34.443916', '2018-04-14 03:14:34.443916', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:34.450209', '2018-04-14 03:14:34.450209', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:34.450209', '2018-04-14 03:14:34.450209', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:34.450209', '2018-04-14 03:14:34.450209', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:34.450209', '2018-04-14 03:14:34.450209', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:34.450209', '2018-04-14 03:14:34.450209', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:34.450209', '2018-04-14 03:14:34.450209', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:34.450209', '2018-04-14 03:14:34.450209', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:34.450209', '2018-04-14 03:14:34.450209', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:34.450209', '2018-04-14 03:14:34.450209', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:34.456135', '2018-04-14 03:14:34.456135', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:34.456135', '2018-04-14 03:14:34.456135', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:34.465619', '2018-04-14 03:14:34.465619', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:34.465619', '2018-04-14 03:14:34.465619', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:34.465619', '2018-04-14 03:14:34.465619', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:34.465619', '2018-04-14 03:14:34.465619', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:34.465619', '2018-04-14 03:14:34.465619', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:34.465619', '2018-04-14 03:14:34.465619', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:34.465619', '2018-04-14 03:14:34.465619', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:34.465619', '2018-04-14 03:14:34.465619', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:34.465619', '2018-04-14 03:14:34.465619', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:34.470510', '2018-04-14 03:14:34.470510', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:34.470510', '2018-04-14 03:14:34.470510', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:14:34.478474', '2018-04-14 03:14:34.478474', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:14:34.478474', '2018-04-14 03:14:34.478474', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:14:34.478474', '2018-04-14 03:14:34.478474', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:14:34.478474', '2018-04-14 03:14:34.478474', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:14:34.478474', '2018-04-14 03:14:34.478474', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:14:34.478474', '2018-04-14 03:14:34.478474', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:14:34.478474', '2018-04-14 03:14:34.478474', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:14:34.478474', '2018-04-14 03:14:34.478474', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:14:34.478474', '2018-04-14 03:14:34.478474', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:14:34.483322', '2018-04-14 03:14:34.483322', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:14:34.483322', '2018-04-14 03:14:34.483322', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mWork Load (0.5ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:15:29.436608', '2018-04-14 03:15:29.436608', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:15:29.436608', '2018-04-14 03:15:29.436608', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:15:29.436608', '2018-04-14 03:15:29.436608', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:15:29.436608', '2018-04-14 03:15:29.436608', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:15:29.436608', '2018-04-14 03:15:29.436608', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:15:29.436608', '2018-04-14 03:15:29.436608', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:15:29.436608', '2018-04-14 03:15:29.436608', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:15:29.436608', '2018-04-14 03:15:29.436608', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:15:29.436608', '2018-04-14 03:15:29.436608', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:15:29.446081', '2018-04-14 03:15:29.446081', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:15:29.446081', '2018-04-14 03:15:29.446081', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:15:29.457375', '2018-04-14 03:15:29.457375', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:15:29.457375', '2018-04-14 03:15:29.457375', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:15:29.457375', '2018-04-14 03:15:29.457375', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:15:29.457375', '2018-04-14 03:15:29.457375', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:15:29.457375', '2018-04-14 03:15:29.457375', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:15:29.457375', '2018-04-14 03:15:29.457375', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:15:29.457375', '2018-04-14 03:15:29.457375', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:15:29.457375', '2018-04-14 03:15:29.457375', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:15:29.457375', '2018-04-14 03:15:29.457375', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:15:29.462484', '2018-04-14 03:15:29.462484', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:15:29.462484', '2018-04-14 03:15:29.462484', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:15:29.480188', '2018-04-14 03:15:29.480188', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:15:29.480188', '2018-04-14 03:15:29.480188', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:15:29.480188', '2018-04-14 03:15:29.480188', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:15:29.480188', '2018-04-14 03:15:29.480188', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:15:29.480188', '2018-04-14 03:15:29.480188', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:15:29.480188', '2018-04-14 03:15:29.480188', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:15:29.480188', '2018-04-14 03:15:29.480188', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:15:29.480188', '2018-04-14 03:15:29.480188', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:15:29.480188', '2018-04-14 03:15:29.480188', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:15:29.486209', '2018-04-14 03:15:29.486209', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:15:29.486209', '2018-04-14 03:15:29.486209', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (1.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:15:29.493806', '2018-04-14 03:15:29.493806', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:15:29.493806', '2018-04-14 03:15:29.493806', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:15:29.493806', '2018-04-14 03:15:29.493806', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:15:29.493806', '2018-04-14 03:15:29.493806', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:15:29.493806', '2018-04-14 03:15:29.493806', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:15:29.493806', '2018-04-14 03:15:29.493806', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:15:29.493806', '2018-04-14 03:15:29.493806', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:15:29.493806', '2018-04-14 03:15:29.493806', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:15:29.493806', '2018-04-14 03:15:29.493806', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:15:29.500435', '2018-04-14 03:15:29.500435', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:15:29.500435', '2018-04-14 03:15:29.500435', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:15:29.507826', '2018-04-14 03:15:29.507826', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:15:29.507826', '2018-04-14 03:15:29.507826', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:15:29.507826', '2018-04-14 03:15:29.507826', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:15:29.507826', '2018-04-14 03:15:29.507826', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:15:29.507826', '2018-04-14 03:15:29.507826', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:15:29.507826', '2018-04-14 03:15:29.507826', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:15:29.507826', '2018-04-14 03:15:29.507826', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:15:29.507826', '2018-04-14 03:15:29.507826', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:15:29.507826', '2018-04-14 03:15:29.507826', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:15:29.512854', '2018-04-14 03:15:29.512854', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:15:29.512854', '2018-04-14 03:15:29.512854', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:15:29.521783', '2018-04-14 03:15:29.521783', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:15:29.521783', '2018-04-14 03:15:29.521783', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:15:29.521783', '2018-04-14 03:15:29.521783', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:15:29.521783', '2018-04-14 03:15:29.521783', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:15:29.521783', '2018-04-14 03:15:29.521783', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:15:29.521783', '2018-04-14 03:15:29.521783', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:15:29.521783', '2018-04-14 03:15:29.521783', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:15:29.521783', '2018-04-14 03:15:29.521783', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:15:29.521783', '2018-04-14 03:15:29.521783', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:15:29.526780', '2018-04-14 03:15:29.526780', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:15:29.526780', '2018-04-14 03:15:29.526780', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:15:29.534030', '2018-04-14 03:15:29.534030', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:15:29.534030', '2018-04-14 03:15:29.534030', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:15:29.534030', '2018-04-14 03:15:29.534030', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:15:29.534030', '2018-04-14 03:15:29.534030', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:15:29.534030', '2018-04-14 03:15:29.534030', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:15:29.534030', '2018-04-14 03:15:29.534030', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:15:29.534030', '2018-04-14 03:15:29.534030', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:15:29.534030', '2018-04-14 03:15:29.534030', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:15:29.534030', '2018-04-14 03:15:29.534030', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:15:29.540080', '2018-04-14 03:15:29.540080', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:15:29.540080', '2018-04-14 03:15:29.540080', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:15:29.547141', '2018-04-14 03:15:29.547141', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:15:29.547141', '2018-04-14 03:15:29.547141', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:15:29.547141', '2018-04-14 03:15:29.547141', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:15:29.547141', '2018-04-14 03:15:29.547141', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:15:29.547141', '2018-04-14 03:15:29.547141', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:15:29.547141', '2018-04-14 03:15:29.547141', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:15:29.547141', '2018-04-14 03:15:29.547141', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:15:29.547141', '2018-04-14 03:15:29.547141', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:15:29.547141', '2018-04-14 03:15:29.547141', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:15:29.553847', '2018-04-14 03:15:29.553847', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:15:29.553847', '2018-04-14 03:15:29.553847', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:15:29.563780', '2018-04-14 03:15:29.563780', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:15:29.563780', '2018-04-14 03:15:29.563780', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:15:29.563780', '2018-04-14 03:15:29.563780', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:15:29.563780', '2018-04-14 03:15:29.563780', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:15:29.563780', '2018-04-14 03:15:29.563780', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:15:29.563780', '2018-04-14 03:15:29.563780', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:15:29.563780', '2018-04-14 03:15:29.563780', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:15:29.563780', '2018-04-14 03:15:29.563780', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:15:29.563780', '2018-04-14 03:15:29.563780', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:15:29.569647', '2018-04-14 03:15:29.569647', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:15:29.569647', '2018-04-14 03:15:29.569647', 273681354, 358143215, 373891647)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:17:26.497049', '2018-04-14 03:17:26.497049', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:17:26.497049', '2018-04-14 03:17:26.497049', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:17:26.497049', '2018-04-14 03:17:26.497049', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:17:26.497049', '2018-04-14 03:17:26.497049', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:17:26.497049', '2018-04-14 03:17:26.497049', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:17:26.497049', '2018-04-14 03:17:26.497049', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:17:26.497049', '2018-04-14 03:17:26.497049', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:17:26.497049', '2018-04-14 03:17:26.497049', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:17:26.497049', '2018-04-14 03:17:26.497049', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:17:26.507488', '2018-04-14 03:17:26.507488', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:17:26.507488', '2018-04-14 03:17:26.507488', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.507488', '2018-04-14 03:17:26.507488', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.507488', '2018-04-14 03:17:26.507488', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.507488', '2018-04-14 03:17:26.507488', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.507488', '2018-04-14 03:17:26.507488', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:17:26.519317', '2018-04-14 03:17:26.519317', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:17:26.519317', '2018-04-14 03:17:26.519317', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:17:26.519317', '2018-04-14 03:17:26.519317', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:17:26.519317', '2018-04-14 03:17:26.519317', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:17:26.519317', '2018-04-14 03:17:26.519317', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:17:26.519317', '2018-04-14 03:17:26.519317', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:17:26.519317', '2018-04-14 03:17:26.519317', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:17:26.519317', '2018-04-14 03:17:26.519317', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:17:26.519317', '2018-04-14 03:17:26.519317', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:17:26.526131', '2018-04-14 03:17:26.526131', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:17:26.526131', '2018-04-14 03:17:26.526131', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.526131', '2018-04-14 03:17:26.526131', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.526131', '2018-04-14 03:17:26.526131', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.526131', '2018-04-14 03:17:26.526131', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.526131', '2018-04-14 03:17:26.526131', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:17:26.535579', '2018-04-14 03:17:26.535579', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:17:26.535579', '2018-04-14 03:17:26.535579', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:17:26.535579', '2018-04-14 03:17:26.535579', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:17:26.535579', '2018-04-14 03:17:26.535579', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:17:26.535579', '2018-04-14 03:17:26.535579', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:17:26.535579', '2018-04-14 03:17:26.535579', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:17:26.535579', '2018-04-14 03:17:26.535579', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:17:26.535579', '2018-04-14 03:17:26.535579', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:17:26.535579', '2018-04-14 03:17:26.535579', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:17:26.541471', '2018-04-14 03:17:26.541471', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:17:26.541471', '2018-04-14 03:17:26.541471', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.541471', '2018-04-14 03:17:26.541471', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.541471', '2018-04-14 03:17:26.541471', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.541471', '2018-04-14 03:17:26.541471', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.541471', '2018-04-14 03:17:26.541471', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:17:26.549672', '2018-04-14 03:17:26.549672', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:17:26.549672', '2018-04-14 03:17:26.549672', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:17:26.549672', '2018-04-14 03:17:26.549672', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:17:26.549672', '2018-04-14 03:17:26.549672', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:17:26.549672', '2018-04-14 03:17:26.549672', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:17:26.549672', '2018-04-14 03:17:26.549672', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:17:26.549672', '2018-04-14 03:17:26.549672', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:17:26.549672', '2018-04-14 03:17:26.549672', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:17:26.549672', '2018-04-14 03:17:26.549672', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:17:26.555195', '2018-04-14 03:17:26.555195', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:17:26.555195', '2018-04-14 03:17:26.555195', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.555195', '2018-04-14 03:17:26.555195', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.555195', '2018-04-14 03:17:26.555195', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.555195', '2018-04-14 03:17:26.555195', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.555195', '2018-04-14 03:17:26.555195', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:17:26.562572', '2018-04-14 03:17:26.562572', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:17:26.562572', '2018-04-14 03:17:26.562572', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:17:26.562572', '2018-04-14 03:17:26.562572', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:17:26.562572', '2018-04-14 03:17:26.562572', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:17:26.562572', '2018-04-14 03:17:26.562572', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:17:26.562572', '2018-04-14 03:17:26.562572', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:17:26.562572', '2018-04-14 03:17:26.562572', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:17:26.562572', '2018-04-14 03:17:26.562572', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:17:26.562572', '2018-04-14 03:17:26.562572', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:17:26.568198', '2018-04-14 03:17:26.568198', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:17:26.568198', '2018-04-14 03:17:26.568198', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.568198', '2018-04-14 03:17:26.568198', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.568198', '2018-04-14 03:17:26.568198', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.568198', '2018-04-14 03:17:26.568198', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.568198', '2018-04-14 03:17:26.568198', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:17:26.577401', '2018-04-14 03:17:26.577401', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:17:26.577401', '2018-04-14 03:17:26.577401', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:17:26.577401', '2018-04-14 03:17:26.577401', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:17:26.577401', '2018-04-14 03:17:26.577401', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:17:26.577401', '2018-04-14 03:17:26.577401', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:17:26.577401', '2018-04-14 03:17:26.577401', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:17:26.577401', '2018-04-14 03:17:26.577401', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:17:26.577401', '2018-04-14 03:17:26.577401', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:17:26.577401', '2018-04-14 03:17:26.577401', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:17:26.583040', '2018-04-14 03:17:26.583040', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:17:26.583040', '2018-04-14 03:17:26.583040', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.583040', '2018-04-14 03:17:26.583040', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.583040', '2018-04-14 03:17:26.583040', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.583040', '2018-04-14 03:17:26.583040', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.583040', '2018-04-14 03:17:26.583040', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:17:26.593438', '2018-04-14 03:17:26.593438', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:17:26.593438', '2018-04-14 03:17:26.593438', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:17:26.593438', '2018-04-14 03:17:26.593438', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:17:26.593438', '2018-04-14 03:17:26.593438', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:17:26.593438', '2018-04-14 03:17:26.593438', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:17:26.593438', '2018-04-14 03:17:26.593438', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:17:26.593438', '2018-04-14 03:17:26.593438', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:17:26.593438', '2018-04-14 03:17:26.593438', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:17:26.593438', '2018-04-14 03:17:26.593438', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:17:26.598857', '2018-04-14 03:17:26.598857', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:17:26.598857', '2018-04-14 03:17:26.598857', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.598857', '2018-04-14 03:17:26.598857', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.598857', '2018-04-14 03:17:26.598857', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.598857', '2018-04-14 03:17:26.598857', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.598857', '2018-04-14 03:17:26.598857', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:17:26.606708', '2018-04-14 03:17:26.606708', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:17:26.606708', '2018-04-14 03:17:26.606708', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:17:26.606708', '2018-04-14 03:17:26.606708', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:17:26.606708', '2018-04-14 03:17:26.606708', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:17:26.606708', '2018-04-14 03:17:26.606708', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:17:26.606708', '2018-04-14 03:17:26.606708', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:17:26.606708', '2018-04-14 03:17:26.606708', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:17:26.606708', '2018-04-14 03:17:26.606708', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:17:26.606708', '2018-04-14 03:17:26.606708', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:17:26.612469', '2018-04-14 03:17:26.612469', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:17:26.612469', '2018-04-14 03:17:26.612469', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.612469', '2018-04-14 03:17:26.612469', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.612469', '2018-04-14 03:17:26.612469', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.612469', '2018-04-14 03:17:26.612469', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:17:26.612469', '2018-04-14 03:17:26.612469', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mWork Load (0.5ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:22:05.648592', '2018-04-14 03:22:05.648592', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:22:05.648592', '2018-04-14 03:22:05.648592', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:22:05.648592', '2018-04-14 03:22:05.648592', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:22:05.648592', '2018-04-14 03:22:05.648592', 1010528733)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:22:05.648592', '2018-04-14 03:22:05.648592', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:22:05.648592', '2018-04-14 03:22:05.648592', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:22:05.648592', '2018-04-14 03:22:05.648592', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:22:05.648592', '2018-04-14 03:22:05.648592', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:22:05.648592', '2018-04-14 03:22:05.648592', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:22:05.658276', '2018-04-14 03:22:05.658276', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:22:05.658276', '2018-04-14 03:22:05.658276', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.658276', '2018-04-14 03:22:05.658276', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.658276', '2018-04-14 03:22:05.658276', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.658276', '2018-04-14 03:22:05.658276', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.658276', '2018-04-14 03:22:05.658276', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:22:05.669988', '2018-04-14 03:22:05.669988', 206669143)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:22:05.669988', '2018-04-14 03:22:05.669988', 358143215)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:22:05.669988', '2018-04-14 03:22:05.669988', 576709754)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:22:05.669988', '2018-04-14 03:22:05.669988', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:22:05.669988', '2018-04-14 03:22:05.669988', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:22:05.669988', '2018-04-14 03:22:05.669988', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:22:05.669988', '2018-04-14 03:22:05.669988', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:22:05.669988', '2018-04-14 03:22:05.669988', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:22:05.669988', '2018-04-14 03:22:05.669988', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:22:05.678453', '2018-04-14 03:22:05.678453', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:22:05.678453', '2018-04-14 03:22:05.678453', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.678453', '2018-04-14 03:22:05.678453', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.678453', '2018-04-14 03:22:05.678453', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.678453', '2018-04-14 03:22:05.678453', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.678453', '2018-04-14 03:22:05.678453', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:22:05.686036', '2018-04-14 03:22:05.686036', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:22:05.686036', '2018-04-14 03:22:05.686036', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:22:05.686036', '2018-04-14 03:22:05.686036', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:22:05.686036', '2018-04-14 03:22:05.686036', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:22:05.686036', '2018-04-14 03:22:05.686036', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:22:05.686036', '2018-04-14 03:22:05.686036', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:22:05.686036', '2018-04-14 03:22:05.686036', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:22:05.686036', '2018-04-14 03:22:05.686036', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:22:05.686036', '2018-04-14 03:22:05.686036', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:22:05.695290', '2018-04-14 03:22:05.695290', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:22:05.695290', '2018-04-14 03:22:05.695290', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.695290', '2018-04-14 03:22:05.695290', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.695290', '2018-04-14 03:22:05.695290', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.695290', '2018-04-14 03:22:05.695290', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.695290', '2018-04-14 03:22:05.695290', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:22:05.703993', '2018-04-14 03:22:05.703993', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:22:05.703993', '2018-04-14 03:22:05.703993', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:22:05.703993', '2018-04-14 03:22:05.703993', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:22:05.703993', '2018-04-14 03:22:05.703993', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:22:05.703993', '2018-04-14 03:22:05.703993', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:22:05.703993', '2018-04-14 03:22:05.703993', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:22:05.703993', '2018-04-14 03:22:05.703993', 624042081)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:22:05.703993', '2018-04-14 03:22:05.703993', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:22:05.703993', '2018-04-14 03:22:05.703993', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:22:05.711973', '2018-04-14 03:22:05.711973', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:22:05.711973', '2018-04-14 03:22:05.711973', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.711973', '2018-04-14 03:22:05.711973', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.711973', '2018-04-14 03:22:05.711973', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.711973', '2018-04-14 03:22:05.711973', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.711973', '2018-04-14 03:22:05.711973', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:22:05.719452', '2018-04-14 03:22:05.719452', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:22:05.719452', '2018-04-14 03:22:05.719452', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:22:05.719452', '2018-04-14 03:22:05.719452', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:22:05.719452', '2018-04-14 03:22:05.719452', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:22:05.719452', '2018-04-14 03:22:05.719452', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:22:05.719452', '2018-04-14 03:22:05.719452', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:22:05.719452', '2018-04-14 03:22:05.719452', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:22:05.719452', '2018-04-14 03:22:05.719452', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:22:05.719452', '2018-04-14 03:22:05.719452', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:22:05.726778', '2018-04-14 03:22:05.726778', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:22:05.726778', '2018-04-14 03:22:05.726778', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.726778', '2018-04-14 03:22:05.726778', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.726778', '2018-04-14 03:22:05.726778', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.726778', '2018-04-14 03:22:05.726778', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.726778', '2018-04-14 03:22:05.726778', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:22:05.734905', '2018-04-14 03:22:05.734905', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:22:05.734905', '2018-04-14 03:22:05.734905', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:22:05.734905', '2018-04-14 03:22:05.734905', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:22:05.734905', '2018-04-14 03:22:05.734905', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:22:05.734905', '2018-04-14 03:22:05.734905', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:22:05.734905', '2018-04-14 03:22:05.734905', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:22:05.734905', '2018-04-14 03:22:05.734905', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:22:05.734905', '2018-04-14 03:22:05.734905', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:22:05.734905', '2018-04-14 03:22:05.734905', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:22:05.740012', '2018-04-14 03:22:05.740012', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:22:05.740012', '2018-04-14 03:22:05.740012', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.740012', '2018-04-14 03:22:05.740012', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.740012', '2018-04-14 03:22:05.740012', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.740012', '2018-04-14 03:22:05.740012', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.740012', '2018-04-14 03:22:05.740012', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:22:05.747702', '2018-04-14 03:22:05.747702', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:22:05.747702', '2018-04-14 03:22:05.747702', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:22:05.747702', '2018-04-14 03:22:05.747702', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:22:05.747702', '2018-04-14 03:22:05.747702', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:22:05.747702', '2018-04-14 03:22:05.747702', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:22:05.747702', '2018-04-14 03:22:05.747702', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:22:05.747702', '2018-04-14 03:22:05.747702', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:22:05.747702', '2018-04-14 03:22:05.747702', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:22:05.747702', '2018-04-14 03:22:05.747702', 42601833)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:22:05.753390', '2018-04-14 03:22:05.753390', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:22:05.753390', '2018-04-14 03:22:05.753390', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.753390', '2018-04-14 03:22:05.753390', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.753390', '2018-04-14 03:22:05.753390', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.753390', '2018-04-14 03:22:05.753390', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.753390', '2018-04-14 03:22:05.753390', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:22:05.763479', '2018-04-14 03:22:05.763479', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:22:05.763479', '2018-04-14 03:22:05.763479', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:22:05.763479', '2018-04-14 03:22:05.763479', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:22:05.763479', '2018-04-14 03:22:05.763479', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:22:05.763479', '2018-04-14 03:22:05.763479', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:22:05.763479', '2018-04-14 03:22:05.763479', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:22:05.763479', '2018-04-14 03:22:05.763479', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:22:05.763479', '2018-04-14 03:22:05.763479', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:22:05.763479', '2018-04-14 03:22:05.763479', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:22:05.768886', '2018-04-14 03:22:05.768886', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:22:05.768886', '2018-04-14 03:22:05.768886', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.768886', '2018-04-14 03:22:05.768886', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.768886', '2018-04-14 03:22:05.768886', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.768886', '2018-04-14 03:22:05.768886', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.768886', '2018-04-14 03:22:05.768886', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:22:05.779219', '2018-04-14 03:22:05.779219', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:22:05.779219', '2018-04-14 03:22:05.779219', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:22:05.779219', '2018-04-14 03:22:05.779219', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:22:05.779219', '2018-04-14 03:22:05.779219', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:22:05.779219', '2018-04-14 03:22:05.779219', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:22:05.779219', '2018-04-14 03:22:05.779219', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:22:05.779219', '2018-04-14 03:22:05.779219', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:22:05.779219', '2018-04-14 03:22:05.779219', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:22:05.779219', '2018-04-14 03:22:05.779219', 42601833)[0m
  [1m[36mFixture Delete (0.1ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-11', '2018-04-14 03:22:05.784091', '2018-04-14 03:22:05.784091', 156850806, 206669143, 1055046044)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-12', '2018-04-14 03:22:05.784091', '2018-04-14 03:22:05.784091', 273681354, 358143215, 373891647)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.784091', '2018-04-14 03:22:05.784091', 660028255, 576709754, 223764616)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.784091', '2018-04-14 03:22:05.784091', 959688446, 358143215, 315165233)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.784091', '2018-04-14 03:22:05.784091', 238329453, 188498254, 933912447)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2018-04-13', '2018-04-14 03:22:05.784091', '2018-04-14 03:22:05.784091', 389926865, 305467638, 114213581)[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 373891647]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 681446112]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 315165233]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 197155733]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:28:13.858785', '2018-04-14 03:28:13.858785', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:28:13.858785', '2018-04-14 03:28:13.858785', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:28:13.858785', '2018-04-14 03:28:13.858785', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:28:13.858785', '2018-04-14 03:28:13.858785', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:28:13.858785', '2018-04-14 03:28:13.858785', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:28:13.858785', '2018-04-14 03:28:13.858785', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:28:13.858785', '2018-04-14 03:28:13.858785', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:28:13.858785', '2018-04-14 03:28:13.858785', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:28:13.858785', '2018-04-14 03:28:13.858785', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 943559701, 42601833, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:28:13.868336', '2018-04-14 03:28:13.868336', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:28:13.884460', '2018-04-14 03:28:13.884460', 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-14 03:28:13.884460', '2018-04-14 03:28:13.884460', 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book4', 'author', '1960', '2018-04-14 03:28:13.884460', '2018-04-14 03:28:13.884460', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:28:13.884460', '2018-04-14 03:28:13.884460', 363122234)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:28:13.884460', '2018-04-14 03:28:13.884460', 212705166)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:28:13.884460', '2018-04-14 03:28:13.884460', 1001041691)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:28:13.884460', '2018-04-14 03:28:13.884460', 722842252)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:28:13.884460', '2018-04-14 03:28:13.884460', 470975007)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book10', 'author', '1960', '2018-04-14 03:28:13.884460', '2018-04-14 03:28:13.884460', 685710308)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:28:13.935490"], ["updated_at", "2018-04-14 03:28:13.935490"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:28:13.940468"], ["updated_at", "2018-04-14 03:28:13.940468"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "Liquid Spirit"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:30:10.508252', '2018-04-14 03:30:10.508252', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:30:10.508252', '2018-04-14 03:30:10.508252', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:30:10.508252', '2018-04-14 03:30:10.508252', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:30:10.508252', '2018-04-14 03:30:10.508252', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:30:10.508252', '2018-04-14 03:30:10.508252', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:30:10.508252', '2018-04-14 03:30:10.508252', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:30:10.508252', '2018-04-14 03:30:10.508252', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:30:10.508252', '2018-04-14 03:30:10.508252', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:30:10.508252', '2018-04-14 03:30:10.508252', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 943559701, 42601833, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:30:10.519691', '2018-04-14 03:30:10.519691', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:30:10.536803', '2018-04-14 03:30:10.536803', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book3', 'author', '1960', '2018-04-14 03:30:10.536803', '2018-04-14 03:30:10.536803', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book4', 'author', '1960', '2018-04-14 03:30:10.536803', '2018-04-14 03:30:10.536803', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:30:10.536803', '2018-04-14 03:30:10.536803', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:30:10.536803', '2018-04-14 03:30:10.536803', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:30:10.536803', '2018-04-14 03:30:10.536803', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:30:10.536803', '2018-04-14 03:30:10.536803', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:30:10.536803', '2018-04-14 03:30:10.536803', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book10', 'author', '1960', '2018-04-14 03:30:10.536803', '2018-04-14 03:30:10.536803', 685710308)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:30:10.586796"], ["updated_at", "2018-04-14 03:30:10.586796"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:30:10.592403"], ["updated_at", "2018-04-14 03:30:10.592403"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "Liquid Spirit"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:32:44.708463', '2018-04-14 03:32:44.708463', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:32:44.708463', '2018-04-14 03:32:44.708463', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:32:44.708463', '2018-04-14 03:32:44.708463', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:32:44.708463', '2018-04-14 03:32:44.708463', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:32:44.708463', '2018-04-14 03:32:44.708463', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:32:44.708463', '2018-04-14 03:32:44.708463', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:32:44.708463', '2018-04-14 03:32:44.708463', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:32:44.708463', '2018-04-14 03:32:44.708463', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:32:44.708463', '2018-04-14 03:32:44.708463', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 943559701, 42601833, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:32:44.722822', '2018-04-14 03:32:44.722822', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:32:44.739135', '2018-04-14 03:32:44.739135', 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:32:44.739135', '2018-04-14 03:32:44.739135', 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:32:44.739135', '2018-04-14 03:32:44.739135', 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:32:44.739135', '2018-04-14 03:32:44.739135', 363122234)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:32:44.739135', '2018-04-14 03:32:44.739135', 212705166)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:32:44.739135', '2018-04-14 03:32:44.739135', 1001041691)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:32:44.739135', '2018-04-14 03:32:44.739135', 722842252)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:32:44.739135', '2018-04-14 03:32:44.739135', 470975007)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book10', 'author', '1960', '2018-04-14 03:32:44.739135', '2018-04-14 03:32:44.739135', 685710308)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "Liquid Spirit"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (1.9ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:32:44.848887"], ["updated_at", "2018-04-14 03:32:44.848887"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:32:44.860401"], ["updated_at", "2018-04-14 03:32:44.860401"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:32:44.866768"], ["updated_at", "2018-04-14 03:32:44.866768"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:34:40.387198', '2018-04-14 03:34:40.387198', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:34:40.387198', '2018-04-14 03:34:40.387198', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:34:40.387198', '2018-04-14 03:34:40.387198', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:34:40.387198', '2018-04-14 03:34:40.387198', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:34:40.387198', '2018-04-14 03:34:40.387198', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:34:40.387198', '2018-04-14 03:34:40.387198', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:34:40.387198', '2018-04-14 03:34:40.387198', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:34:40.387198', '2018-04-14 03:34:40.387198', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:34:40.387198', '2018-04-14 03:34:40.387198', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 943559701, 42601833, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:34:40.397460', '2018-04-14 03:34:40.397460', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:34:40.413869', '2018-04-14 03:34:40.413869', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:34:40.413869', '2018-04-14 03:34:40.413869', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:34:40.413869', '2018-04-14 03:34:40.413869', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:34:40.413869', '2018-04-14 03:34:40.413869', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:34:40.413869', '2018-04-14 03:34:40.413869', 212705166)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:34:40.413869', '2018-04-14 03:34:40.413869', 1001041691)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:34:40.413869', '2018-04-14 03:34:40.413869', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:34:40.413869', '2018-04-14 03:34:40.413869', 470975007)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book10', 'author', '1960', '2018-04-14 03:34:40.413869', '2018-04-14 03:34:40.413869', 685710308)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:34:40.459587"], ["updated_at", "2018-04-14 03:34:40.459587"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:34:40.468739"], ["updated_at", "2018-04-14 03:34:40.468739"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:34:40.472887"], ["updated_at", "2018-04-14 03:34:40.472887"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "Liquid Spirit"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.4ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:35:59.124125', '2018-04-14 03:35:59.124125', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:35:59.124125', '2018-04-14 03:35:59.124125', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:35:59.124125', '2018-04-14 03:35:59.124125', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:35:59.124125', '2018-04-14 03:35:59.124125', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:35:59.124125', '2018-04-14 03:35:59.124125', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:35:59.124125', '2018-04-14 03:35:59.124125', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:35:59.124125', '2018-04-14 03:35:59.124125', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:35:59.124125', '2018-04-14 03:35:59.124125', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:35:59.124125', '2018-04-14 03:35:59.124125', 42601833)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 943559701, 42601833, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:35:59.134838', '2018-04-14 03:35:59.134838', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:35:59.151894', '2018-04-14 03:35:59.151894', 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:35:59.151894', '2018-04-14 03:35:59.151894', 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:35:59.151894', '2018-04-14 03:35:59.151894', 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:35:59.151894', '2018-04-14 03:35:59.151894', 363122234)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:35:59.151894', '2018-04-14 03:35:59.151894', 212705166)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:35:59.151894', '2018-04-14 03:35:59.151894', 1001041691)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:35:59.151894', '2018-04-14 03:35:59.151894', 722842252)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:35:59.151894', '2018-04-14 03:35:59.151894', 470975007)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book10', 'author', '1960', '2018-04-14 03:35:59.151894', '2018-04-14 03:35:59.151894', 685710308)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:35:59.219987"], ["updated_at", "2018-04-14 03:35:59.219987"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:35:59.227864"], ["updated_at", "2018-04-14 03:35:59.227864"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:35:59.241914"], ["updated_at", "2018-04-14 03:35:59.241914"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:40:00.529187', '2018-04-14 03:40:00.529187', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:40:00.529187', '2018-04-14 03:40:00.529187', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:40:00.529187', '2018-04-14 03:40:00.529187', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:40:00.529187', '2018-04-14 03:40:00.529187', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:40:00.529187', '2018-04-14 03:40:00.529187', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:40:00.529187', '2018-04-14 03:40:00.529187', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:40:00.529187', '2018-04-14 03:40:00.529187', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:40:00.529187', '2018-04-14 03:40:00.529187', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:40:00.529187', '2018-04-14 03:40:00.529187', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 943559701, 42601833, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:40:00.539948', '2018-04-14 03:40:00.539948', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:40:00.556702', '2018-04-14 03:40:00.556702', 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:40:00.556702', '2018-04-14 03:40:00.556702', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:40:00.556702', '2018-04-14 03:40:00.556702', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:40:00.556702', '2018-04-14 03:40:00.556702', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:40:00.556702', '2018-04-14 03:40:00.556702', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:40:00.556702', '2018-04-14 03:40:00.556702', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:40:00.556702', '2018-04-14 03:40:00.556702', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:40:00.556702', '2018-04-14 03:40:00.556702', 470975007)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book10', 'author', '1960', '2018-04-14 03:40:00.556702', '2018-04-14 03:40:00.556702', 685710308)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:40:00.602728"], ["updated_at", "2018-04-14 03:40:00.602728"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:40:00.607978"], ["updated_at", "2018-04-14 03:40:00.607978"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.6ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "Liquid Spirit"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:41:32.133195', '2018-04-14 03:41:32.133195', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:41:32.133195', '2018-04-14 03:41:32.133195', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:41:32.133195', '2018-04-14 03:41:32.133195', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:41:32.133195', '2018-04-14 03:41:32.133195', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:41:32.133195', '2018-04-14 03:41:32.133195', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:41:32.133195', '2018-04-14 03:41:32.133195', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:41:32.133195', '2018-04-14 03:41:32.133195', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:41:32.133195', '2018-04-14 03:41:32.133195', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:41:32.133195', '2018-04-14 03:41:32.133195', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 943559701, 42601833, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:41:32.144499', '2018-04-14 03:41:32.144499', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:41:32.161384', '2018-04-14 03:41:32.161384', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:41:32.161384', '2018-04-14 03:41:32.161384', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:41:32.161384', '2018-04-14 03:41:32.161384', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:41:32.161384', '2018-04-14 03:41:32.161384', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:41:32.161384', '2018-04-14 03:41:32.161384', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:41:32.161384', '2018-04-14 03:41:32.161384', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:41:32.161384', '2018-04-14 03:41:32.161384', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:41:32.161384', '2018-04-14 03:41:32.161384', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book10', 'author', '1960', '2018-04-14 03:41:32.161384', '2018-04-14 03:41:32.161384', 685710308)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:41:32.208624"], ["updated_at", "2018-04-14 03:41:32.208624"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:41:32.217371"], ["updated_at", "2018-04-14 03:41:32.217371"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:41:32.221528"], ["updated_at", "2018-04-14 03:41:32.221528"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "Liquid Spirit"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:42:16.536006', '2018-04-14 03:42:16.536006', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:42:16.536006', '2018-04-14 03:42:16.536006', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:42:16.536006', '2018-04-14 03:42:16.536006', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:42:16.536006', '2018-04-14 03:42:16.536006', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:42:16.536006', '2018-04-14 03:42:16.536006', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:42:16.536006', '2018-04-14 03:42:16.536006', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:42:16.536006', '2018-04-14 03:42:16.536006', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:42:16.536006', '2018-04-14 03:42:16.536006', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:42:16.536006', '2018-04-14 03:42:16.536006', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 943559701, 42601833, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:42:16.547204', '2018-04-14 03:42:16.547204', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:42:16.567698', '2018-04-14 03:42:16.567698', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:42:16.567698', '2018-04-14 03:42:16.567698', 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:42:16.567698', '2018-04-14 03:42:16.567698', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:42:16.567698', '2018-04-14 03:42:16.567698', 363122234)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:42:16.567698', '2018-04-14 03:42:16.567698', 212705166)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:42:16.567698', '2018-04-14 03:42:16.567698', 1001041691)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:42:16.567698', '2018-04-14 03:42:16.567698', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:42:16.567698', '2018-04-14 03:42:16.567698', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book10', 'author', '1960', '2018-04-14 03:42:16.567698', '2018-04-14 03:42:16.567698', 685710308)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "Liquid Spirit"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:42:16.693758"], ["updated_at", "2018-04-14 03:42:16.693758"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:42:16.702214"], ["updated_at", "2018-04-14 03:42:16.702214"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:42:16.706810"], ["updated_at", "2018-04-14 03:42:16.706810"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.8ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:43:31.922399', '2018-04-14 03:43:31.922399', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:43:31.922399', '2018-04-14 03:43:31.922399', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:43:31.922399', '2018-04-14 03:43:31.922399', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:43:31.922399', '2018-04-14 03:43:31.922399', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:43:31.922399', '2018-04-14 03:43:31.922399', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:43:31.922399', '2018-04-14 03:43:31.922399', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:43:31.922399', '2018-04-14 03:43:31.922399', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:43:31.922399', '2018-04-14 03:43:31.922399', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:43:31.922399', '2018-04-14 03:43:31.922399', 42601833)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:43:31.933499', '2018-04-14 03:43:31.933499', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:43:31.949803', '2018-04-14 03:43:31.949803', 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:43:31.949803', '2018-04-14 03:43:31.949803', 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:43:31.949803', '2018-04-14 03:43:31.949803', 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:43:31.949803', '2018-04-14 03:43:31.949803', 363122234)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:43:31.949803', '2018-04-14 03:43:31.949803', 212705166)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:43:31.949803', '2018-04-14 03:43:31.949803', 1001041691)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:43:31.949803', '2018-04-14 03:43:31.949803', 722842252)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:43:31.949803', '2018-04-14 03:43:31.949803', 470975007)[0m
  [1m[36mFixture Insert (3.5ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book10', 'author', '1960', '2018-04-14 03:43:31.949803', '2018-04-14 03:43:31.949803', 685710308)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:43:32.007797"], ["updated_at", "2018-04-14 03:43:32.007797"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:43:32.018012"], ["updated_at", "2018-04-14 03:43:32.018012"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:43:32.024621"], ["updated_at", "2018-04-14 03:43:32.024621"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:44:43.262314', '2018-04-14 03:44:43.262314', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:44:43.262314', '2018-04-14 03:44:43.262314', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:44:43.262314', '2018-04-14 03:44:43.262314', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:44:43.262314', '2018-04-14 03:44:43.262314', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:44:43.262314', '2018-04-14 03:44:43.262314', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:44:43.262314', '2018-04-14 03:44:43.262314', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:44:43.262314', '2018-04-14 03:44:43.262314', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:44:43.262314', '2018-04-14 03:44:43.262314', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:44:43.262314', '2018-04-14 03:44:43.262314', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:44:43.273089', '2018-04-14 03:44:43.273089', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:44:43.290418', '2018-04-14 03:44:43.290418', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:44:43.290418', '2018-04-14 03:44:43.290418', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:44:43.290418', '2018-04-14 03:44:43.290418', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:44:43.290418', '2018-04-14 03:44:43.290418', 363122234)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:44:43.290418', '2018-04-14 03:44:43.290418', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:44:43.290418', '2018-04-14 03:44:43.290418', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:44:43.290418', '2018-04-14 03:44:43.290418', 722842252)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:44:43.290418', '2018-04-14 03:44:43.290418', 470975007)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book10', 'author', '1960', '2018-04-14 03:44:43.290418', '2018-04-14 03:44:43.290418', 685710308)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[36mWork Load (1.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:44:43.399924"], ["updated_at", "2018-04-14 03:44:43.399924"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:44:43.414466"], ["updated_at", "2018-04-14 03:44:43.414466"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:44:43.418540"], ["updated_at", "2018-04-14 03:44:43.418540"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:46:41.272971', '2018-04-14 03:46:41.272971', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:46:41.272971', '2018-04-14 03:46:41.272971', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:46:41.272971', '2018-04-14 03:46:41.272971', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:46:41.272971', '2018-04-14 03:46:41.272971', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:46:41.272971', '2018-04-14 03:46:41.272971', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:46:41.272971', '2018-04-14 03:46:41.272971', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:46:41.272971', '2018-04-14 03:46:41.272971', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:46:41.272971', '2018-04-14 03:46:41.272971', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:46:41.272971', '2018-04-14 03:46:41.272971', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:46:41.283774', '2018-04-14 03:46:41.283774', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:46:41.300479', '2018-04-14 03:46:41.300479', 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:46:41.300479', '2018-04-14 03:46:41.300479', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:46:41.300479', '2018-04-14 03:46:41.300479', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:46:41.300479', '2018-04-14 03:46:41.300479', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:46:41.300479', '2018-04-14 03:46:41.300479', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:46:41.300479', '2018-04-14 03:46:41.300479', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:46:41.300479', '2018-04-14 03:46:41.300479', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:46:41.300479', '2018-04-14 03:46:41.300479', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book10', 'author', '1960', '2018-04-14 03:46:41.300479', '2018-04-14 03:46:41.300479', 685710308)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:46:41.386792"], ["updated_at", "2018-04-14 03:46:41.386792"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:46:41.398702"], ["updated_at", "2018-04-14 03:46:41.398702"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:46:41.405766"], ["updated_at", "2018-04-14 03:46:41.405766"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:46:41.414784"], ["updated_at", "2018-04-14 03:46:41.414784"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:46:41.420852"], ["updated_at", "2018-04-14 03:46:41.420852"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227987]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:49:31.987399', '2018-04-14 03:49:31.987399', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:49:31.987399', '2018-04-14 03:49:31.987399', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:49:31.987399', '2018-04-14 03:49:31.987399', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:49:31.987399', '2018-04-14 03:49:31.987399', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:49:31.987399', '2018-04-14 03:49:31.987399', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:49:31.987399', '2018-04-14 03:49:31.987399', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:49:31.987399', '2018-04-14 03:49:31.987399', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:49:31.987399', '2018-04-14 03:49:31.987399', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:49:31.987399', '2018-04-14 03:49:31.987399', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:49:31.997996', '2018-04-14 03:49:31.997996', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:49:32.015326', '2018-04-14 03:49:32.015326', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:49:32.015326', '2018-04-14 03:49:32.015326', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:49:32.015326', '2018-04-14 03:49:32.015326', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:49:32.015326', '2018-04-14 03:49:32.015326', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:49:32.015326', '2018-04-14 03:49:32.015326', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:49:32.015326', '2018-04-14 03:49:32.015326', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:49:32.015326', '2018-04-14 03:49:32.015326', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:49:32.015326', '2018-04-14 03:49:32.015326', 470975007)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Hunger', 'author', '1960', '2018-04-14 03:49:32.015326', '2018-04-14 03:49:32.015326', 685710308)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:49:32.052384"], ["updated_at", "2018-04-14 03:49:32.052384"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:49:32.062163"], ["updated_at", "2018-04-14 03:49:32.062163"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227983]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227984]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:49:32.081778"], ["updated_at", "2018-04-14 03:49:32.081778"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:49:32.086074"], ["updated_at", "2018-04-14 03:49:32.086074"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227986], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:51:06.073311', '2018-04-14 03:51:06.073311', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:51:06.073311', '2018-04-14 03:51:06.073311', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:51:06.073311', '2018-04-14 03:51:06.073311', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:51:06.073311', '2018-04-14 03:51:06.073311', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:51:06.073311', '2018-04-14 03:51:06.073311', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:51:06.073311', '2018-04-14 03:51:06.073311', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:51:06.073311', '2018-04-14 03:51:06.073311', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:51:06.073311', '2018-04-14 03:51:06.073311', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:51:06.073311', '2018-04-14 03:51:06.073311', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:06.083609', '2018-04-14 03:51:06.083609', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:51:06.099288', '2018-04-14 03:51:06.099288', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:51:06.099288', '2018-04-14 03:51:06.099288', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:51:06.099288', '2018-04-14 03:51:06.099288', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:51:06.099288', '2018-04-14 03:51:06.099288', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:51:06.099288', '2018-04-14 03:51:06.099288', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:51:06.099288', '2018-04-14 03:51:06.099288', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:51:06.099288', '2018-04-14 03:51:06.099288', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:51:06.099288', '2018-04-14 03:51:06.099288', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Hunger', 'author', '1960', '2018-04-14 03:51:06.099288', '2018-04-14 03:51:06.099288', 347574605)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:51:06.206346"], ["updated_at", "2018-04-14 03:51:06.206346"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:51:06.214070"], ["updated_at", "2018-04-14 03:51:06.214070"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:51:06.223369"], ["updated_at", "2018-04-14 03:51:06.223369"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:51:06.227470"], ["updated_at", "2018-04-14 03:51:06.227470"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227985]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:51:06.245955"], ["updated_at", "2018-04-14 03:51:06.245955"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227987], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:51:31.878806', '2018-04-14 03:51:31.878806', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:51:31.878806', '2018-04-14 03:51:31.878806', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:51:31.878806', '2018-04-14 03:51:31.878806', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:51:31.878806', '2018-04-14 03:51:31.878806', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:51:31.878806', '2018-04-14 03:51:31.878806', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:51:31.878806', '2018-04-14 03:51:31.878806', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:51:31.878806', '2018-04-14 03:51:31.878806', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:51:31.878806', '2018-04-14 03:51:31.878806', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:51:31.878806', '2018-04-14 03:51:31.878806', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 959688446, 188498254, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 417889548, 1010528733, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 389926865, 576709754, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 540737350, 358143215, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 814080729, 206669143, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 126014020, 305467638, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 1025419005, 624042081, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 169449068, 898448884, 320574587)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 319866836, 42601833, 320574587)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 605550409, 794176482, 320574587)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:51:31.892779', '2018-04-14 03:51:31.892779', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:51:31.907258', '2018-04-14 03:51:31.907258', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:51:31.907258', '2018-04-14 03:51:31.907258', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:51:31.907258', '2018-04-14 03:51:31.907258', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:51:31.907258', '2018-04-14 03:51:31.907258', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:51:31.907258', '2018-04-14 03:51:31.907258', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:51:31.907258', '2018-04-14 03:51:31.907258', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:51:31.907258', '2018-04-14 03:51:31.907258', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:51:31.907258', '2018-04-14 03:51:31.907258', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Hunger', 'author', '1960', '2018-04-14 03:51:31.907258', '2018-04-14 03:51:31.907258', 347574605)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (1.0ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:51:31.955163"], ["updated_at", "2018-04-14 03:51:31.955163"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:51:31.960358"], ["updated_at", "2018-04-14 03:51:31.960358"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:51:31.968941"], ["updated_at", "2018-04-14 03:51:31.968941"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:52:53.474077', '2018-04-14 03:52:53.474077', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:52:53.474077', '2018-04-14 03:52:53.474077', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:52:53.474077', '2018-04-14 03:52:53.474077', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:52:53.474077', '2018-04-14 03:52:53.474077', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:52:53.474077', '2018-04-14 03:52:53.474077', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:52:53.474077', '2018-04-14 03:52:53.474077', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:52:53.474077', '2018-04-14 03:52:53.474077', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:52:53.474077', '2018-04-14 03:52:53.474077', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:52:53.474077', '2018-04-14 03:52:53.474077', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 319866836, 42601833, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:52:53.484089', '2018-04-14 03:52:53.484089', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:52:53.500286', '2018-04-14 03:52:53.500286', 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:52:53.500286', '2018-04-14 03:52:53.500286', 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:52:53.500286', '2018-04-14 03:52:53.500286', 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:52:53.500286', '2018-04-14 03:52:53.500286', 363122234)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:52:53.500286', '2018-04-14 03:52:53.500286', 212705166)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:52:53.500286', '2018-04-14 03:52:53.500286', 1001041691)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:52:53.500286', '2018-04-14 03:52:53.500286', 722842252)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:52:53.500286', '2018-04-14 03:52:53.500286', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 03:52:53.500286', '2018-04-14 03:52:53.500286', 347574605)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:52:53.550061"], ["updated_at", "2018-04-14 03:52:53.550061"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:52:53.554920"], ["updated_at", "2018-04-14 03:52:53.554920"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:52:53.562925"], ["updated_at", "2018-04-14 03:52:53.562925"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:52:53.567107"], ["updated_at", "2018-04-14 03:52:53.567107"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227985]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:56:17.800078', '2018-04-14 03:56:17.800078', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:56:17.800078', '2018-04-14 03:56:17.800078', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:56:17.800078', '2018-04-14 03:56:17.800078', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:56:17.800078', '2018-04-14 03:56:17.800078', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:56:17.800078', '2018-04-14 03:56:17.800078', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:56:17.800078', '2018-04-14 03:56:17.800078', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:56:17.800078', '2018-04-14 03:56:17.800078', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:56:17.800078', '2018-04-14 03:56:17.800078', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:56:17.800078', '2018-04-14 03:56:17.800078', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:56:17.811546', '2018-04-14 03:56:17.811546', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:56:17.832008', '2018-04-14 03:56:17.832008', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:56:17.832008', '2018-04-14 03:56:17.832008', 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:56:17.832008', '2018-04-14 03:56:17.832008', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:56:17.832008', '2018-04-14 03:56:17.832008', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:56:17.832008', '2018-04-14 03:56:17.832008', 212705166)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:56:17.832008', '2018-04-14 03:56:17.832008', 1001041691)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:56:17.832008', '2018-04-14 03:56:17.832008', 722842252)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:56:17.832008', '2018-04-14 03:56:17.832008', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 03:56:17.832008', '2018-04-14 03:56:17.832008', 347574605)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:56:17.918668"], ["updated_at", "2018-04-14 03:56:17.918668"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:56:17.926127"], ["updated_at", "2018-04-14 03:56:17.926127"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:56:17.933996"], ["updated_at", "2018-04-14 03:56:17.933996"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:56:17.938547"], ["updated_at", "2018-04-14 03:56:17.938547"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227985]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:56:17.961283"], ["updated_at", "2018-04-14 03:56:17.961283"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227987], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 03:57:26.870363', '2018-04-14 03:57:26.870363', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 03:57:26.870363', '2018-04-14 03:57:26.870363', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 03:57:26.870363', '2018-04-14 03:57:26.870363', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 03:57:26.870363', '2018-04-14 03:57:26.870363', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 03:57:26.870363', '2018-04-14 03:57:26.870363', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 03:57:26.870363', '2018-04-14 03:57:26.870363', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 03:57:26.870363', '2018-04-14 03:57:26.870363', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 03:57:26.870363', '2018-04-14 03:57:26.870363', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 03:57:26.870363', '2018-04-14 03:57:26.870363', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 03:57:26.880301', '2018-04-14 03:57:26.880301', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 03:57:26.897309', '2018-04-14 03:57:26.897309', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 03:57:26.897309', '2018-04-14 03:57:26.897309', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 03:57:26.897309', '2018-04-14 03:57:26.897309', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 03:57:26.897309', '2018-04-14 03:57:26.897309', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 03:57:26.897309', '2018-04-14 03:57:26.897309', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 03:57:26.897309', '2018-04-14 03:57:26.897309', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 03:57:26.897309', '2018-04-14 03:57:26.897309', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 03:57:26.897309', '2018-04-14 03:57:26.897309', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 03:57:26.897309', '2018-04-14 03:57:26.897309', 347574605)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:57:26.985310"], ["updated_at", "2018-04-14 03:57:26.985310"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:57:26.990142"], ["updated_at", "2018-04-14 03:57:26.990142"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:57:27.000433"], ["updated_at", "2018-04-14 03:57:27.000433"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:57:27.014136"], ["updated_at", "2018-04-14 03:57:27.014136"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 03:57:27.018886"], ["updated_at", "2018-04-14 03:57:27.018886"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227987]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:03:21.409799', '2018-04-14 04:03:21.409799', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:03:21.409799', '2018-04-14 04:03:21.409799', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:03:21.409799', '2018-04-14 04:03:21.409799', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:03:21.409799', '2018-04-14 04:03:21.409799', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:03:21.409799', '2018-04-14 04:03:21.409799', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:03:21.409799', '2018-04-14 04:03:21.409799', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:03:21.409799', '2018-04-14 04:03:21.409799', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:03:21.409799', '2018-04-14 04:03:21.409799', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:03:21.409799', '2018-04-14 04:03:21.409799', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:03:21.419505', '2018-04-14 04:03:21.419505', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:03:21.435711', '2018-04-14 04:03:21.435711', 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:03:21.435711', '2018-04-14 04:03:21.435711', 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:03:21.435711', '2018-04-14 04:03:21.435711', 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:03:21.435711', '2018-04-14 04:03:21.435711', 363122234)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:03:21.435711', '2018-04-14 04:03:21.435711', 212705166)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:03:21.435711', '2018-04-14 04:03:21.435711', 1001041691)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:03:21.435711', '2018-04-14 04:03:21.435711', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:03:21.435711', '2018-04-14 04:03:21.435711', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:03:21.435711', '2018-04-14 04:03:21.435711', 347574605)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:03:21.506124"], ["updated_at", "2018-04-14 04:03:21.506124"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:03:21.511704"], ["updated_at", "2018-04-14 04:03:21.511704"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227983]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227984]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:03:21.531490"], ["updated_at", "2018-04-14 04:03:21.531490"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:03:21.545373"], ["updated_at", "2018-04-14 04:03:21.545373"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:03:21.549380"], ["updated_at", "2018-04-14 04:03:21.549380"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227986], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227987], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:04:09.537411', '2018-04-14 04:04:09.537411', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:04:09.537411', '2018-04-14 04:04:09.537411', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:04:09.537411', '2018-04-14 04:04:09.537411', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:04:09.537411', '2018-04-14 04:04:09.537411', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:04:09.537411', '2018-04-14 04:04:09.537411', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:04:09.537411', '2018-04-14 04:04:09.537411', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:04:09.537411', '2018-04-14 04:04:09.537411', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:04:09.537411', '2018-04-14 04:04:09.537411', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:04:09.537411', '2018-04-14 04:04:09.537411', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:04:09.548590', '2018-04-14 04:04:09.548590', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:04:09.564671', '2018-04-14 04:04:09.564671', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:04:09.564671', '2018-04-14 04:04:09.564671', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:04:09.564671', '2018-04-14 04:04:09.564671', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:04:09.564671', '2018-04-14 04:04:09.564671', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:04:09.564671', '2018-04-14 04:04:09.564671', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:04:09.564671', '2018-04-14 04:04:09.564671', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:04:09.564671', '2018-04-14 04:04:09.564671', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:04:09.564671', '2018-04-14 04:04:09.564671', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:04:09.564671', '2018-04-14 04:04:09.564671', 347574605)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:04:09.689036"], ["updated_at", "2018-04-14 04:04:09.689036"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:04:09.697920"], ["updated_at", "2018-04-14 04:04:09.697920"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:04:09.701530"], ["updated_at", "2018-04-14 04:04:09.701530"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:04:09.709700"], ["updated_at", "2018-04-14 04:04:09.709700"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:04:09.715297"], ["updated_at", "2018-04-14 04:04:09.715297"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227987]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:09:34.356995', '2018-04-14 04:09:34.356995', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:09:34.356995', '2018-04-14 04:09:34.356995', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:09:34.356995', '2018-04-14 04:09:34.356995', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:09:34.356995', '2018-04-14 04:09:34.356995', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:09:34.356995', '2018-04-14 04:09:34.356995', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:09:34.356995', '2018-04-14 04:09:34.356995', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:09:34.356995', '2018-04-14 04:09:34.356995', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:09:34.356995', '2018-04-14 04:09:34.356995', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:09:34.356995', '2018-04-14 04:09:34.356995', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:09:34.367822', '2018-04-14 04:09:34.367822', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:09:34.383731', '2018-04-14 04:09:34.383731', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:09:34.383731', '2018-04-14 04:09:34.383731', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:09:34.383731', '2018-04-14 04:09:34.383731', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:09:34.383731', '2018-04-14 04:09:34.383731', 363122234)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:09:34.383731', '2018-04-14 04:09:34.383731', 212705166)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:09:34.383731', '2018-04-14 04:09:34.383731', 1001041691)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:09:34.383731', '2018-04-14 04:09:34.383731', 722842252)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:09:34.383731', '2018-04-14 04:09:34.383731', 470975007)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:09:34.383731', '2018-04-14 04:09:34.383731', 347574605)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:09:34.481198"], ["updated_at", "2018-04-14 04:09:34.481198"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:09:34.490163"], ["updated_at", "2018-04-14 04:09:34.490163"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:09:34.494628"], ["updated_at", "2018-04-14 04:09:34.494628"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:09:34.503633"], ["updated_at", "2018-04-14 04:09:34.503633"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:09:34.510046"], ["updated_at", "2018-04-14 04:09:34.510046"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227987]]
  [1m[35mSQL (1.0ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:11:44.234724', '2018-04-14 04:11:44.234724', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:11:44.234724', '2018-04-14 04:11:44.234724', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:11:44.234724', '2018-04-14 04:11:44.234724', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:11:44.234724', '2018-04-14 04:11:44.234724', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:11:44.234724', '2018-04-14 04:11:44.234724', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:11:44.234724', '2018-04-14 04:11:44.234724', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:11:44.234724', '2018-04-14 04:11:44.234724', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:11:44.234724', '2018-04-14 04:11:44.234724', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:11:44.234724', '2018-04-14 04:11:44.234724', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 804212123, 576709754, 922997782)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:11:44.244251', '2018-04-14 04:11:44.244251', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:11:44.260198', '2018-04-14 04:11:44.260198', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:11:44.260198', '2018-04-14 04:11:44.260198', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:11:44.260198', '2018-04-14 04:11:44.260198', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:11:44.260198', '2018-04-14 04:11:44.260198', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:11:44.260198', '2018-04-14 04:11:44.260198', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:11:44.260198', '2018-04-14 04:11:44.260198', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:11:44.260198', '2018-04-14 04:11:44.260198', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:11:44.260198', '2018-04-14 04:11:44.260198', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:11:44.260198', '2018-04-14 04:11:44.260198', 347574605)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:11:44.358874"], ["updated_at", "2018-04-14 04:11:44.358874"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:11:44.363483"], ["updated_at", "2018-04-14 04:11:44.363483"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:11:44.375457"], ["updated_at", "2018-04-14 04:11:44.375457"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:11:44.381841"], ["updated_at", "2018-04-14 04:11:44.381841"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:11:44.386696"], ["updated_at", "2018-04-14 04:11:44.386696"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227987]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:13:12.376871', '2018-04-14 04:13:12.376871', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:13:12.376871', '2018-04-14 04:13:12.376871', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:13:12.376871', '2018-04-14 04:13:12.376871', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:13:12.376871', '2018-04-14 04:13:12.376871', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:13:12.376871', '2018-04-14 04:13:12.376871', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:13:12.376871', '2018-04-14 04:13:12.376871', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:13:12.376871', '2018-04-14 04:13:12.376871', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:13:12.376871', '2018-04-14 04:13:12.376871', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:13:12.376871', '2018-04-14 04:13:12.376871', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (1.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:13:12.386609', '2018-04-14 04:13:12.386609', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:13:12.404042', '2018-04-14 04:13:12.404042', 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:13:12.404042', '2018-04-14 04:13:12.404042', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:13:12.404042', '2018-04-14 04:13:12.404042', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:13:12.404042', '2018-04-14 04:13:12.404042', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:13:12.404042', '2018-04-14 04:13:12.404042', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:13:12.404042', '2018-04-14 04:13:12.404042', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:13:12.404042', '2018-04-14 04:13:12.404042', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:13:12.404042', '2018-04-14 04:13:12.404042', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:13:12.404042', '2018-04-14 04:13:12.404042', 347574605)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:13:12.491217"], ["updated_at", "2018-04-14 04:13:12.491217"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:13:12.502730"], ["updated_at", "2018-04-14 04:13:12.502730"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:13:12.506901"], ["updated_at", "2018-04-14 04:13:12.506901"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:13:12.515966"], ["updated_at", "2018-04-14 04:13:12.515966"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:13:12.522553"], ["updated_at", "2018-04-14 04:13:12.522553"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227987]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:14:01.456201', '2018-04-14 04:14:01.456201', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:14:01.456201', '2018-04-14 04:14:01.456201', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:14:01.456201', '2018-04-14 04:14:01.456201', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:14:01.456201', '2018-04-14 04:14:01.456201', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:14:01.456201', '2018-04-14 04:14:01.456201', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:14:01.456201', '2018-04-14 04:14:01.456201', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:14:01.456201', '2018-04-14 04:14:01.456201', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:14:01.456201', '2018-04-14 04:14:01.456201', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:14:01.456201', '2018-04-14 04:14:01.456201', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:01.466003', '2018-04-14 04:14:01.466003', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:14:01.489155', '2018-04-14 04:14:01.489155', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:14:01.489155', '2018-04-14 04:14:01.489155', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:14:01.489155', '2018-04-14 04:14:01.489155', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:14:01.489155', '2018-04-14 04:14:01.489155', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:14:01.489155', '2018-04-14 04:14:01.489155', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:14:01.489155', '2018-04-14 04:14:01.489155', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:14:01.489155', '2018-04-14 04:14:01.489155', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:14:01.489155', '2018-04-14 04:14:01.489155', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:14:01.489155', '2018-04-14 04:14:01.489155', 685710308)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 685710308]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:01.563841"], ["updated_at", "2018-04-14 04:14:01.563841"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (1.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:01.574419"], ["updated_at", "2018-04-14 04:14:01.574419"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:01.578459"], ["updated_at", "2018-04-14 04:14:01.578459"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:01.589072"], ["updated_at", "2018-04-14 04:14:01.589072"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:01.593540"], ["updated_at", "2018-04-14 04:14:01.593540"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227987]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:14:29.725465', '2018-04-14 04:14:29.725465', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:14:29.725465', '2018-04-14 04:14:29.725465', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:14:29.725465', '2018-04-14 04:14:29.725465', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:14:29.725465', '2018-04-14 04:14:29.725465', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:14:29.725465', '2018-04-14 04:14:29.725465', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:14:29.725465', '2018-04-14 04:14:29.725465', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:14:29.725465', '2018-04-14 04:14:29.725465', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:14:29.725465', '2018-04-14 04:14:29.725465', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:14:29.725465', '2018-04-14 04:14:29.725465', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (1.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:29.735016', '2018-04-14 04:14:29.735016', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.7ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:14:29.751075', '2018-04-14 04:14:29.751075', 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:14:29.751075', '2018-04-14 04:14:29.751075', 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:14:29.751075', '2018-04-14 04:14:29.751075', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:14:29.751075', '2018-04-14 04:14:29.751075', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:14:29.751075', '2018-04-14 04:14:29.751075', 212705166)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:14:29.751075', '2018-04-14 04:14:29.751075', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:14:29.751075', '2018-04-14 04:14:29.751075', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:14:29.751075', '2018-04-14 04:14:29.751075', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:14:29.751075', '2018-04-14 04:14:29.751075', 347574605)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:29.878517"], ["updated_at", "2018-04-14 04:14:29.878517"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:29.883030"], ["updated_at", "2018-04-14 04:14:29.883030"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:29.891711"], ["updated_at", "2018-04-14 04:14:29.891711"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:29.898536"], ["updated_at", "2018-04-14 04:14:29.898536"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:29.904549"], ["updated_at", "2018-04-14 04:14:29.904549"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227987]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:14:59.069407', '2018-04-14 04:14:59.069407', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:14:59.069407', '2018-04-14 04:14:59.069407', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:14:59.069407', '2018-04-14 04:14:59.069407', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:14:59.069407', '2018-04-14 04:14:59.069407', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:14:59.069407', '2018-04-14 04:14:59.069407', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:14:59.069407', '2018-04-14 04:14:59.069407', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:14:59.069407', '2018-04-14 04:14:59.069407', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:14:59.069407', '2018-04-14 04:14:59.069407', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:14:59.069407', '2018-04-14 04:14:59.069407', 42601833)[0m
  [1m[36mFixture Delete (0.6ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:14:59.080183', '2018-04-14 04:14:59.080183', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:14:59.096736', '2018-04-14 04:14:59.096736', 603819915)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:14:59.096736', '2018-04-14 04:14:59.096736', 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:14:59.096736', '2018-04-14 04:14:59.096736', 581172899)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:14:59.096736', '2018-04-14 04:14:59.096736', 363122234)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:14:59.096736', '2018-04-14 04:14:59.096736', 212705166)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:14:59.096736', '2018-04-14 04:14:59.096736', 1001041691)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:14:59.096736', '2018-04-14 04:14:59.096736', 722842252)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:14:59.096736', '2018-04-14 04:14:59.096736', 470975007)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:14:59.096736', '2018-04-14 04:14:59.096736', 347574605)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (1.6ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.5ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:59.186444"], ["updated_at", "2018-04-14 04:14:59.186444"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:59.191892"], ["updated_at", "2018-04-14 04:14:59.191892"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227983]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227984]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:59.213494"], ["updated_at", "2018-04-14 04:14:59.213494"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:59.224632"], ["updated_at", "2018-04-14 04:14:59.224632"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:14:59.228450"], ["updated_at", "2018-04-14 04:14:59.228450"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227986], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227987], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:16:25.124872', '2018-04-14 04:16:25.124872', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:16:25.124872', '2018-04-14 04:16:25.124872', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:16:25.124872', '2018-04-14 04:16:25.124872', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:16:25.124872', '2018-04-14 04:16:25.124872', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:16:25.124872', '2018-04-14 04:16:25.124872', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:16:25.124872', '2018-04-14 04:16:25.124872', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:16:25.124872', '2018-04-14 04:16:25.124872', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:16:25.124872', '2018-04-14 04:16:25.124872', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:16:25.124872', '2018-04-14 04:16:25.124872', 42601833)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:16:25.135075', '2018-04-14 04:16:25.135075', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:16:25.151716', '2018-04-14 04:16:25.151716', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:16:25.151716', '2018-04-14 04:16:25.151716', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:16:25.151716', '2018-04-14 04:16:25.151716', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:16:25.151716', '2018-04-14 04:16:25.151716', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:16:25.151716', '2018-04-14 04:16:25.151716', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:16:25.151716', '2018-04-14 04:16:25.151716', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:16:25.151716', '2018-04-14 04:16:25.151716', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:16:25.151716', '2018-04-14 04:16:25.151716', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:16:25.151716', '2018-04-14 04:16:25.151716', 347574605)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:16:25.277350"], ["updated_at", "2018-04-14 04:16:25.277350"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:16:25.285872"], ["updated_at", "2018-04-14 04:16:25.285872"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:16:25.292270"], ["updated_at", "2018-04-14 04:16:25.292270"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:16:25.299624"], ["updated_at", "2018-04-14 04:16:25.299624"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:16:25.305120"], ["updated_at", "2018-04-14 04:16:25.305120"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227987]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.4ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:18:00.221583', '2018-04-14 04:18:00.221583', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:18:00.221583', '2018-04-14 04:18:00.221583', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:18:00.221583', '2018-04-14 04:18:00.221583', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:18:00.221583', '2018-04-14 04:18:00.221583', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:18:00.221583', '2018-04-14 04:18:00.221583', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:18:00.221583', '2018-04-14 04:18:00.221583', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:18:00.221583', '2018-04-14 04:18:00.221583', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:18:00.221583', '2018-04-14 04:18:00.221583', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:18:00.221583', '2018-04-14 04:18:00.221583', 42601833)[0m
  [1m[36mFixture Delete (0.5ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:00.232405', '2018-04-14 04:18:00.232405', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:18:00.249579', '2018-04-14 04:18:00.249579', 603819915)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:18:00.249579', '2018-04-14 04:18:00.249579', 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:18:00.249579', '2018-04-14 04:18:00.249579', 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:18:00.249579', '2018-04-14 04:18:00.249579', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:18:00.249579', '2018-04-14 04:18:00.249579', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:18:00.249579', '2018-04-14 04:18:00.249579', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:18:00.249579', '2018-04-14 04:18:00.249579', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:18:00.249579', '2018-04-14 04:18:00.249579', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:18:00.249579', '2018-04-14 04:18:00.249579', 347574605)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:18:00.349011"], ["updated_at", "2018-04-14 04:18:00.349011"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:18:00.356812"], ["updated_at", "2018-04-14 04:18:00.356812"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:18:00.361144"], ["updated_at", "2018-04-14 04:18:00.361144"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227984]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227985]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:18:00.381804"], ["updated_at", "2018-04-14 04:18:00.381804"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:18:00.387407"], ["updated_at", "2018-04-14 04:18:00.387407"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227986], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227987], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:18:50.564958', '2018-04-14 04:18:50.564958', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:18:50.564958', '2018-04-14 04:18:50.564958', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:18:50.564958', '2018-04-14 04:18:50.564958', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:18:50.564958', '2018-04-14 04:18:50.564958', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:18:50.564958', '2018-04-14 04:18:50.564958', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:18:50.564958', '2018-04-14 04:18:50.564958', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:18:50.564958', '2018-04-14 04:18:50.564958', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:18:50.564958', '2018-04-14 04:18:50.564958', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:18:50.564958', '2018-04-14 04:18:50.564958', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:18:50.576209', '2018-04-14 04:18:50.576209', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:18:50.591953', '2018-04-14 04:18:50.591953', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:18:50.591953', '2018-04-14 04:18:50.591953', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:18:50.591953', '2018-04-14 04:18:50.591953', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:18:50.591953', '2018-04-14 04:18:50.591953', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:18:50.591953', '2018-04-14 04:18:50.591953', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:18:50.591953', '2018-04-14 04:18:50.591953', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:18:50.591953', '2018-04-14 04:18:50.591953', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:18:50.591953', '2018-04-14 04:18:50.591953', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:18:50.591953', '2018-04-14 04:18:50.591953', 347574605)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.8ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:18:50.700084"], ["updated_at", "2018-04-14 04:18:50.700084"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:18:50.705035"], ["updated_at", "2018-04-14 04:18:50.705035"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227983]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227984]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:18:50.729181"], ["updated_at", "2018-04-14 04:18:50.729181"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:18:50.741743"], ["updated_at", "2018-04-14 04:18:50.741743"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:18:50.746350"], ["updated_at", "2018-04-14 04:18:50.746350"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227986], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227987], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:20:06.577862', '2018-04-14 04:20:06.577862', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:20:06.577862', '2018-04-14 04:20:06.577862', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:20:06.577862', '2018-04-14 04:20:06.577862', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:20:06.577862', '2018-04-14 04:20:06.577862', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:20:06.577862', '2018-04-14 04:20:06.577862', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:20:06.577862', '2018-04-14 04:20:06.577862', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:20:06.577862', '2018-04-14 04:20:06.577862', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:20:06.577862', '2018-04-14 04:20:06.577862', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:20:06.577862', '2018-04-14 04:20:06.577862', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:20:06.591534', '2018-04-14 04:20:06.591534', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:20:06.607102', '2018-04-14 04:20:06.607102', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:20:06.607102', '2018-04-14 04:20:06.607102', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:20:06.607102', '2018-04-14 04:20:06.607102', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:20:06.607102', '2018-04-14 04:20:06.607102', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:20:06.607102', '2018-04-14 04:20:06.607102', 212705166)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:20:06.607102', '2018-04-14 04:20:06.607102', 1001041691)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:20:06.607102', '2018-04-14 04:20:06.607102', 722842252)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:20:06.607102', '2018-04-14 04:20:06.607102', 470975007)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:20:06.607102', '2018-04-14 04:20:06.607102', 347574605)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:20:06.663159"], ["updated_at", "2018-04-14 04:20:06.663159"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:20:06.671921"], ["updated_at", "2018-04-14 04:20:06.671921"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:20:06.676892"], ["updated_at", "2018-04-14 04:20:06.676892"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:20:06.685926"], ["updated_at", "2018-04-14 04:20:06.685926"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:20:06.693086"], ["updated_at", "2018-04-14 04:20:06.693086"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227987]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:21:46.397773', '2018-04-14 04:21:46.397773', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:21:46.397773', '2018-04-14 04:21:46.397773', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:21:46.397773', '2018-04-14 04:21:46.397773', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:21:46.397773', '2018-04-14 04:21:46.397773', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:21:46.397773', '2018-04-14 04:21:46.397773', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:21:46.397773', '2018-04-14 04:21:46.397773', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:21:46.397773', '2018-04-14 04:21:46.397773', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:21:46.397773', '2018-04-14 04:21:46.397773', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:21:46.397773', '2018-04-14 04:21:46.397773', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:21:46.407570', '2018-04-14 04:21:46.407570', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:21:46.423132', '2018-04-14 04:21:46.423132', 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:21:46.423132', '2018-04-14 04:21:46.423132', 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:21:46.423132', '2018-04-14 04:21:46.423132', 581172899)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:21:46.423132', '2018-04-14 04:21:46.423132', 363122234)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:21:46.423132', '2018-04-14 04:21:46.423132', 212705166)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:21:46.423132', '2018-04-14 04:21:46.423132', 1001041691)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:21:46.423132', '2018-04-14 04:21:46.423132', 722842252)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:21:46.423132', '2018-04-14 04:21:46.423132', 470975007)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:21:46.423132', '2018-04-14 04:21:46.423132', 347574605)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book3"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:21:46.531753"], ["updated_at", "2018-04-14 04:21:46.531753"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:21:46.536986"], ["updated_at", "2018-04-14 04:21:46.536986"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:21:46.549529"], ["updated_at", "2018-04-14 04:21:46.549529"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:21:46.556145"], ["updated_at", "2018-04-14 04:21:46.556145"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:21:46.560953"], ["updated_at", "2018-04-14 04:21:46.560953"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227986]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227987]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:22:44.573799', '2018-04-14 04:22:44.573799', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:22:44.573799', '2018-04-14 04:22:44.573799', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:22:44.573799', '2018-04-14 04:22:44.573799', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:22:44.573799', '2018-04-14 04:22:44.573799', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:22:44.573799', '2018-04-14 04:22:44.573799', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:22:44.573799', '2018-04-14 04:22:44.573799', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:22:44.573799', '2018-04-14 04:22:44.573799', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:22:44.573799', '2018-04-14 04:22:44.573799', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:22:44.573799', '2018-04-14 04:22:44.573799', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:22:44.584641', '2018-04-14 04:22:44.584641', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:22:44.601947', '2018-04-14 04:22:44.601947', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:22:44.601947', '2018-04-14 04:22:44.601947', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:22:44.601947', '2018-04-14 04:22:44.601947', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:22:44.601947', '2018-04-14 04:22:44.601947', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:22:44.601947', '2018-04-14 04:22:44.601947', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:22:44.601947', '2018-04-14 04:22:44.601947', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:22:44.601947', '2018-04-14 04:22:44.601947', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:22:44.601947', '2018-04-14 04:22:44.601947', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:22:44.601947', '2018-04-14 04:22:44.601947', 347574605)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book3"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book3"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:22:44.720532"], ["updated_at", "2018-04-14 04:22:44.720532"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:22:44.729505"], ["updated_at", "2018-04-14 04:22:44.729505"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:22:44.735172"], ["updated_at", "2018-04-14 04:22:44.735172"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227984]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227985]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:22:44.755717"], ["updated_at", "2018-04-14 04:22:44.755717"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:22:44.759837"], ["updated_at", "2018-04-14 04:22:44.759837"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227986], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227987], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:23:38.627627', '2018-04-14 04:23:38.627627', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:23:38.627627', '2018-04-14 04:23:38.627627', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:23:38.627627', '2018-04-14 04:23:38.627627', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:23:38.627627', '2018-04-14 04:23:38.627627', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:23:38.627627', '2018-04-14 04:23:38.627627', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:23:38.627627', '2018-04-14 04:23:38.627627', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:23:38.627627', '2018-04-14 04:23:38.627627', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:23:38.627627', '2018-04-14 04:23:38.627627', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:23:38.627627', '2018-04-14 04:23:38.627627', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:23:38.638026', '2018-04-14 04:23:38.638026', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:23:38.653582', '2018-04-14 04:23:38.653582', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:23:38.653582', '2018-04-14 04:23:38.653582', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:23:38.653582', '2018-04-14 04:23:38.653582', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:23:38.653582', '2018-04-14 04:23:38.653582', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:23:38.653582', '2018-04-14 04:23:38.653582', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:23:38.653582', '2018-04-14 04:23:38.653582', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:23:38.653582', '2018-04-14 04:23:38.653582', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:23:38.653582', '2018-04-14 04:23:38.653582', 470975007)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:23:38.653582', '2018-04-14 04:23:38.653582', 347574605)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:23:38.743874"], ["updated_at", "2018-04-14 04:23:38.743874"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:23:38.749485"], ["updated_at", "2018-04-14 04:23:38.749485"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.5ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227983]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227984]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (1.5ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:23:38.770590"], ["updated_at", "2018-04-14 04:23:38.770590"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:23:38.781974"], ["updated_at", "2018-04-14 04:23:38.781974"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:23:38.786444"], ["updated_at", "2018-04-14 04:23:38.786444"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227986], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227987], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWork Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book3"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book3"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:28:19.534987', '2018-04-14 04:28:19.534987', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:28:19.534987', '2018-04-14 04:28:19.534987', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:28:19.534987', '2018-04-14 04:28:19.534987', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:28:19.534987', '2018-04-14 04:28:19.534987', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:28:19.534987', '2018-04-14 04:28:19.534987', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:28:19.534987', '2018-04-14 04:28:19.534987', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:28:19.534987', '2018-04-14 04:28:19.534987', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:28:19.534987', '2018-04-14 04:28:19.534987', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:28:19.534987', '2018-04-14 04:28:19.534987', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:28:19.545523', '2018-04-14 04:28:19.545523', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:28:19.561371', '2018-04-14 04:28:19.561371', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:28:19.561371', '2018-04-14 04:28:19.561371', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:28:19.561371', '2018-04-14 04:28:19.561371', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:28:19.561371', '2018-04-14 04:28:19.561371', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:28:19.561371', '2018-04-14 04:28:19.561371', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:28:19.561371', '2018-04-14 04:28:19.561371', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:28:19.561371', '2018-04-14 04:28:19.561371', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:28:19.561371', '2018-04-14 04:28:19.561371', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:28:19.561371', '2018-04-14 04:28:19.561371', 347574605)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.6ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:28:19.612631"], ["updated_at", "2018-04-14 04:28:19.612631"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:28:19.620316"], ["updated_at", "2018-04-14 04:28:19.620316"], ["work_id", 1019702018], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:28:19.624904"], ["updated_at", "2018-04-14 04:28:19.624904"], ["work_id", 1019702018], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227984]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 1062227985]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:28:19.642036"], ["updated_at", "2018-04-14 04:28:19.642036"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:28:19.646559"], ["updated_at", "2018-04-14 04:28:19.646559"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227986], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227987], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book3"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book3"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:29:21.776420', '2018-04-14 04:29:21.776420', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:29:21.776420', '2018-04-14 04:29:21.776420', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:29:21.776420', '2018-04-14 04:29:21.776420', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:29:21.776420', '2018-04-14 04:29:21.776420', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:29:21.776420', '2018-04-14 04:29:21.776420', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:29:21.776420', '2018-04-14 04:29:21.776420', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:29:21.776420', '2018-04-14 04:29:21.776420', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:29:21.776420', '2018-04-14 04:29:21.776420', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:29:21.776420', '2018-04-14 04:29:21.776420', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:21.786590', '2018-04-14 04:29:21.786590', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:29:21.808707', '2018-04-14 04:29:21.808707', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:29:21.808707', '2018-04-14 04:29:21.808707', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:29:21.808707', '2018-04-14 04:29:21.808707', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:29:21.808707', '2018-04-14 04:29:21.808707', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:29:21.808707', '2018-04-14 04:29:21.808707', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:29:21.808707', '2018-04-14 04:29:21.808707', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:29:21.808707', '2018-04-14 04:29:21.808707', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:29:21.808707', '2018-04-14 04:29:21.808707', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:29:21.808707', '2018-04-14 04:29:21.808707', 347574605)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 1019702018 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:29:21.865268"], ["updated_at", "2018-04-14 04:29:21.865268"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:29:21.876077"], ["updated_at", "2018-04-14 04:29:21.876077"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 358143215], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:29:21.881846"], ["updated_at", "2018-04-14 04:29:21.881846"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 358143215], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book3"], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:29:47.752938', '2018-04-14 04:29:47.752938', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:29:47.752938', '2018-04-14 04:29:47.752938', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:29:47.752938', '2018-04-14 04:29:47.752938', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:29:47.752938', '2018-04-14 04:29:47.752938', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:29:47.752938', '2018-04-14 04:29:47.752938', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:29:47.752938', '2018-04-14 04:29:47.752938', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:29:47.752938', '2018-04-14 04:29:47.752938', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:29:47.752938', '2018-04-14 04:29:47.752938', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:29:47.752938', '2018-04-14 04:29:47.752938', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.6ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:29:47.762512', '2018-04-14 04:29:47.762512', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:29:47.778350', '2018-04-14 04:29:47.778350', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:29:47.778350', '2018-04-14 04:29:47.778350', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:29:47.778350', '2018-04-14 04:29:47.778350', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:29:47.778350', '2018-04-14 04:29:47.778350', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:29:47.778350', '2018-04-14 04:29:47.778350', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:29:47.778350', '2018-04-14 04:29:47.778350', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:29:47.778350', '2018-04-14 04:29:47.778350', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:29:47.778350', '2018-04-14 04:29:47.778350', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:29:47.778350', '2018-04-14 04:29:47.778350', 347574605)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book11"], ["category", "album"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["category", "album"], ["title", "book11"], ["creator", "author"], ["publication_year", "1960"], ["description", "good book"], ["created_at", "2018-04-14 04:29:47.844690"], ["updated_at", "2018-04-14 04:29:47.844690"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "book11"], ["id", 1019702019], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:29:47.866929"], ["updated_at", "2018-04-14 04:29:47.866929"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:29:47.880122"], ["updated_at", "2018-04-14 04:29:47.880122"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 358143215], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:29:47.885901"], ["updated_at", "2018-04-14 04:29:47.885901"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 358143215], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 1019702018 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:30:45.414925', '2018-04-14 04:30:45.414925', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:30:45.414925', '2018-04-14 04:30:45.414925', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:30:45.414925', '2018-04-14 04:30:45.414925', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:30:45.414925', '2018-04-14 04:30:45.414925', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:30:45.414925', '2018-04-14 04:30:45.414925', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:30:45.414925', '2018-04-14 04:30:45.414925', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:30:45.414925', '2018-04-14 04:30:45.414925', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:30:45.414925', '2018-04-14 04:30:45.414925', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:30:45.414925', '2018-04-14 04:30:45.414925', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:30:45.424836', '2018-04-14 04:30:45.424836', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:30:45.439347', '2018-04-14 04:30:45.439347', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:30:45.439347', '2018-04-14 04:30:45.439347', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:30:45.439347', '2018-04-14 04:30:45.439347', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:30:45.439347', '2018-04-14 04:30:45.439347', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:30:45.439347', '2018-04-14 04:30:45.439347', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:30:45.439347', '2018-04-14 04:30:45.439347', 1001041691)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:30:45.439347', '2018-04-14 04:30:45.439347', 722842252)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:30:45.439347', '2018-04-14 04:30:45.439347', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:30:45.439347', '2018-04-14 04:30:45.439347', 347574605)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 576709754], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 576709754], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 1019702018 LIMIT $2[0m  [["user_id", 576709754], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (1.0ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:30:45.511352"], ["updated_at", "2018-04-14 04:30:45.511352"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:30:45.525213"], ["updated_at", "2018-04-14 04:30:45.525213"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 358143215], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:30:45.531634"], ["updated_at", "2018-04-14 04:30:45.531634"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 358143215], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (1.6ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book11"], ["category", "album"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["category", "album"], ["title", "book11"], ["creator", "author"], ["publication_year", "1960"], ["description", "good book"], ["created_at", "2018-04-14 04:30:45.572505"], ["updated_at", "2018-04-14 04:30:45.572505"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "book11"], ["id", 1019702019], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:34:45.603548', '2018-04-14 04:34:45.603548', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:34:45.603548', '2018-04-14 04:34:45.603548', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:34:45.603548', '2018-04-14 04:34:45.603548', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:34:45.603548', '2018-04-14 04:34:45.603548', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:34:45.603548', '2018-04-14 04:34:45.603548', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:34:45.603548', '2018-04-14 04:34:45.603548', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:34:45.603548', '2018-04-14 04:34:45.603548', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:34:45.603548', '2018-04-14 04:34:45.603548', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:34:45.603548', '2018-04-14 04:34:45.603548', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:34:45.613255', '2018-04-14 04:34:45.613255', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:34:45.629355', '2018-04-14 04:34:45.629355', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:34:45.629355', '2018-04-14 04:34:45.629355', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:34:45.629355', '2018-04-14 04:34:45.629355', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:34:45.629355', '2018-04-14 04:34:45.629355', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:34:45.629355', '2018-04-14 04:34:45.629355', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:34:45.629355', '2018-04-14 04:34:45.629355', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:34:45.629355', '2018-04-14 04:34:45.629355', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:34:45.629355', '2018-04-14 04:34:45.629355', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:34:45.629355', '2018-04-14 04:34:45.629355', 347574605)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:34:45.675898"], ["updated_at", "2018-04-14 04:34:45.675898"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:34:45.687305"], ["updated_at", "2018-04-14 04:34:45.687305"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 358143215], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:34:45.693111"], ["updated_at", "2018-04-14 04:34:45.693111"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 358143215], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 576709754], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 576709754], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 1019702018 LIMIT $2[0m  [["user_id", 576709754], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book11"], ["category", "album"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["category", "album"], ["title", "book11"], ["creator", "author"], ["publication_year", "1960"], ["description", "good book"], ["created_at", "2018-04-14 04:34:45.732569"], ["updated_at", "2018-04-14 04:34:45.732569"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "book11"], ["id", 1019702019], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:35:40.968362', '2018-04-14 04:35:40.968362', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:35:40.968362', '2018-04-14 04:35:40.968362', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:35:40.968362', '2018-04-14 04:35:40.968362', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:35:40.968362', '2018-04-14 04:35:40.968362', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:35:40.968362', '2018-04-14 04:35:40.968362', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:35:40.968362', '2018-04-14 04:35:40.968362', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:35:40.968362', '2018-04-14 04:35:40.968362', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:35:40.968362', '2018-04-14 04:35:40.968362', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:35:40.968362', '2018-04-14 04:35:40.968362', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (1.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:35:40.979926', '2018-04-14 04:35:40.979926', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:35:40.996186', '2018-04-14 04:35:40.996186', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:35:40.996186', '2018-04-14 04:35:40.996186', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:35:40.996186', '2018-04-14 04:35:40.996186', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:35:40.996186', '2018-04-14 04:35:40.996186', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:35:40.996186', '2018-04-14 04:35:40.996186', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:35:40.996186', '2018-04-14 04:35:40.996186', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:35:40.996186', '2018-04-14 04:35:40.996186', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:35:40.996186', '2018-04-14 04:35:40.996186', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:35:40.996186', '2018-04-14 04:35:40.996186', 347574605)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book11"], ["category", "album"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["category", "album"], ["title", "book11"], ["creator", "author"], ["publication_year", "1960"], ["description", "good book"], ["created_at", "2018-04-14 04:35:41.042978"], ["updated_at", "2018-04-14 04:35:41.042978"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "book11"], ["id", 1019702019], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:35:41.134155"], ["updated_at", "2018-04-14 04:35:41.134155"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 358143215], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:35:41.141932"], ["updated_at", "2018-04-14 04:35:41.141932"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 358143215], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 576709754], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 576709754], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 1019702018 LIMIT $2[0m  [["user_id", 576709754], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:35:41.160261"], ["updated_at", "2018-04-14 04:35:41.160261"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:36:31.949048', '2018-04-14 04:36:31.949048', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:36:31.949048', '2018-04-14 04:36:31.949048', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:36:31.949048', '2018-04-14 04:36:31.949048', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:36:31.949048', '2018-04-14 04:36:31.949048', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:36:31.949048', '2018-04-14 04:36:31.949048', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:36:31.949048', '2018-04-14 04:36:31.949048', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:36:31.949048', '2018-04-14 04:36:31.949048', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:36:31.949048', '2018-04-14 04:36:31.949048', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:36:31.949048', '2018-04-14 04:36:31.949048', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:36:31.960133', '2018-04-14 04:36:31.960133', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:36:31.977849', '2018-04-14 04:36:31.977849', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:36:31.977849', '2018-04-14 04:36:31.977849', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:36:31.977849', '2018-04-14 04:36:31.977849', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:36:31.977849', '2018-04-14 04:36:31.977849', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:36:31.977849', '2018-04-14 04:36:31.977849', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:36:31.977849', '2018-04-14 04:36:31.977849', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:36:31.977849', '2018-04-14 04:36:31.977849', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:36:31.977849', '2018-04-14 04:36:31.977849', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:36:31.977849', '2018-04-14 04:36:31.977849', 347574605)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:36:32.047417"], ["updated_at", "2018-04-14 04:36:32.047417"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 358143215], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:36:32.053797"], ["updated_at", "2018-04-14 04:36:32.053797"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 358143215], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.6ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:36:32.104247"], ["updated_at", "2018-04-14 04:36:32.104247"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book11"], ["category", "album"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["category", "album"], ["title", "book11"], ["creator", "author"], ["publication_year", "1960"], ["description", "good book"], ["created_at", "2018-04-14 04:36:32.164997"], ["updated_at", "2018-04-14 04:36:32.164997"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "book11"], ["id", 1019702019], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 04:37:11.038039', '2018-04-14 04:37:11.038039', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 04:37:11.038039', '2018-04-14 04:37:11.038039', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 04:37:11.038039', '2018-04-14 04:37:11.038039', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 04:37:11.038039', '2018-04-14 04:37:11.038039', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 04:37:11.038039', '2018-04-14 04:37:11.038039', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 04:37:11.038039', '2018-04-14 04:37:11.038039', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 04:37:11.038039', '2018-04-14 04:37:11.038039', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 04:37:11.038039', '2018-04-14 04:37:11.038039', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 04:37:11.038039', '2018-04-14 04:37:11.038039', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 04:37:11.047660', '2018-04-14 04:37:11.047660', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 04:37:11.062679', '2018-04-14 04:37:11.062679', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 04:37:11.062679', '2018-04-14 04:37:11.062679', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 04:37:11.062679', '2018-04-14 04:37:11.062679', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 04:37:11.062679', '2018-04-14 04:37:11.062679', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 04:37:11.062679', '2018-04-14 04:37:11.062679', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 04:37:11.062679', '2018-04-14 04:37:11.062679', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 04:37:11.062679', '2018-04-14 04:37:11.062679', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 04:37:11.062679', '2018-04-14 04:37:11.062679', 470975007)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 04:37:11.062679', '2018-04-14 04:37:11.062679', 347574605)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book11"], ["category", "album"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["category", "album"], ["title", "book11"], ["creator", "author"], ["publication_year", "1960"], ["description", "good book"], ["created_at", "2018-04-14 04:37:11.177459"], ["updated_at", "2018-04-14 04:37:11.177459"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "book11"], ["id", 1019702019], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be voted on once
---------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (2.0ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:37:11.194972"], ["updated_at", "2018-04-14 04:37:11.194972"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:37:11.204846"], ["updated_at", "2018-04-14 04:37:11.204846"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 358143215], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 04:37:11.212647"], ["updated_at", "2018-04-14 04:37:11.212647"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 358143215], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 05:05:51.330040', '2018-04-14 05:05:51.330040', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 05:05:51.330040', '2018-04-14 05:05:51.330040', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 05:05:51.330040', '2018-04-14 05:05:51.330040', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 05:05:51.330040', '2018-04-14 05:05:51.330040', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 05:05:51.330040', '2018-04-14 05:05:51.330040', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 05:05:51.330040', '2018-04-14 05:05:51.330040', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 05:05:51.330040', '2018-04-14 05:05:51.330040', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 05:05:51.330040', '2018-04-14 05:05:51.330040', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 05:05:51.330040', '2018-04-14 05:05:51.330040', 42601833)[0m
  [1m[36mFixture Delete (0.4ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (1.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:05:51.340720', '2018-04-14 05:05:51.340720', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 05:05:51.357860', '2018-04-14 05:05:51.357860', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 05:05:51.357860', '2018-04-14 05:05:51.357860', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 05:05:51.357860', '2018-04-14 05:05:51.357860', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 05:05:51.357860', '2018-04-14 05:05:51.357860', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 05:05:51.357860', '2018-04-14 05:05:51.357860', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 05:05:51.357860', '2018-04-14 05:05:51.357860', 1001041691)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 05:05:51.357860', '2018-04-14 05:05:51.357860', 722842252)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 05:05:51.357860', '2018-04-14 05:05:51.357860', 470975007)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 05:05:51.357860', '2018-04-14 05:05:51.357860', 347574605)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be update the vote 
------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 05:05:51.461530"], ["updated_at", "2018-04-14 05:05:51.461530"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 05:05:51.476081"], ["updated_at", "2018-04-14 05:05:51.476081"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 358143215], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 05:05:51.484136"], ["updated_at", "2018-04-14 05:05:51.484136"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 358143215], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book11"], ["category", "album"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["category", "album"], ["title", "book11"], ["creator", "author"], ["publication_year", "1960"], ["description", "good book"], ["created_at", "2018-04-14 05:05:51.496826"], ["updated_at", "2018-04-14 05:05:51.496826"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "book11"], ["id", 1019702019], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 05:06:44.604689', '2018-04-14 05:06:44.604689', 206669143)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 05:06:44.604689', '2018-04-14 05:06:44.604689', 358143215)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 05:06:44.604689', '2018-04-14 05:06:44.604689', 576709754)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 05:06:44.604689', '2018-04-14 05:06:44.604689', 1010528733)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 05:06:44.604689', '2018-04-14 05:06:44.604689', 188498254)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 05:06:44.604689', '2018-04-14 05:06:44.604689', 305467638)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 05:06:44.604689', '2018-04-14 05:06:44.604689', 624042081)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 05:06:44.604689', '2018-04-14 05:06:44.604689', 898448884)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 05:06:44.604689', '2018-04-14 05:06:44.604689', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:06:44.614495', '2018-04-14 05:06:44.614495', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.2ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 05:06:44.630095', '2018-04-14 05:06:44.630095', 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 05:06:44.630095', '2018-04-14 05:06:44.630095', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 05:06:44.630095', '2018-04-14 05:06:44.630095', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 05:06:44.630095', '2018-04-14 05:06:44.630095', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 05:06:44.630095', '2018-04-14 05:06:44.630095', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 05:06:44.630095', '2018-04-14 05:06:44.630095', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 05:06:44.630095', '2018-04-14 05:06:44.630095', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 05:06:44.630095', '2018-04-14 05:06:44.630095', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 05:06:44.630095', '2018-04-14 05:06:44.630095', 347574605)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be update the vote 
------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 05:06:44.687148"], ["updated_at", "2018-04-14 05:06:44.687148"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227983], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 05:06:44.697817"], ["updated_at", "2018-04-14 05:06:44.697817"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227984], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 358143215], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 05:06:44.710073"], ["updated_at", "2018-04-14 05:06:44.710073"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 358143215], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227984], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227985], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.4ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book11"], ["category", "album"], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["category", "album"], ["title", "book11"], ["creator", "author"], ["publication_year", "1960"], ["description", "good book"], ["created_at", "2018-04-14 05:06:44.746592"], ["updated_at", "2018-04-14 05:06:44.746592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "book11"], ["id", 1019702019], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.3ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "works" DISABLE TRIGGER ALL;ALTER TABLE "votes" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL[0m
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "users"[0m
  [1m[36mFixture Insert (0.4ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user1', '2018-03-11', '2018-04-14 05:09:59.612751', '2018-04-14 05:09:59.612751', 206669143)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user2', '2018-01-14', '2018-04-14 05:09:59.612751', '2018-04-14 05:09:59.612751', 358143215)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user3', '2018-01-14', '2018-04-14 05:09:59.612751', '2018-04-14 05:09:59.612751', 576709754)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user4', '2018-02-14', '2018-04-14 05:09:59.612751', '2018-04-14 05:09:59.612751', 1010528733)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user5', '2018-02-08', '2018-04-14 05:09:59.612751', '2018-04-14 05:09:59.612751', 188498254)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user6', '2018-04-08', '2018-04-14 05:09:59.612751', '2018-04-14 05:09:59.612751', 305467638)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('user7', '2018-01-08', '2018-04-14 05:09:59.612751', '2018-04-14 05:09:59.612751', 624042081)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username8', '2018-03-18', '2018-04-14 05:09:59.612751', '2018-04-14 05:09:59.612751', 898448884)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "users" ("username", "date_joined", "created_at", "updated_at", "id") VALUES ('username9', '2018-04-18', '2018-04-14 05:09:59.612751', '2018-04-14 05:09:59.612751', 42601833)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "votes"[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 156850806, 576709754, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-09-12', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 273681354, 1010528733, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 660028255, 188498254, 977661844)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-10-11', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 804212123, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 959688446, 188498254, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 417889548, 1010528733, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 389926865, 576709754, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 540737350, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 814080729, 206669143, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 126014020, 305467638, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 1025419005, 624042081, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 169449068, 898448884, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 319866836, 358143215, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 605550409, 794176482, 347574605)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 980640484, 206669143, 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 225727091, 358143215, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 343737291, 576709754, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 595211104, 1010528733, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 868560591, 188498254, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 79830618, 305467638, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 372503870, 624042081, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 557106601, 898448884, 1019702018)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 255501446, 206669143, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 291385639, 358143215, 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 643367346, 576709754, 603819915)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 1062227982, 1010528733, 603819915)[0m
  [1m[36mFixture Insert (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "id", "user_id", "work_id") VALUES ('2017-08-30', '2018-04-14 05:09:59.623867', '2018-04-14 05:09:59.623867', 139944095, 358143215, 581172899)[0m
  [1m[36mFixture Delete (0.3ms)[0m  [1m[31mDELETE FROM "works"[0m
  [1m[36mFixture Insert (1.5ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'Kindred', 'Octavia Butler', '1976', '2018-04-14 05:09:59.638511', '2018-04-14 05:09:59.638511', 603819915)[0m
  [1m[36mFixture Insert (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book3', 'author', '1960', '2018-04-14 05:09:59.638511', '2018-04-14 05:09:59.638511', 1019702018)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('album', 'book4', 'author', '1960', '2018-04-14 05:09:59.638511', '2018-04-14 05:09:59.638511', 581172899)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book5', 'author', '1960', '2018-04-14 05:09:59.638511', '2018-04-14 05:09:59.638511', 363122234)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book6', 'author', '1960', '2018-04-14 05:09:59.638511', '2018-04-14 05:09:59.638511', 212705166)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book7', 'author', '1960', '2018-04-14 05:09:59.638511', '2018-04-14 05:09:59.638511', 1001041691)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book8', 'author', '1960', '2018-04-14 05:09:59.638511', '2018-04-14 05:09:59.638511', 722842252)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'book9', 'author', '1960', '2018-04-14 05:09:59.638511', '2018-04-14 05:09:59.638511', 470975007)[0m
  [1m[36mFixture Insert (0.1ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "created_at", "updated_at", "id") VALUES ('book', 'hunger', 'author', '1960', '2018-04-14 05:09:59.638511', '2018-04-14 05:09:59.638511', 347574605)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "works" ENABLE TRIGGER ALL;ALTER TABLE "votes" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------
Vote::relations: test_0001_belongs to a user and creates an error message if no user is given
---------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 722842252], ["LIMIT", 1]]
  [1m[36mVote Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" IS NULL AND "votes"."work_id" = 722842252 LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------------------------
Vote::relations: test_0002_belongs to a work and creates an error message if no work is given
---------------------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" IS NULL LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Validations: test_0001_is valid when all fields are present
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "user1"], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------
User::Validations: test_0003_is invalid if name is a string with only spaces
----------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", "    "], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------
User::Validations: test_0004_is invalid if an user with same name already exists
--------------------------------------------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 LIMIT $2[0m  [["username", "user1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------------
User::Validations: test_0005_is invalid if length of name is smaller than 1
---------------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" = $1 AND ("users"."id" != $2) LIMIT $3[0m  [["username", ""], ["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------
User::Validations: test_0002_is invalid without a name
------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mUser Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."username" IS NULL AND ("users"."id" != $1) LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------
Vote::validations: test_0002_requires a date
--------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 722842252], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 722842252 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------------------------
Vote::validations: test_0004_can have two votes for the same work from different users
--------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 722842252], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 722842252 LIMIT $2[0m  [["user_id", 898448884], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 05:09:59.712418"], ["updated_at", "2018-04-14 05:09:59.712418"], ["work_id", 722842252], ["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 722842252 LIMIT $2[0m  [["user_id", 42601833], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 05:09:59.717453"], ["updated_at", "2018-04-14 05:09:59.717453"], ["work_id", 722842252], ["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
----------------------------------------------------------------------------------
Vote::validations: test_0003_cannot have two votes for the same work from one user
----------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 722842252], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 898448884], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 722842252 LIMIT $2[0m  [["user_id", 898448884], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 05:09:59.725730"], ["updated_at", "2018-04-14 05:09:59.725730"], ["work_id", 722842252], ["user_id", 898448884]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 722842252 LIMIT $2[0m  [["user_id", 898448884], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 722842252 LIMIT $2[0m  [["user_id", 898448884], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Vote::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 722842252], ["LIMIT", 1]]
  [1m[36mVote Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 722842252 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------
Work::custom public methods::top_work: test_0001_returns top voted work
-----------------------------------------------------------------------
  [1m[36mWork Load (0.6ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[36mWork Load (0.4ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------
Work::validations: test_0002_requires a title
---------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------
Work::validations: test_0003_requires a category
------------------------------------------------
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" IS NULL AND "works"."category" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------------
Work::validations: test_0001_can be created with all required fields
--------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND "works"."category" = $2 LIMIT $3[0m  [["title", "book11"], ["category", "album"], ["LIMIT", 1]]
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "works" ("category", "title", "creator", "publication_year", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["category", "album"], ["title", "book11"], ["creator", "author"], ["publication_year", "1960"], ["description", "good book"], ["created_at", "2018-04-14 05:09:59.750557"], ["updated_at", "2018-04-14 05:09:59.750557"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mWork Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "works" WHERE "works"."title" = $1 AND ("works"."id" != $2) AND "works"."category" = $3 LIMIT $4[0m  [["title", "book11"], ["id", 1019702019], ["category", "album"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------
Work::relations: test_0001_responds to votes and can be update the vote 
------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 05:09:59.761709"], ["updated_at", "2018-04-14 05:09:59.761709"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227986], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227986], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
---------------------------------------------------------------------
Work::relations: test_0003_can destroy dependent relationship to vote
---------------------------------------------------------------------
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 225727091]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 343737291]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 595211104]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 868560591]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 79830618]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 372503870]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 557106601]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "works" WHERE "works"."id" = $1[0m  [["id", 1019702018]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes"[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------
Work::relations: test_0002_can have multiple votes
--------------------------------------------------
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 LIMIT $2[0m  [["work_id", 470975007], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 206669143], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 05:09:59.782294"], ["updated_at", "2018-04-14 05:09:59.782294"], ["work_id", 470975007], ["user_id", 206669143]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 206669143], ["id", 1062227987], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 470975007], ["LIMIT", 1]]
  [1m[36mVote Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND "votes"."work_id" = 470975007 LIMIT $2[0m  [["user_id", 358143215], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "votes" ("date", "created_at", "updated_at", "work_id", "user_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["date", "2018-04-13"], ["created_at", "2018-04-14 05:09:59.788316"], ["updated_at", "2018-04-14 05:09:59.788316"], ["work_id", 470975007], ["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."user_id" = $1 AND ("votes"."id" != $2) AND "votes"."work_id" = 470975007 LIMIT $3[0m  [["user_id", 358143215], ["id", 1062227988], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227987], ["LIMIT", 1]]
  [1m[36mVote Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "votes" WHERE "votes"."work_id" = $1 AND "votes"."id" = $2 LIMIT $3[0m  [["work_id", 470975007], ["id", 1062227988], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0003_returns an empty array if category has no works
-----------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-------------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0001_returns the top ten media in a category that has more than 10 items
-------------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.1ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 347574605], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------------------------------------------------
Work::custom public methods::top_ten: test_0002_returns all media in a category that has fewer than 10 items
------------------------------------------------------------------------------------------------------------
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT "works".* FROM "works"[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 603819915]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1019702018]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 581172899]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 363122234]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 212705166]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 1001041691]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 722842252]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 470975007]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."work_id" = $1[0m  [["work_id", 347574605]]
  [1m[36mWork Load (0.3ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 1019702018], ["LIMIT", 1]]
  [1m[36mWork Load (0.2ms)[0m  [1m[34mSELECT  "works".* FROM "works" WHERE "works"."id" = $1 LIMIT $2[0m  [["id", 581172899], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
------------------------------------------------------------------
User::Methods::count_votes: test_0001_returns the right vote count
------------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------------
User::Methods::count_votes: test_0002_returns 0 if no vote exists
-----------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 42601833], ["LIMIT", 1]]
  [1m[36mVote Load (0.1ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 42601833]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
-----------------------------------------------------------
User::Relations: test_0001_can access votes through 'votes'
-----------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 358143215], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 358143215]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
--------------------------------------------------------------
User::Relations: test_0002_can destroy votes when destroy user
--------------------------------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 206669143], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mVote Load (0.2ms)[0m  [1m[34mSELECT "votes".* FROM "votes" WHERE "votes"."user_id" = $1[0m  [["user_id", 206669143]]
  [1m[35mSQL (0.2ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 814080729]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 980640484]]
  [1m[35mSQL (0.1ms)[0m  [1m[31mDELETE FROM "votes" WHERE "votes"."id" = $1[0m  [["id", 255501446]]
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 206669143]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
